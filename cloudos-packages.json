{
  "packages": [
    {
      "id": "snake",
      "name": "Snake Game",
      "icon": "üêç",
      "version": "1.0",
      "description": "Classic snake game with arrow key controls",
      "author": "cloudos",
      "width": 500,
      "height": 550,
      "app": {
        "html": "<div style=\"text-align:center;padding:20px;font-family:system-ui,-apple-system,sans-serif\"><h2 style=\"margin:0 0 10px 0\">üêç Snake Game</h2><div style=\"margin:10px 0;font-size:20px\">Score: <span id=\"score\">0</span></div><canvas id=\"game\" width=\"400\" height=\"400\" style=\"border:2px solid #333;background:#000\"></canvas><div style=\"margin:10px 0;color:#666\">Use arrow keys to move</div></div>",
        "css": "",
        "js": "function init(container, OS) {\n  const canvas = container.querySelector('#game');\n  const ctx = canvas.getContext('2d');\n  const scoreEl = container.querySelector('#score');\n  \n  const gridSize = 20;\n  const tileCount = 20;\n  let snake = [{x: 10, y: 10}];\n  let food = {x: 15, y: 15};\n  let dx = 0, dy = 0;\n  let score = 0;\n  let gameLoop;\n  \n  function draw() {\n    // Clear\n    ctx.fillStyle = '#000';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    \n    // Snake\n    ctx.fillStyle = '#0f0';\n    snake.forEach(segment => {\n      ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);\n    });\n    \n    // Food\n    ctx.fillStyle = '#f00';\n    ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);\n  }\n  \n  function update() {\n    if (dx === 0 && dy === 0) return;\n    \n    const head = {x: snake[0].x + dx, y: snake[0].y + dy};\n    \n    // Check collision with walls\n    if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {\n      reset();\n      return;\n    }\n    \n    // Check collision with self\n    if (snake.some(s => s.x === head.x && s.y === head.y)) {\n      reset();\n      return;\n    }\n    \n    snake.unshift(head);\n    \n    // Check if ate food\n    if (head.x === food.x && head.y === food.y) {\n      score++;\n      scoreEl.textContent = score;\n      food = {\n        x: Math.floor(Math.random() * tileCount),\n        y: Math.floor(Math.random() * tileCount)\n      };\n    } else {\n      snake.pop();\n    }\n    \n    draw();\n  }\n  \n  function reset() {\n    snake = [{x: 10, y: 10}];\n    dx = 0;\n    dy = 0;\n    score = 0;\n    scoreEl.textContent = score;\n  }\n  \n  window.addEventListener('keydown', e => {\n    if (e.key === 'ArrowUp' && dy === 0) { dx = 0; dy = -1; }\n    if (e.key === 'ArrowDown' && dy === 0) { dx = 0; dy = 1; }\n    if (e.key === 'ArrowLeft' && dx === 0) { dx = -1; dy = 0; }\n    if (e.key === 'ArrowRight' && dx === 0) { dx = 1; dy = 0; }\n  });\n  \n  draw();\n  gameLoop = setInterval(update, 150);\n  \n  return () => clearInterval(gameLoop);\n}"
      }
    },
    {
      "id": "bubble-wrap",
      "name": "Bubble Wrap",
      "icon": "ü´ß",
      "version": "1.0",
      "description": "Satisfying virtual bubble wrap popping",
      "author": "cloudos",
      "width": 480,
      "height": 520,
      "app": {
        "html": "<div style=\"text-align:center;padding:20px;font-family:system-ui,-apple-system,sans-serif\"><h2 style=\"margin:0 0 10px 0\">ü´ß Bubble Wrap</h2><div style=\"margin:10px 0\">Popped: <span id=\"popped\">0</span> / <span id=\"total\">64</span></div><div id=\"grid\" style=\"display:grid;grid-template-columns:repeat(8,50px);gap:5px;justify-content:center\"></div><button id=\"reset\" style=\"margin-top:20px;padding:10px 20px;font-size:16px;cursor:pointer\">Reset All</button></div>",
        "css": ".bubble{width:50px;height:50px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#e0f0ff,#4a9eff);border:2px solid #2060a0;cursor:pointer;transition:all 0.1s}.bubble.popped{background:#ccc;border-color:#999;transform:scale(0.8);cursor:default}",
        "js": "function init(container, OS) {\n  const grid = container.querySelector('#grid');\n  const poppedEl = container.querySelector('#popped');\n  const resetBtn = container.querySelector('#reset');\n  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n  let popped = 0;\n  \n  function playPop() {\n    const osc = audioCtx.createOscillator();\n    const gain = audioCtx.createGain();\n    osc.connect(gain);\n    gain.connect(audioCtx.destination);\n    osc.frequency.value = 200 + Math.random() * 100;\n    gain.gain.setValueAtTime(0.3, audioCtx.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);\n    osc.start();\n    osc.stop(audioCtx.currentTime + 0.1);\n  }\n  \n  function createBubbles() {\n    grid.innerHTML = '';\n    popped = 0;\n    poppedEl.textContent = '0';\n    \n    for (let i = 0; i < 64; i++) {\n      const bubble = document.createElement('div');\n      bubble.className = 'bubble';\n      bubble.addEventListener('click', () => {\n        if (!bubble.classList.contains('popped')) {\n          bubble.classList.add('popped');\n          playPop();\n          popped++;\n          poppedEl.textContent = popped;\n        }\n      });\n      grid.appendChild(bubble);\n    }\n  }\n  \n  resetBtn.addEventListener('click', createBubbles);\n  createBubbles();\n}"
      }
    },
    {
      "id": "palette-gen",
      "name": "Color Palette Generator",
      "icon": "üé®",
      "version": "1.0",
      "description": "Generate harmonious color palettes with one click",
      "author": "cloudos",
      "width": 550,
      "height": 450,
      "app": {
        "html": "<div style=\"text-align:center;padding:20px;font-family:system-ui,-apple-system,sans-serif\"><h2 style=\"margin:0 0 20px 0\">üé® Palette Generator</h2><div id=\"palette\" style=\"display:flex;gap:10px;justify-content:center;margin:20px 0\"></div><button id=\"generate\" style=\"padding:12px 30px;font-size:16px;cursor:pointer;background:#007bff;color:white;border:none;border-radius:5px\">Generate New Palette</button><div id=\"message\" style=\"margin-top:15px;color:#28a745;height:20px\"></div></div>",
        "css": ".color-box{width:80px;height:120px;border-radius:8px;cursor:pointer;display:flex;align-items:flex-end;justify-content:center;padding:10px;font-size:12px;color:white;text-shadow:0 1px 2px rgba(0,0,0,0.5);transition:transform 0.2s}.color-box:hover{transform:scale(1.05)}",
        "js": "function init(container, OS) {\n  const paletteEl = container.querySelector('#palette');\n  const generateBtn = container.querySelector('#generate');\n  const messageEl = container.querySelector('#message');\n  \n  function hslToHex(h, s, l) {\n    l /= 100;\n    const a = s * Math.min(l, 1 - l) / 100;\n    const f = n => {\n      const k = (n + h / 30) % 12;\n      const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n      return Math.round(255 * color).toString(16).padStart(2, '0');\n    };\n    return `#${f(0)}${f(8)}${f(4)}`;\n  }\n  \n  function generatePalette() {\n    const baseHue = Math.floor(Math.random() * 360);\n    const colors = [];\n    \n    // Analogous harmony with varying lightness\n    for (let i = 0; i < 5; i++) {\n      const hue = (baseHue + i * 30) % 360;\n      const sat = 60 + Math.random() * 30;\n      const light = 40 + i * 10;\n      colors.push(hslToHex(hue, sat, light));\n    }\n    \n    paletteEl.innerHTML = '';\n    colors.forEach(color => {\n      const box = document.createElement('div');\n      box.className = 'color-box';\n      box.style.backgroundColor = color;\n      box.textContent = color;\n      box.addEventListener('click', () => {\n        navigator.clipboard.writeText(color);\n        messageEl.textContent = `Copied ${color}!`;\n        setTimeout(() => messageEl.textContent = '', 2000);\n      });\n      paletteEl.appendChild(box);\n    });\n  }\n  \n  generateBtn.addEventListener('click', generatePalette);\n  generatePalette();\n}"
      }
    },
    {
      "id": "pomodoro",
      "name": "Pomodoro Timer",
      "icon": "üçÖ",
      "version": "1.0",
      "description": "25/5 minute work/break timer with visual countdown",
      "author": "cloudos",
      "width": 400,
      "height": 480,
      "app": {
        "html": "<div style=\"text-align:center;padding:30px;font-family:system-ui,-apple-system,sans-serif\"><h2 style=\"margin:0 0 20px 0\">üçÖ Pomodoro Timer</h2><div id=\"mode\" style=\"font-size:20px;color:#666;margin-bottom:20px\">Work Session</div><svg width=\"200\" height=\"200\" style=\"transform:rotate(-90deg)\"><circle cx=\"100\" cy=\"100\" r=\"90\" fill=\"none\" stroke=\"#eee\" stroke-width=\"10\"/><circle id=\"progress\" cx=\"100\" cy=\"100\" r=\"90\" fill=\"none\" stroke=\"#e74c3c\" stroke-width=\"10\" stroke-dasharray=\"565\" stroke-dashoffset=\"0\"/></svg><div id=\"time\" style=\"font-size:48px;font-weight:bold;margin:20px 0\">25:00</div><div style=\"display:flex;gap:10px;justify-content:center\"><button id=\"start\" style=\"padding:10px 20px;font-size:16px;cursor:pointer\">Start</button><button id=\"reset\" style=\"padding:10px 20px;font-size:16px;cursor:pointer\">Reset</button></div></div>",
        "css": "",
        "js": "function init(container, OS) {\n  const timeEl = container.querySelector('#time');\n  const modeEl = container.querySelector('#mode');\n  const progressEl = container.querySelector('#progress');\n  const startBtn = container.querySelector('#start');\n  const resetBtn = container.querySelector('#reset');\n  \n  let isWork = true;\n  let timeLeft = 25 * 60;\n  let totalTime = 25 * 60;\n  let interval = null;\n  const circumference = 2 * Math.PI * 90;\n  \n  function updateDisplay() {\n    const mins = Math.floor(timeLeft / 60);\n    const secs = timeLeft % 60;\n    timeEl.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;\n    const progress = 1 - (timeLeft / totalTime);\n    progressEl.style.strokeDashoffset = circumference * progress;\n  }\n  \n  function tick() {\n    timeLeft--;\n    if (timeLeft < 0) {\n      isWork = !isWork;\n      timeLeft = isWork ? 25 * 60 : 5 * 60;\n      totalTime = timeLeft;\n      modeEl.textContent = isWork ? 'Work Session' : 'Break Time';\n      progressEl.style.stroke = isWork ? '#e74c3c' : '#2ecc71';\n    }\n    updateDisplay();\n  }\n  \n  startBtn.addEventListener('click', () => {\n    if (interval) {\n      clearInterval(interval);\n      interval = null;\n      startBtn.textContent = 'Start';\n    } else {\n      interval = setInterval(tick, 1000);\n      startBtn.textContent = 'Pause';\n    }\n  });\n  \n  resetBtn.addEventListener('click', () => {\n    if (interval) clearInterval(interval);\n    interval = null;\n    isWork = true;\n    timeLeft = 25 * 60;\n    totalTime = 25 * 60;\n    modeEl.textContent = 'Work Session';\n    progressEl.style.stroke = '#e74c3c';\n    startBtn.textContent = 'Start';\n    updateDisplay();\n  });\n  \n  updateDisplay();\n  return () => interval && clearInterval(interval);\n}"
      }
    },
    {
      "id": "mini-piano",
      "name": "Mini Piano",
      "icon": "üéπ",
      "version": "1.0",
      "description": "2 octave piano keyboard with Web Audio synthesis",
      "author": "cloudos",
      "width": 720,
      "height": 400,
      "app": {
        "html": "<div style=\"text-align:center;padding:20px;font-family:system-ui,-apple-system,sans-serif\"><h2 style=\"margin:0 0 20px 0\">üéπ Mini Piano</h2><div id=\"keyboard\" style=\"display:flex;justify-content:center;position:relative;height:200px\"></div><div style=\"margin-top:20px;color:#666\">Click keys or use keyboard: A S D F G H J K L ; ' for white keys</div></div>",
        "css": ".white-key{width:40px;height:180px;background:linear-gradient(to bottom,#fff,#f0f0f0);border:1px solid #000;cursor:pointer;position:relative}.white-key:active,.white-key.playing{background:linear-gradient(to bottom,#e0e0e0,#d0d0d0)}.black-key{width:28px;height:110px;background:linear-gradient(to bottom,#333,#000);border:1px solid #000;cursor:pointer;position:absolute;z-index:1}.black-key:active,.black-key.playing{background:linear-gradient(to bottom,#555,#222)}",
        "js": "function init(container, OS) {\n  const keyboard = container.querySelector('#keyboard');\n  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n  const notes = ['C4','D4','E4','F4','G4','A4','B4','C5','D5','E5','F5','G5','A5','B5'];\n  const freqs = [261.63,293.66,329.63,349.23,392.00,440.00,493.88,523.25,587.33,659.25,698.46,783.99,880.00,987.77];\n  const keys = ['a','s','d','f','g','h','j','k','l',';',\"'\"];\n  \n  function playNote(freq, duration = 0.5) {\n    const osc = audioCtx.createOscillator();\n    const gain = audioCtx.createGain();\n    osc.connect(gain);\n    gain.connect(audioCtx.destination);\n    osc.frequency.value = freq;\n    osc.type = 'sine';\n    gain.gain.setValueAtTime(0.3, audioCtx.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);\n    osc.start();\n    osc.stop(audioCtx.currentTime + duration);\n  }\n  \n  notes.forEach((note, i) => {\n    const isBlack = note.includes('#') || ['D','E','G','A','B'].includes(note[0]) && i % 7 !== 2 && i % 7 !== 6;\n    const key = document.createElement('div');\n    key.className = isBlack ? 'black-key' : 'white-key';\n    \n    if (isBlack) {\n      key.style.left = `${(i - 0.5) * 40}px`;\n    }\n    \n    key.addEventListener('mousedown', () => {\n      playNote(freqs[i]);\n      key.classList.add('playing');\n      setTimeout(() => key.classList.remove('playing'), 200);\n    });\n    \n    keyboard.appendChild(key);\n  });\n  \n  window.addEventListener('keydown', e => {\n    const idx = keys.indexOf(e.key.toLowerCase());\n    if (idx !== -1 && idx < freqs.length) {\n      playNote(freqs[idx]);\n    }\n  });\n}"
      }
    },
    {
      "id": "reaction-test",
      "name": "Reaction Speed Test",
      "icon": "‚ö°",
      "version": "1.0",
      "description": "Test your reaction time - click when the screen turns green",
      "author": "cloudos",
      "width": 500,
      "height": 450,
      "app": {
        "html": "<div style=\"text-align:center;padding:20px;font-family:system-ui,-apple-system,sans-serif\"><h2 style=\"margin:0 0 20px 0\">‚ö° Reaction Speed Test</h2><div id=\"game-area\" style=\"width:400px;height:250px;margin:0 auto;border:3px solid #333;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;background:#f0f0f0\"><div id=\"message\">Click to Start</div></div><div id=\"stats\" style=\"margin-top:20px;font-size:18px\"><div>Best: <span id=\"best\">-</span></div><div>Average: <span id=\"avg\">-</span></div><div style=\"margin-top:10px;font-size:14px;color:#666\">Recent: <span id=\"history\">-</span></div></div></div>",
        "css": "",
        "js": "function init(container, OS) {\n  const area = container.querySelector('#game-area');\n  const message = container.querySelector('#message');\n  const bestEl = container.querySelector('#best');\n  const avgEl = container.querySelector('#avg');\n  const historyEl = container.querySelector('#history');\n  \n  let state = 'ready';\n  let startTime = 0;\n  let times = [];\n  let timeout;\n  \n  function startTest() {\n    state = 'waiting';\n    area.style.background = '#ff6b6b';\n    message.textContent = 'Wait for green...';\n    \n    timeout = setTimeout(() => {\n      state = 'go';\n      area.style.background = '#51cf66';\n      message.textContent = 'Click NOW!';\n      startTime = Date.now();\n    }, 2000 + Math.random() * 3000);\n  }\n  \n  function updateStats() {\n    if (times.length === 0) return;\n    const best = Math.min(...times);\n    const avg = Math.round(times.reduce((a, b) => a + b) / times.length);\n    bestEl.textContent = `${best}ms`;\n    avgEl.textContent = `${avg}ms`;\n    historyEl.textContent = times.slice(-5).map(t => `${t}ms`).join(', ');\n  }\n  \n  area.addEventListener('click', () => {\n    if (state === 'ready') {\n      startTest();\n    } else if (state === 'waiting') {\n      clearTimeout(timeout);\n      state = 'ready';\n      area.style.background = '#f0f0f0';\n      message.textContent = 'Too early! Click to try again';\n    } else if (state === 'go') {\n      const reactionTime = Date.now() - startTime;\n      times.push(reactionTime);\n      state = 'ready';\n      area.style.background = '#f0f0f0';\n      message.textContent = `${reactionTime}ms! Click to try again`;\n      updateStats();\n    }\n  });\n  \n  return () => timeout && clearTimeout(timeout);\n}"
      }
    }
  ]
}
