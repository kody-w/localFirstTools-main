<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Local First Tools</title>
<meta name="description" content="450+ self-contained HTML applications. No dependencies, no tracking, works offline.">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#09090b;--bg2:#111113;--bg3:#18181b;--bg4:#27272a;
  --text:#fafafa;--text2:#a1a1aa;--text3:#52525b;
  --accent:#7c3aed;--accent2:#a78bfa;--accent-glow:rgba(124,58,237,.2);
  --border:#27272a;--radius:10px;
}
html{scroll-behavior:smooth}
body{font-family:system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;-webkit-font-smoothing:antialiased}

header{padding:3rem 1.5rem 1.5rem;text-align:center}
header h1{font-size:1.75rem;font-weight:700;letter-spacing:-.03em;margin-bottom:.25rem}
header p{color:var(--text2);font-size:.9rem}
.stats{display:flex;gap:1.5rem;justify-content:center;margin-top:1rem}
.stats span{font-size:.8rem;color:var(--text3)}
.stats strong{color:var(--accent2);font-weight:600}

.controls{max-width:1200px;margin:1.5rem auto;padding:0 1.5rem;display:flex;flex-wrap:wrap;gap:.75rem;align-items:center}
.search-box{flex:1;min-width:200px;position:relative}
.search-box input{width:100%;padding:.6rem 1rem .6rem 2.25rem;background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);color:var(--text);font-size:.85rem;outline:none;transition:border-color .15s}
.search-box input:focus{border-color:var(--accent)}
.search-box input::placeholder{color:var(--text3)}
.search-box svg{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:var(--text3);width:14px;height:14px}
.filters{display:flex;gap:.375rem;overflow-x:auto;scrollbar-width:none;flex-shrink:0}
.filters::-webkit-scrollbar{display:none}
.pill{padding:.375rem .75rem;border-radius:50px;border:1px solid var(--border);background:transparent;color:var(--text2);font-size:.75rem;cursor:pointer;white-space:nowrap;transition:all .15s}
.pill:hover{border-color:var(--text3)}
.pill.on{background:var(--accent);border-color:var(--accent);color:#fff}
.sort-sel{padding:.375rem .5rem;background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);color:var(--text2);font-size:.75rem;cursor:pointer;outline:none}
.meta-bar{max-width:1200px;margin:0 auto .75rem;padding:0 1.5rem;font-size:.75rem;color:var(--text3)}

.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:.75rem;max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}

a.card{display:block;background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);padding:.875rem 1rem;text-decoration:none;color:inherit;transition:border-color .15s,transform .15s}
a.card:hover{border-color:var(--accent);transform:translateY(-2px)}
.card-top{display:flex;align-items:center;gap:.5rem;margin-bottom:.375rem}
.card-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.card h3{font-size:.85rem;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}
.card p{font-size:.75rem;color:var(--text2);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-bottom:.5rem}
.card-tags{display:flex;gap:.25rem;flex-wrap:wrap}
.card-tags span{font-size:.6rem;padding:1px 6px;border-radius:50px;background:var(--bg3);color:var(--text3)}

.empty{text-align:center;padding:3rem;color:var(--text3);font-size:.9rem}
.totop{position:fixed;bottom:1.5rem;right:1.5rem;width:36px;height:36px;border-radius:50%;background:var(--accent);color:#fff;border:none;cursor:pointer;opacity:0;transition:opacity .2s;font-size:1rem;display:flex;align-items:center;justify-content:center}
.totop.show{opacity:1}
footer{text-align:center;padding:2rem;font-size:.7rem;color:var(--text3);border-top:1px solid var(--border)}
footer a{color:var(--accent2);text-decoration:none}

@media(max-width:640px){
  .controls{flex-direction:column}
  .search-box{min-width:100%}
  .grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<header>
  <h1>Local First Tools</h1>
  <p>Self-contained HTML applications. No dependencies. Works offline.</p>
  <div class="stats">
    <span><strong id="ct">--</strong> apps</span>
    <span><strong>9</strong> categories</span>
    <span><strong>0</strong> dependencies</span>
  </div>
</header>

<div class="controls">
  <div class="search-box">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
    <input id="q" type="text" placeholder="Search..." aria-label="Search">
  </div>
  <div class="filters" id="filters"></div>
  <select class="sort-sel" id="sort" aria-label="Sort">
    <option value="name">A-Z</option>
    <option value="newest">Newest</option>
    <option value="complexity">Complexity</option>
  </select>
</div>
<div class="meta-bar" id="meta"></div>

<main class="grid" id="grid"></main>
<div class="empty" id="empty" style="display:none">No apps match your search.</div>

<button class="totop" id="top" aria-label="Back to top">&#8593;</button>

<footer>
  <a href="https://github.com/kody-w/localFirstTools-main">GitHub</a>
</footer>

<script>
(function(){
  var apps=[], filtered=[], cat='all', query='', sort='name';
  var CXORD={advanced:0,intermediate:1,simple:2};

  fetch('apps/manifest.json').then(function(r){return r.json()}).then(function(data){
    var nav=document.getElementById('filters');
    var total=0;
    var html='<button class="pill on" data-c="all">All</button>';
    var cats=data.categories;
    for(var k in cats){
      if(!cats.hasOwnProperty(k))continue;
      var c=cats[k], seen={};
      for(var i=0;i<c.apps.length;i++){
        var a=c.apps[i];
        if(seen[a.file])continue;
        seen[a.file]=1;
        apps.push({t:a.title,f:'apps/'+c.folder+'/'+a.file,d:a.description,tags:a.tags,cx:a.complexity,ft:a.featured,cr:a.created,cat:k,catTitle:c.title,color:c.color});
        total++;
      }
      html+='<button class="pill" data-c="'+k+'">'+esc(c.title)+'<\/button>';
    }
    // add uncategorized
    nav.innerHTML=html;
    document.getElementById('ct').textContent=total;
    run();
    listen();
  });

  function run(){
    var q=query.toLowerCase();
    filtered=[];
    for(var i=0;i<apps.length;i++){
      var a=apps[i];
      if(cat!=='all'&&a.cat!==cat)continue;
      if(q){
        var h=(a.t+' '+a.d+' '+a.tags.join(' ')).toLowerCase();
        var ws=q.split(/\s+/), ok=true;
        for(var w=0;w<ws.length;w++){if(h.indexOf(ws[w])<0){ok=false;break}}
        if(!ok)continue;
      }
      filtered.push(a);
    }
    filtered.sort(function(a,b){
      if(sort==='name')return a.t.localeCompare(b.t);
      if(sort==='newest')return(b.cr||'').localeCompare(a.cr||'');
      return(CXORD[a.cx]!=null?CXORD[a.cx]:1)-(CXORD[b.cx]!=null?CXORD[b.cx]:1);
    });
    render();
  }

  function render(){
    var g=document.getElementById('grid');
    var e=document.getElementById('empty');
    document.getElementById('meta').textContent=filtered.length+' app'+(filtered.length!==1?'s':'');
    if(!filtered.length){g.innerHTML='';e.style.display='';return}
    e.style.display='none';
    var frag=document.createDocumentFragment();
    for(var i=0;i<filtered.length;i++){
      var a=filtered[i];
      var el=document.createElement('a');
      el.href=a.f;
      el.className='card';
      var thtml='';
      for(var t=0;t<Math.min(a.tags.length,3);t++)thtml+='<span>'+esc(a.tags[t])+'<\/span>';
      thtml+='<span>'+a.cx+'<\/span>';
      el.innerHTML='<div class="card-top"><span class="card-dot" style="background:'+a.color+'"><\/span><h3>'+esc(a.t)+'<\/h3><\/div><p>'+esc(a.d)+'<\/p><div class="card-tags">'+thtml+'<\/div>';
      frag.appendChild(el);
    }
    g.innerHTML='';
    g.appendChild(frag);
  }

  function esc(s){return s?s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'):''}

  function listen(){
    var timer;
    document.getElementById('q').addEventListener('input',function(e){
      clearTimeout(timer);
      timer=setTimeout(function(){query=e.target.value;run()},120);
    });
    document.getElementById('filters').addEventListener('click',function(e){
      var b=e.target.closest('.pill');
      if(!b)return;
      cat=b.dataset.c;
      var ps=document.querySelectorAll('.pill');
      for(var i=0;i<ps.length;i++)ps[i].classList.remove('on');
      b.classList.add('on');
      run();
    });
    document.getElementById('sort').addEventListener('change',function(e){sort=e.target.value;run()});
    var tb=document.getElementById('top');
    window.addEventListener('scroll',function(){tb.classList.toggle('show',scrollY>300)},{passive:true});
    tb.addEventListener('click',function(){scrollTo({top:0,behavior:'smooth'})});
    document.addEventListener('keydown',function(e){
      if(e.target.tagName==='INPUT')return;
      if(e.key==='/')e.preventDefault(),document.getElementById('q').focus();
    });
  }
})();
</script>
</body>
</html>
