<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phantom Stars</title>
    <meta name="description" content="Draw invisible paths through space to awaken forgotten stars, creating personal constellations from cosmic memory">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #050510; min-height: 100vh; font-family: 'Georgia', serif; color: #8090b0; overflow: hidden; }
        #canvas { position: fixed; top: 0; left: 0; cursor: crosshair; }
        #controls {
            position: fixed; top: 20px; left: 20px; background: rgba(10,10,25,0.95);
            padding: 20px; border-radius: 10px; border: 1px solid rgba(100,120,180,0.3);
            z-index: 100;
        }
        h3 { margin-bottom: 15px; color: #b0c0e0; font-weight: normal; }
        .control-row { margin: 10px 0; }
        label { display: block; font-size: 11px; margin-bottom: 5px; opacity: 0.8; }
        input[type="range"] { width: 140px; }
        .value { float: right; color: #c0d0f0; font-size: 12px; }
        button {
            display: block; width: 100%; padding: 10px; margin: 6px 0;
            background: rgba(60,70,120,0.4); border: 1px solid rgba(100,120,180,0.4);
            color: #90a0c0; cursor: pointer; border-radius: 6px; font-family: inherit;
        }
        #star-count { position: fixed; top: 20px; right: 20px; font-size: 12px; color: #607090; z-index: 100; }
        #info { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 12px; opacity: 0.5; z-index: 100; }
        #constellation-name { position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%); font-size: 16px; color: #a0b0d0; opacity: 0; transition: opacity 0.5s; z-index: 100; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="controls">
        <h3>Phantom Stars</h3>
        <div class="control-row">
            <label>Trail Brightness <span class="value" id="bright-val">60</span></label>
            <input type="range" id="bright" min="20" max="100" value="60">
        </div>
        <div class="control-row">
            <label>Awakening Radius <span class="value" id="radius-val">40</span></label>
            <input type="range" id="radius" min="20" max="80" value="40">
        </div>
        <button id="scatter-btn">Scatter New Phantoms</button>
        <button id="clear-btn">Forget All</button>
    </div>
    <div id="star-count">Stars Awakened: 0 / 0</div>
    <div id="constellation-name"></div>
    <div id="info">Draw through the darkness to remember forgotten stars</div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let W, H;
        function resize() { W = canvas.width = innerWidth; H = canvas.height = innerHeight; initPhantoms(); }
        
        let trailBrightness = 0.6;
        let awakeningRadius = 40;
        let time = 0;
        
        const phantomStars = [];
        const awakenedStars = [];
        const constellationLines = [];
        const trail = [];
        
        const CONSTELLATION_NAMES = [
            'The Wanderer', 'The Cartographer', 'The Forgotten Gate',
            'The Dreamer', 'The Keeper', 'The Threshold',
            'The Memory', 'The Whisper', 'The Architect',
            'The Seeker', 'The Guardian', 'The Reflection'
        ];
        
        function initPhantoms() {
            phantomStars.length = 0;
            const count = Math.floor((W * H) / 8000);
            
            for (let i = 0; i < count; i++) {
                phantomStars.push({
                    x: Math.random() * W,
                    y: Math.random() * H,
                    size: 1 + Math.random() * 2,
                    opacity: 0.05 + Math.random() * 0.1,
                    hue: 200 + Math.random() * 60,
                    awakened: false,
                    awakeProgress: 0,
                    pulsePhase: Math.random() * Math.PI * 2
                });
            }
        }
        
        resize(); window.onresize = resize;
        
        let isDrawing = false;
        let lastX = 0, lastY = 0;
        
        function awakenNearbyStars(x, y) {
            let newlyAwakened = false;
            
            phantomStars.forEach(star => {
                if (star.awakened) return;
                
                const dist = Math.hypot(star.x - x, star.y - y);
                if (dist < awakeningRadius) {
                    star.awakened = true;
                    star.awakeProgress = 0;
                    awakenedStars.push(star);
                    newlyAwakened = true;
                    
                    if (awakenedStars.length > 1) {
                        const lastAwakened = awakenedStars[awakenedStars.length - 2];
                        const lineDist = Math.hypot(star.x - lastAwakened.x, star.y - lastAwakened.y);
                        if (lineDist < 200) {
                            constellationLines.push({
                                x1: lastAwakened.x, y1: lastAwakened.y,
                                x2: star.x, y2: star.y,
                                alpha: 0
                            });
                        }
                    }
                }
            });
            
            if (newlyAwakened && awakenedStars.length >= 5 && awakenedStars.length % 5 === 0) {
                showConstellationName();
            }
        }
        
        function showConstellationName() {
            const nameEl = document.getElementById('constellation-name');
            const name = CONSTELLATION_NAMES[Math.floor(Math.random() * CONSTELLATION_NAMES.length)];
            nameEl.textContent = name;
            nameEl.style.opacity = 1;
            setTimeout(() => { nameEl.style.opacity = 0; }, 3000);
        }
        
        function drawBackground() {
            ctx.fillStyle = '#050510';
            ctx.fillRect(0, 0, W, H);
            
            const gradient = ctx.createRadialGradient(W/2, H/2, 0, W/2, H/2, Math.max(W, H) * 0.7);
            gradient.addColorStop(0, 'rgba(20, 25, 50, 0.3)');
            gradient.addColorStop(1, 'transparent');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
        }
        
        function drawPhantomStars() {
            phantomStars.forEach(star => {
                if (star.awakened) return;
                
                const flicker = Math.sin(time * 2 + star.pulsePhase) * 0.02;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fillStyle = "hsla(" + star.hue + ", 30%, 50%, " + (star.opacity + flicker) + ")";
                ctx.fill();
            });
        }
        
        function drawAwakenedStars() {
            awakenedStars.forEach(star => {
                if (star.awakeProgress < 1) {
                    star.awakeProgress += 0.02;
                }
                
                const progress = Math.min(1, star.awakeProgress);
                const pulse = 1 + Math.sin(time * 3 + star.pulsePhase) * 0.1;
                const size = star.size * 2 * progress * pulse;
                
                const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, size * 3);
                gradient.addColorStop(0, "hsla(" + star.hue + ", 70%, 80%, " + (progress * 0.8) + ")");
                gradient.addColorStop(0.3, "hsla(" + star.hue + ", 60%, 60%, " + (progress * 0.3) + ")");
                gradient.addColorStop(1, "transparent");
                ctx.fillStyle = gradient;
                ctx.fillRect(star.x - size * 3, star.y - size * 3, size * 6, size * 6);
                
                ctx.beginPath();
                ctx.arc(star.x, star.y, size, 0, Math.PI * 2);
                ctx.fillStyle = "hsla(" + star.hue + ", 80%, 90%, " + progress + ")";
                ctx.fill();
            });
        }
        
        function drawConstellationLines() {
            constellationLines.forEach(line => {
                if (line.alpha < 0.5) {
                    line.alpha += 0.01;
                }
                
                ctx.beginPath();
                ctx.moveTo(line.x1, line.y1);
                ctx.lineTo(line.x2, line.y2);
                ctx.strokeStyle = "rgba(150, 180, 220, " + line.alpha + ")";
                ctx.lineWidth = 1;
                ctx.stroke();
            });
        }
        
        function drawTrail() {
            if (trail.length < 2) return;
            
            ctx.beginPath();
            ctx.moveTo(trail[0].x, trail[0].y);
            
            for (let i = 1; i < trail.length; i++) {
                ctx.lineTo(trail[i].x, trail[i].y);
            }
            
            ctx.strokeStyle = "rgba(100, 150, 255, " + trailBrightness + ")";
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.stroke();
            
            trail.forEach((point, i) => {
                const age = (trail.length - i) / trail.length;
                ctx.beginPath();
                ctx.arc(point.x, point.y, 4 * age, 0, Math.PI * 2);
                ctx.fillStyle = "rgba(150, 200, 255, " + (age * trailBrightness) + ")";
                ctx.fill();
            });
            
            for (let i = trail.length - 1; i >= 0; i--) {
                trail[i].life -= 0.02;
                if (trail[i].life <= 0) {
                    trail.splice(i, 1);
                }
            }
        }
        
        function updateStarCount() {
            document.getElementById('star-count').textContent = 
                'Stars Awakened: ' + awakenedStars.length + ' / ' + phantomStars.length;
        }
        
        function animate() {
            time += 0.016;
            
            drawBackground();
            drawPhantomStars();
            drawConstellationLines();
            drawAwakenedStars();
            drawTrail();
            updateStarCount();
            
            requestAnimationFrame(animate);
        }
        
        canvas.onmousedown = e => {
            if (e.clientX < 200 && e.clientY < 250) return;
            isDrawing = true;
            lastX = e.clientX;
            lastY = e.clientY;
        };
        
        canvas.onmousemove = e => {
            if (!isDrawing) return;
            
            trail.push({ x: e.clientX, y: e.clientY, life: 1 });
            if (trail.length > 50) trail.shift();
            
            awakenNearbyStars(e.clientX, e.clientY);
            
            lastX = e.clientX;
            lastY = e.clientY;
        };
        
        canvas.onmouseup = () => { isDrawing = false; };
        canvas.onmouseleave = () => { isDrawing = false; };
        
        document.getElementById('bright').oninput = e => {
            trailBrightness = e.target.value / 100;
            document.getElementById('bright-val').textContent = e.target.value;
        };
        
        document.getElementById('radius').oninput = e => {
            awakeningRadius = parseInt(e.target.value);
            document.getElementById('radius-val').textContent = e.target.value;
        };
        
        document.getElementById('scatter-btn').onclick = () => {
            initPhantoms();
            awakenedStars.length = 0;
            constellationLines.length = 0;
        };
        
        document.getElementById('clear-btn').onclick = () => {
            phantomStars.forEach(star => {
                star.awakened = false;
                star.awakeProgress = 0;
            });
            awakenedStars.length = 0;
            constellationLines.length = 0;
            trail.length = 0;
        };
        
        animate();
    </script>
</body>
</html>