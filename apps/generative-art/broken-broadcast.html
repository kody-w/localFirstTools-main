<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Broken Broadcast Station</title>
    <meta name="description" content="An endless stream of glitched video art from a TV station that exists between channels">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; overflow: hidden; font-family: monospace; }
        #crt {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 90vmin; height: 70vmin; background: #111;
            border-radius: 40px; padding: 30px;
            box-shadow: 0 0 50px rgba(0,0,0,0.8), inset 0 0 100px rgba(0,0,0,0.5);
        }
        #screen {
            width: 100%; height: 100%; background: #000; border-radius: 20px;
            overflow: hidden; position: relative;
        }
        #canvas { width: 100%; height: 100%; }
        #scanlines {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.2) 0px, rgba(0,0,0,0.2) 1px, transparent 1px, transparent 2px);
            pointer-events: none;
        }
        #vignette {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse, transparent 60%, rgba(0,0,0,0.6));
            pointer-events: none;
        }
        #channel {
            position: absolute; top: 20px; right: 20px; color: #0f0;
            font-size: 32px; text-shadow: 2px 2px #000, 0 0 10px #0f0;
        }
        #dial {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            display: flex; align-items: center; gap: 20px; color: #666;
        }
        #dial-knob {
            width: 80px; height: 80px; background: linear-gradient(145deg, #333, #222);
            border-radius: 50%; cursor: pointer; position: relative;
            border: 3px solid #444;
        }
        #dial-knob::after {
            content: ''; position: absolute; top: 10px; left: 50%;
            width: 4px; height: 20px; background: #888; transform: translateX(-50%);
        }
        #ticker {
            position: absolute; bottom: 30px; left: 0; right: 0;
            background: rgba(200, 0, 0, 0.8); color: #fff; padding: 5px 0;
            font-size: 14px; white-space: nowrap; overflow: hidden;
        }
        #ticker-text { animation: scroll 20s linear infinite; display: inline-block; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
        #record-btn {
            position: fixed; top: 20px; right: 20px;
            padding: 10px 20px; background: #300; border: 1px solid #600;
            color: #f66; cursor: pointer; border-radius: 5px;
        }
        #record-btn.recording { background: #600; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }
    </style>
</head>
<body>
    <div id="crt">
        <div id="screen">
            <canvas id="canvas"></canvas>
            <div id="scanlines"></div>
            <div id="vignette"></div>
            <div id="channel">CH 0</div>
            <div id="ticker"><span id="ticker-text">BREAKING: SIGNAL INTERRUPTED... PLEASE STAND BY... THIS IS NOT A TEST... TRANSMISSION ORIGIN UNKNOWN...</span></div>
        </div>
    </div>
    <div id="dial">
        <span>TUNE</span>
        <div id="dial-knob"></div>
        <span>CH</span>
    </div>
    <button id="record-btn">REC</button>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 640; canvas.height = 480;
        
        let channel = 0;
        let glitchIntensity = 0.5;
        let time = 0;
        
        const channels = [
            { name: 'STATIC', draw: drawStatic },
            { name: 'NEWS', draw: drawNews },
            { name: 'TEST', draw: drawTestPattern },
            { name: 'WEATHER', draw: drawWeather },
            { name: 'VOID', draw: drawVoid },
            { name: 'ERROR', draw: drawError }
        ];
        
        function drawStatic() {
            const imgData = ctx.createImageData(canvas.width, canvas.height);
            for (let i = 0; i < imgData.data.length; i += 4) {
                const v = Math.random() * 255;
                imgData.data[i] = imgData.data[i+1] = imgData.data[i+2] = v;
                imgData.data[i+3] = 255;
            }
            ctx.putImageData(imgData, 0, 0);
        }
        
        function drawNews() {
            ctx.fillStyle = '#001030';
            ctx.fillRect(0, 0, 640, 480);
            ctx.fillStyle = '#103060';
            ctx.fillRect(0, 350, 640, 130);
            ctx.fillStyle = '#fff';
            ctx.font = '24px monospace';
            ctx.fillText('BREAKING NEWS', 20, 390);
            ctx.font = '16px monospace';
            const texts = ['SIGNAL LOST', 'PLEASE WAIT', 'TECHNICAL DIFFICULTIES', 'UNKNOWN SOURCE'];
            ctx.fillText(texts[Math.floor(time/60) % texts.length], 20, 430);
            if (Math.random() < 0.3) {
                ctx.fillStyle = 'rgba(255,255,255,0.1)';
                ctx.fillRect(0, Math.random() * 480, 640, 5);
            }
        }
        
        function drawTestPattern() {
            const colors = ['#fff', '#ff0', '#0ff', '#0f0', '#f0f', '#f00', '#00f', '#000'];
            const w = 640 / colors.length;
            colors.forEach((c, i) => {
                ctx.fillStyle = c;
                ctx.fillRect(i * w, 0, w, 360);
            });
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 360, 640, 120);
            ctx.fillStyle = '#fff';
            ctx.font = '20px monospace';
            ctx.fillText('PLEASE STAND BY', 220, 420);
            if (Math.random() < 0.1) {
                const shift = (Math.random() - 0.5) * 20;
                ctx.drawImage(canvas, shift, 0);
            }
        }
        
        function drawWeather() {
            ctx.fillStyle = '#001820';
            ctx.fillRect(0, 0, 640, 480);
            ctx.strokeStyle = '#0a4';
            ctx.lineWidth = 1;
            for (let x = 0; x < 640; x += 40) {
                ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, 480); ctx.stroke();
            }
            for (let y = 0; y < 480; y += 40) {
                ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(640, y); ctx.stroke();
            }
            ctx.fillStyle = '#0f0';
            ctx.beginPath();
            ctx.arc(320 + Math.sin(time/30) * 50, 240 + Math.cos(time/20) * 30, 80, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#fff';
            ctx.font = '14px monospace';
            ctx.fillText('STORM APPROACHING', 250, 450);
        }
        
        function drawVoid() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, 640, 480);
            const cx = 320 + Math.sin(time/50) * 100;
            const cy = 240 + Math.cos(time/40) * 80;
            const grd = ctx.createRadialGradient(cx, cy, 0, cx, cy, 200);
            grd.addColorStop(0, 'rgba(50,0,50,0.5)');
            grd.addColorStop(1, 'transparent');
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, 640, 480);
            if (Math.random() < 0.05) {
                ctx.fillStyle = '#fff';
                ctx.font = '12px monospace';
                ctx.fillText('ARE YOU THERE?', Math.random() * 500, Math.random() * 400);
            }
        }
        
        function drawError() {
            ctx.fillStyle = '#200';
            ctx.fillRect(0, 0, 640, 480);
            ctx.fillStyle = '#f00';
            ctx.font = '48px monospace';
            ctx.fillText('ERROR', 240, 200);
            ctx.font = '16px monospace';
            const codes = ['0xDEADBEEF', '0xFFFFFFFF', '0x00000000', 'SEGFAULT'];
            ctx.fillText('CODE: ' + codes[Math.floor(time/30) % codes.length], 220, 280);
            for (let i = 0; i < 10; i++) {
                ctx.fillStyle = 'rgba(255,0,0,0.2)';
                ctx.fillRect(Math.random() * 640, Math.random() * 480, Math.random() * 100, 2);
            }
        }
        
        function applyGlitch() {
            if (Math.random() < glitchIntensity * 0.3) {
                const slice = Math.random() * 480;
                const h = 10 + Math.random() * 30;
                const shift = (Math.random() - 0.5) * 50;
                const imgData = ctx.getImageData(0, slice, 640, h);
                ctx.putImageData(imgData, shift, slice);
            }
            if (Math.random() < glitchIntensity * 0.1) {
                ctx.fillStyle = 'rgba(' + (Math.random() * 255) + ',0,0,0.3)';
                ctx.fillRect(0, 0, 640, 480);
            }
            if (Math.random() < glitchIntensity * 0.05) {
                const imgData = ctx.getImageData(0, 0, 640, 480);
                for (let i = 0; i < imgData.data.length; i += 4) {
                    if (Math.random() < 0.001) {
                        imgData.data[i] = imgData.data[i+1] = imgData.data[i+2] = 255;
                    }
                }
                ctx.putImageData(imgData, 0, 0);
            }
        }
        
        function animate() {
            time++;
            channels[channel].draw();
            applyGlitch();
            document.getElementById('channel').textContent = 'CH ' + channel;
            requestAnimationFrame(animate);
        }
        
        document.getElementById('dial-knob').onclick = () => {
            channel = (channel + 1) % channels.length;
            glitchIntensity = 1;
            setTimeout(() => glitchIntensity = 0.3 + Math.random() * 0.4, 500);
        };
        
        let recording = false;
        document.getElementById('record-btn').onclick = function() {
            recording = !recording;
            this.classList.toggle('recording', recording);
            this.textContent = recording ? 'STOP' : 'REC';
        };
        
        setInterval(() => {
            const msgs = [
                'SIGNAL INTERRUPTED... ',
                'TRANSMISSION ORIGIN: UNKNOWN... ',
                'DO NOT ADJUST YOUR SET... ',
                'WE ARE EXPERIENCING TECHNICAL DIFFICULTIES... ',
                'PLEASE STAND BY... ',
                'THIS IS NOT A TEST... '
            ];
            document.getElementById('ticker-text').textContent = msgs.sort(() => Math.random() - 0.5).join('');
        }, 20000);
        
        animate();
    </script>
</body>
</html>