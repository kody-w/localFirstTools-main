<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacuum Tube Meditation Chamber</title>
    <meta name="description" content="Hypnotic glowing vacuum tubes that warm up and respond to your breathing pace">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0805; min-height: 100vh; font-family: monospace; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        #canvas { border-radius: 10px; }
        #controls {
            position: fixed; top: 20px; left: 20px; background: rgba(30,25,20,0.9);
            padding: 20px; border-radius: 10px; border: 1px solid rgba(255,180,100,0.3);
            color: #c0a080;
        }
        h3 { margin-bottom: 15px; color: #ffa040; }
        button {
            display: block; width: 100%; padding: 10px; margin: 8px 0;
            background: rgba(100,60,30,0.4); border: 1px solid rgba(255,180,100,0.4);
            color: #c0a080; cursor: pointer; border-radius: 8px;
        }
        .breath-guide {
            margin-top: 15px; text-align: center; font-size: 14px;
        }
        #breath-text { color: #ffa040; font-size: 16px; margin-top: 10px; }
        #info { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); color: rgba(200,150,100,0.5); font-size: 12px; }
        input[type="range"] { width: 100%; margin: 10px 0; }
        label { font-size: 11px; opacity: 0.7; }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <div id="controls">
        <h3>Tube Chamber</h3>
        <label>Warmth Intensity</label>
        <input type="range" id="warmth" min="0" max="100" value="70">
        <label>Breathing Pace (seconds)</label>
        <input type="range" id="pace" min="4" max="12" value="6">
        <button id="power-btn">Power On</button>
        <button id="sync-btn">Sync to Breath</button>
        <div class="breath-guide">
            <div>Breathe with the glow</div>
            <div id="breath-text">...</div>
        </div>
    </div>
    <div id="info">Watch the tubes warm up | Breathe in sync with their glow</div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;

        let powered = false;
        let warmth = 0;
        let targetWarmth = 70;
        let breathPace = 6;
        let breathPhase = 0;
        let synced = false;
        let tubes = [];

        class VacuumTube {
            constructor(x, y, size) {
                this.x = x; this.y = y;
                this.size = size;
                this.warmth = 0;
                this.flicker = 0;
                this.delay = Math.random() * 2;
            }
            update(globalWarmth, time) {
                if (time > this.delay) {
                    this.warmth += (globalWarmth - this.warmth) * 0.02;
                }
                this.flicker = Math.sin(time * 10 + this.x) * 0.05 + Math.random() * 0.02;
            }
            draw() {
                const glow = this.warmth / 100;
                ctx.save();
                ctx.translate(this.x, this.y);
                const glowRadius = this.size * 1.5 * glow;
                if (glow > 0.1) {
                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, glowRadius);
                    gradient.addColorStop(0, "rgba(255, 150, 50, " + (glow * 0.3) + ")");
                    gradient.addColorStop(0.5, "rgba(255, 100, 30, " + (glow * 0.1) + ")");
                    gradient.addColorStop(1, "transparent");
                    ctx.fillStyle = gradient;
                    ctx.fillRect(-glowRadius, -glowRadius, glowRadius * 2, glowRadius * 2);
                }
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size * 0.4, this.size, 0, 0, Math.PI * 2);
                const glassGradient = ctx.createLinearGradient(-this.size * 0.4, 0, this.size * 0.4, 0);
                glassGradient.addColorStop(0, "rgba(60, 50, 40, 0.8)");
                glassGradient.addColorStop(0.3, "rgba(80, 70, 60, 0.6)");
                glassGradient.addColorStop(0.7, "rgba(60, 50, 40, 0.7)");
                glassGradient.addColorStop(1, "rgba(40, 35, 30, 0.9)");
                ctx.fillStyle = glassGradient;
                ctx.fill();
                ctx.strokeStyle = "rgba(100, 80, 60, 0.5)";
                ctx.lineWidth = 2;
                ctx.stroke();
                if (glow > 0.05) {
                    const filamentGlow = glow * (1 + this.flicker);
                    ctx.beginPath();
                    ctx.moveTo(-this.size * 0.15, this.size * 0.6);
                    ctx.quadraticCurveTo(-this.size * 0.1, 0, -this.size * 0.15, -this.size * 0.4);
                    ctx.quadraticCurveTo(0, -this.size * 0.5, this.size * 0.15, -this.size * 0.4);
                    ctx.quadraticCurveTo(this.size * 0.1, 0, this.size * 0.15, this.size * 0.6);
                    ctx.strokeStyle = "rgba(255, " + Math.floor(150 * filamentGlow) + ", " + Math.floor(50 * filamentGlow) + ", " + filamentGlow + ")";
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    const innerGlow = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size * 0.5);
                    innerGlow.addColorStop(0, "rgba(255, 180, 80, " + (filamentGlow * 0.3) + ")");
                    innerGlow.addColorStop(1, "transparent");
                    ctx.fillStyle = innerGlow;
                    ctx.fill();
                }
                ctx.fillStyle = "#2a2520";
                ctx.fillRect(-this.size * 0.3, this.size, this.size * 0.6, this.size * 0.3);
                for (let i = 0; i < 4; i++) {
                    ctx.fillStyle = "#888";
                    ctx.fillRect(-this.size * 0.25 + i * this.size * 0.15, this.size * 1.3, 3, 10);
                }
                ctx.restore();
            }
        }

        function initTubes() {
            tubes = [];
            const rows = 2, cols = 5;
            const spacingX = 140, spacingY = 160;
            const startX = W / 2 - (cols - 1) * spacingX / 2;
            const startY = H / 2 - (rows - 1) * spacingY / 2;
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    tubes.push(new VacuumTube(
                        startX + c * spacingX,
                        startY + r * spacingY,
                        50 + Math.random() * 10
                    ));
                }
            }
        }

        let time = 0;
        function animate() {
            time += 0.016;
            ctx.fillStyle = "#0a0805";
            ctx.fillRect(0, 0, W, H);
            if (powered) {
                warmth += (targetWarmth - warmth) * 0.01;
            } else {
                warmth *= 0.99;
            }
            if (synced) {
                breathPhase += (Math.PI * 2) / (breathPace * 60);
                const breathMod = (Math.sin(breathPhase) + 1) / 2;
                tubes.forEach(t => t.update(warmth * (0.6 + breathMod * 0.4), time));
                const phase = Math.sin(breathPhase);
                document.getElementById('breath-text').textContent = phase > 0 ? "Inhale..." : "Exhale...";
            } else {
                tubes.forEach(t => t.update(warmth, time));
                document.getElementById('breath-text').textContent = powered ? "Warming up..." : "Cold";
            }
            tubes.forEach(t => t.draw());
            requestAnimationFrame(animate);
        }

        document.getElementById('power-btn').onclick = function() {
            powered = !powered;
            this.textContent = powered ? "Power Off" : "Power On";
        };
        document.getElementById('sync-btn').onclick = function() {
            synced = !synced;
            breathPhase = 0;
            this.textContent = synced ? "Unsync Breath" : "Sync to Breath";
        };
        document.getElementById('warmth').oninput = e => targetWarmth = parseInt(e.target.value);
        document.getElementById('pace').oninput = e => breathPace = parseInt(e.target.value);

        initTubes();
        animate();
    </script>
</body>
</html>