<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phosphorescent Revealer</title>
    <meta name="description" content="Drag UV light across hidden messages to reveal glowing secrets through phosphorescent particle trails">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #050508; min-height: 100vh; font-family: 'Courier New', monospace; color: #6060a0; overflow: hidden; }
        #canvas { position: fixed; top: 0; left: 0; cursor: none; }
        #controls {
            position: fixed; top: 20px; left: 20px; background: rgba(10,10,20,0.95);
            padding: 20px; border-radius: 10px; border: 1px solid rgba(100,80,200,0.3);
            z-index: 100;
        }
        h3 { margin-bottom: 15px; color: #8080ff; font-weight: normal; }
        .control-row { margin: 10px 0; }
        label { display: block; font-size: 11px; margin-bottom: 5px; opacity: 0.8; }
        input[type="range"] { width: 140px; }
        .value { float: right; color: #a0a0ff; font-size: 12px; }
        button {
            display: block; width: 100%; padding: 10px; margin: 6px 0;
            background: rgba(60,60,120,0.4); border: 1px solid rgba(100,100,200,0.4);
            color: #8080c0; cursor: pointer; border-radius: 6px;
        }
        #info { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 12px; opacity: 0.5; z-index: 100; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="controls">
        <h3>UV Detective</h3>
        <div class="control-row">
            <label>UV Intensity <span class="value" id="uv-val">70</span></label>
            <input type="range" id="uv" min="30" max="100" value="70">
        </div>
        <div class="control-row">
            <label>Glow Duration <span class="value" id="glow-val">5s</span></label>
            <input type="range" id="glow" min="1" max="15" value="5">
        </div>
        <button id="new-btn">New Hidden Message</button>
        <button id="reveal-btn">Full Reveal</button>
        <button id="clear-btn">Reset Canvas</button>
    </div>
    <div id="info">Drag to reveal hidden messages | Watch phosphorescence fade</div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let W, H;
        function resize() { W = canvas.width = innerWidth; H = canvas.height = innerHeight; generateMessage(); }
        resize(); window.onresize = resize;
        
        let mouseX = -100, mouseY = -100;
        let uvIntensity = 0.7;
        let glowDuration = 5;
        let hiddenPoints = [];
        let revealedParticles = [];
        let currentMessage = '';
        let isMouseDown = false;
        
        const messages = [
            'THE TRUTH HIDES IN PLAIN SIGHT',
            'LOOK BEYOND THE VISIBLE',
            'SECRETS GLOW IN DARKNESS',
            'WHAT YOU SEEK IS WITHIN',
            'LIGHT REVEALS ALL',
            'HIDDEN KNOWLEDGE AWAITS'
        ];
        
        function generateMessage() {
            currentMessage = messages[Math.floor(Math.random() * messages.length)];
            hiddenPoints = [];
            revealedParticles = [];
            
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            tempCanvas.width = W;
            tempCanvas.height = H;
            
            const fontSize = Math.min(W * 0.05, 50);
            tempCtx.font = "bold " + fontSize + "px Arial";
            tempCtx.textAlign = "center";
            tempCtx.textBaseline = "middle";
            tempCtx.fillStyle = "white";
            
            const lines = currentMessage.split(' ');
            const lineHeight = fontSize * 1.4;
            const startY = H / 2 - (lines.length * lineHeight) / 2;
            
            lines.forEach((line, i) => {
                tempCtx.fillText(line, W / 2, startY + i * lineHeight);
            });
            
            const imageData = tempCtx.getImageData(0, 0, W, H);
            const data = imageData.data;
            
            const step = 4;
            for (let y = 0; y < H; y += step) {
                for (let x = 0; x < W; x += step) {
                    const i = (y * W + x) * 4;
                    if (data[i] > 128) {
                        hiddenPoints.push({
                            x: x + (Math.random() - 0.5) * step,
                            y: y + (Math.random() - 0.5) * step,
                            revealed: 0,
                            hue: 260 + Math.random() * 40
                        });
                    }
                }
            }
        }
        
        function drawBackground() {
            ctx.fillStyle = '#050508';
            ctx.fillRect(0, 0, W, H);
            
            for (let i = 0; i < 30; i++) {
                const x = (i * 97) % W;
                const y = (i * 61) % H;
                ctx.beginPath();
                ctx.arc(x, y, 1, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(40, 40, 60, 0.3)';
                ctx.fill();
            }
        }
        
        function drawUVLight() {
            const gradient = ctx.createRadialGradient(mouseX, mouseY, 0, mouseX, mouseY, 100);
            gradient.addColorStop(0, 'rgba(100, 50, 200, ' + (uvIntensity * 0.2) + ')');
            gradient.addColorStop(0.5, 'rgba(80, 40, 180, ' + (uvIntensity * 0.1) + ')');
            gradient.addColorStop(1, 'transparent');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
            
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 5, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(180, 100, 255, 0.8)';
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 15, 0, Math.PI * 2);
            ctx.strokeStyle = 'rgba(140, 80, 220, 0.4)';
            ctx.lineWidth = 2;
            ctx.stroke();
        }
        
        function updateParticles() {
            const revealRadius = 80 * uvIntensity;
            
            if (isMouseDown) {
                hiddenPoints.forEach(point => {
                    const dist = Math.hypot(point.x - mouseX, point.y - mouseY);
                    if (dist < revealRadius) {
                        const intensity = (1 - dist / revealRadius) * uvIntensity;
                        point.revealed = Math.min(1, point.revealed + intensity * 0.1);
                    }
                });
            }
            
            hiddenPoints.forEach(point => {
                if (point.revealed > 0) {
                    point.revealed -= 0.001 / glowDuration;
                    if (point.revealed < 0) point.revealed = 0;
                }
            });
        }
        
        function drawParticles() {
            hiddenPoints.forEach(point => {
                if (point.revealed > 0.01) {
                    const glow = point.revealed;
                    
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 8 * glow, 0, Math.PI * 2);
                    ctx.fillStyle = "hsla(" + point.hue + ", 100%, 60%, " + (glow * 0.3) + ")";
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 3 * glow, 0, Math.PI * 2);
                    ctx.fillStyle = "hsla(" + point.hue + ", 80%, 70%, " + glow + ")";
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 1.5, 0, Math.PI * 2);
                    ctx.fillStyle = "hsla(" + (point.hue + 20) + ", 100%, 90%, " + glow + ")";
                    ctx.fill();
                }
            });
        }
        
        function animate() {
            drawBackground();
            updateParticles();
            drawParticles();
            drawUVLight();
            
            requestAnimationFrame(animate);
        }
        
        canvas.onmousedown = e => {
            isMouseDown = true;
            mouseX = e.clientX;
            mouseY = e.clientY;
        };
        
        canvas.onmouseup = () => {
            isMouseDown = false;
        };
        
        canvas.onmousemove = e => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        };
        
        canvas.onmouseleave = () => {
            isMouseDown = false;
            mouseX = -100;
            mouseY = -100;
        };
        
        canvas.ontouchstart = e => {
            e.preventDefault();
            isMouseDown = true;
            mouseX = e.touches[0].clientX;
            mouseY = e.touches[0].clientY;
        };
        
        canvas.ontouchend = () => {
            isMouseDown = false;
        };
        
        canvas.ontouchmove = e => {
            e.preventDefault();
            mouseX = e.touches[0].clientX;
            mouseY = e.touches[0].clientY;
        };
        
        document.getElementById('uv').oninput = e => {
            uvIntensity = e.target.value / 100;
            document.getElementById('uv-val').textContent = e.target.value;
        };
        
        document.getElementById('glow').oninput = e => {
            glowDuration = parseInt(e.target.value);
            document.getElementById('glow-val').textContent = glowDuration + 's';
        };
        
        document.getElementById('new-btn').onclick = generateMessage;
        
        document.getElementById('reveal-btn').onclick = () => {
            hiddenPoints.forEach(point => {
                point.revealed = 1;
            });
        };
        
        document.getElementById('clear-btn').onclick = () => {
            hiddenPoints.forEach(point => {
                point.revealed = 0;
            });
        };
        
        generateMessage();
        animate();
    </script>
</body>
</html>