<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 AM Gas Station</title>
    <meta name="description" content="A liminal space experience - an isolated gas station at 3 AM where time and reality feel suspended">
    <!-- liminal, atmospheric, experimental, ambient, surreal, exploration -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: #0a0a0a;
            min-height: 100vh;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            color: #a0a0a0;
            cursor: default;
        }
        
        #scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        #clock {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 48px;
            color: #ff3333;
            text-shadow: 0 0 20px rgba(255, 50, 50, 0.5);
            z-index: 100;
            font-family: 'Digital', 'Courier New', monospace;
        }
        
        #ambient-text {
            position: fixed;
            bottom: 30px;
            left: 30px;
            font-size: 14px;
            opacity: 0.6;
            z-index: 100;
            max-width: 300px;
            line-height: 1.8;
            transition: opacity 0.5s ease;
        }
        
        #radio {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(20, 20, 20, 0.8);
            padding: 15px 20px;
            border: 1px solid #333;
            border-radius: 5px;
            z-index: 100;
        }
        
        #radio-display {
            font-size: 12px;
            color: #88ff88;
            margin-bottom: 10px;
        }
        
        #radio-text {
            font-size: 11px;
            opacity: 0.7;
            font-style: italic;
        }
        
        .hotspot {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .hotspot:hover {
            filter: brightness(1.3);
        }
        
        #interaction-text {
            position: fixed;
            bottom: 50%;
            left: 50%;
            transform: translate(-50%, 50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 200;
            pointer-events: none;
        }
        
        #interaction-text.visible {
            opacity: 1;
        }
        
        .flicker {
            animation: flicker 0.1s infinite;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        #phone-booth {
            position: fixed;
            bottom: 100px;
            right: 50px;
            width: 40px;
            height: 80px;
            background: linear-gradient(to bottom, #333 0%, #222 100%);
            border: 2px solid #444;
            cursor: pointer;
            z-index: 90;
        }
        
        #phone-booth.ringing::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #ff0;
            border-radius: 50%;
            animation: ring 0.5s infinite alternate;
        }
        
        @keyframes ring {
            from { opacity: 1; box-shadow: 0 0 10px #ff0; }
            to { opacity: 0.5; box-shadow: 0 0 5px #ff0; }
        }
        
        #vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 80;
            background: radial-gradient(ellipse at center, 
                transparent 0%, 
                transparent 40%, 
                rgba(0,0,0,0.6) 100%);
        }
        
        #scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 85;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.1) 0px,
                rgba(0, 0, 0, 0.1) 1px,
                transparent 1px,
                transparent 2px
            );
        }
    </style>
</head>
<body>
    <canvas id="scene"></canvas>
    <div id="vignette"></div>
    <div id="scanlines"></div>
    
    <div id="clock">3:00</div>
    
    <div id="radio">
        <div id="radio-display">FM 98.7</div>
        <div id="radio-text">...</div>
    </div>
    
    <div id="ambient-text"></div>
    
    <div id="interaction-text"></div>
    
    <div id="phone-booth" title="Phone booth"></div>
    
    <script>
        const canvas = document.getElementById('scene');
        const ctx = canvas.getContext('2d');
        
        let width, height;
        let time = 180; // 3:00 AM in minutes
        let timeDirection = 1;
        let lastTimeChange = Date.now();
        
        const ambientTexts = [
            "The fluorescent lights hum at a frequency just below hearing.",
            "A car passes on the highway. It doesn't stop.",
            "The coffee machine makes a sound, but nothing comes out.",
            "You can't remember how you got here.",
            "The clerk is always in the next aisle over.",
            "The maps show roads that don't connect to anywhere.",
            "The clock jumps forward. Then back.",
            "Is that your reflection in the window?",
            "The radio plays a song you almost recognize.",
            "Time feels thick here, like honey.",
            "The parking lot extends into darkness.",
            "You've been here before. Or you will be.",
            "The phone booth rings. No one is there.",
            "The exit sign flickers. Which way is out?"
        ];
        
        const radioSongs = [
            "...static... you'll never walk alone...",
            "...remember when we used to... static...",
            "...the weather tomorrow will be... static...",
            "...this is an emergency broadcast... static...",
            "...in the year 2000... static...",
            "...calling all cars... static...",
            "...do you believe in... static..."
        ];
        
        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }
        resize();
        window.addEventListener('resize', resize);
        
        // Draw the gas station scene
        function drawScene() {
            // Night sky
            ctx.fillStyle = '#0a0a15';
            ctx.fillRect(0, 0, width, height);
            
            // Stars (barely visible)
            for (let i = 0; i < 50; i++) {
                const x = (Math.sin(i * 456.7) * 0.5 + 0.5) * width;
                const y = (Math.cos(i * 234.5) * 0.5 + 0.5) * height * 0.3;
                ctx.fillStyle = `rgba(255, 255, 255, ${0.1 + Math.sin(Date.now() / 1000 + i) * 0.1})`;
                ctx.beginPath();
                ctx.arc(x, y, 1, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Ground/asphalt
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, height * 0.6, width, height * 0.4);
            
            // Road markings (faded)
            ctx.strokeStyle = 'rgba(255, 255, 100, 0.2)';
            ctx.lineWidth = 3;
            ctx.setLineDash([20, 30]);
            ctx.beginPath();
            ctx.moveTo(0, height * 0.75);
            ctx.lineTo(width, height * 0.75);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Gas station canopy
            const canopyX = width * 0.3;
            const canopyY = height * 0.35;
            const canopyW = width * 0.4;
            const canopyH = height * 0.25;
            
            // Canopy shadow on ground
            ctx.fillStyle = 'rgba(255, 255, 200, 0.1)';
            ctx.fillRect(canopyX - 20, height * 0.6, canopyW + 40, height * 0.15);
            
            // Canopy structure
            ctx.fillStyle = '#2a2a2a';
            ctx.fillRect(canopyX, canopyY, canopyW, 10);
            
            // Pillars
            ctx.fillStyle = '#333';
            ctx.fillRect(canopyX + 20, canopyY + 10, 15, height * 0.25);
            ctx.fillRect(canopyX + canopyW - 35, canopyY + 10, 15, height * 0.25);
            
            // Fluorescent lights (flickering)
            const flicker = Math.random() > 0.98 ? 0.5 : 1;
            ctx.fillStyle = `rgba(255, 255, 220, ${0.9 * flicker})`;
            ctx.shadowColor = 'rgba(255, 255, 200, 0.5)';
            ctx.shadowBlur = 30;
            ctx.fillRect(canopyX + 50, canopyY + 5, canopyW - 100, 5);
            ctx.shadowBlur = 0;
            
            // Gas pumps
            drawPump(canopyX + 80, height * 0.5);
            drawPump(canopyX + canopyW - 120, height * 0.5);
            
            // Store building
            const storeX = width * 0.65;
            const storeY = height * 0.4;
            const storeW = width * 0.25;
            const storeH = height * 0.2;
            
            ctx.fillStyle = '#1f1f1f';
            ctx.fillRect(storeX, storeY, storeW, storeH);
            
            // Store window (glowing)
            ctx.fillStyle = 'rgba(200, 255, 200, 0.3)';
            ctx.fillRect(storeX + 20, storeY + 20, storeW - 40, storeH - 50);
            
            // Shelves visible through window
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            for (let i = 0; i < 4; i++) {
                ctx.fillRect(storeX + 30, storeY + 30 + i * 25, storeW - 60, 3);
            }
            
            // Door
            ctx.fillStyle = '#111';
            ctx.fillRect(storeX + storeW - 50, storeY + 30, 35, storeH - 30);
            
            // "OPEN" sign (buzzing)
            const openFlicker = Math.sin(Date.now() / 100) > 0 ? 1 : 0.7;
            ctx.fillStyle = `rgba(255, 0, 0, ${openFlicker})`;
            ctx.font = '12px monospace';
            ctx.fillText('OPEN', storeX + storeW - 45, storeY + 50);
            
            // Price sign
            ctx.fillStyle = '#111';
            ctx.fillRect(width * 0.1, height * 0.4, 60, 100);
            ctx.fillStyle = '#ff3333';
            ctx.font = '20px monospace';
            ctx.fillText('$?.??', width * 0.1 + 5, height * 0.45);
            ctx.fillText('$?.??', width * 0.1 + 5, height * 0.48);
            ctx.fillText('$?.??', width * 0.1 + 5, height * 0.51);
            
            // Distant highway
            ctx.strokeStyle = 'rgba(255, 100, 100, 0.3)';
            ctx.lineWidth = 2;
            for (let i = 0; i < 3; i++) {
                if (Math.random() > 0.95) {
                    const carX = Math.random() * width;
                    ctx.beginPath();
                    ctx.moveTo(carX, height * 0.28);
                    ctx.lineTo(carX + 30, height * 0.28);
                    ctx.stroke();
                }
            }
        }
        
        function drawPump(x, y) {
            // Pump body
            ctx.fillStyle = '#333';
            ctx.fillRect(x, y, 40, 80);
            
            // Screen
            ctx.fillStyle = '#001100';
            ctx.fillRect(x + 5, y + 10, 30, 20);
            
            // Blinking cursor on screen
            if (Math.sin(Date.now() / 500) > 0) {
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(x + 8, y + 15, 8, 2);
            }
            
            // Nozzle
            ctx.fillStyle = '#222';
            ctx.fillRect(x + 40, y + 30, 20, 8);
        }
        
        // Update clock (erratically)
        function updateClock() {
            const now = Date.now();
            if (now - lastTimeChange > 2000 + Math.random() * 5000) {
                // Time jumps erratically
                if (Math.random() > 0.7) {
                    time += Math.floor(Math.random() * 30) - 15;
                } else {
                    time += timeDirection;
                }
                
                // Occasionally reverse
                if (Math.random() > 0.95) {
                    timeDirection *= -1;
                }
                
                // Keep in reasonable range
                if (time < 170) time = 170;
                if (time > 210) time = 210;
                
                const hours = Math.floor(time / 60);
                const mins = time % 60;
                document.getElementById('clock').textContent = 
                    `${hours}:${mins.toString().padStart(2, '0')}`;
                
                lastTimeChange = now;
            }
        }
        
        // Radio updates
        function updateRadio() {
            const radioText = document.getElementById('radio-text');
            if (Math.random() > 0.99) {
                radioText.textContent = radioSongs[Math.floor(Math.random() * radioSongs.length)];
            }
        }
        
        // Ambient text
        let lastAmbientChange = 0;
        function updateAmbientText() {
            const now = Date.now();
            if (now - lastAmbientChange > 8000 + Math.random() * 7000) {
                const text = document.getElementById('ambient-text');
                text.style.opacity = '0';
                
                setTimeout(() => {
                    text.textContent = ambientTexts[Math.floor(Math.random() * ambientTexts.length)];
                    text.style.opacity = '0.6';
                }, 500);
                
                lastAmbientChange = now;
            }
        }
        
        // Phone booth ringing
        let phoneRinging = false;
        function updatePhone() {
            const phone = document.getElementById('phone-booth');
            
            if (!phoneRinging && Math.random() > 0.998) {
                phone.classList.add('ringing');
                phoneRinging = true;
                
                setTimeout(() => {
                    phone.classList.remove('ringing');
                    phoneRinging = false;
                }, 5000 + Math.random() * 5000);
            }
        }
        
        document.getElementById('phone-booth').addEventListener('click', () => {
            const text = document.getElementById('interaction-text');
            text.textContent = phoneRinging ? 
                '"..." (static) "...hello?" (static) "...are you still there?"' :
                'Dial tone. Endless dial tone.';
            text.classList.add('visible');
            
            document.getElementById('phone-booth').classList.remove('ringing');
            phoneRinging = false;
            
            setTimeout(() => {
                text.classList.remove('visible');
            }, 4000);
        });
        
        // Click interactions
        canvas.addEventListener('click', (e) => {
            const x = e.clientX;
            const y = e.clientY;
            
            const text = document.getElementById('interaction-text');
            
            // Store area
            if (x > width * 0.65 && x < width * 0.9 && y > height * 0.4 && y < height * 0.6) {
                const responses = [
                    "The door is locked. But the sign says OPEN.",
                    "Through the glass, you see movement. The clerk is restocking.",
                    "The handle is cold. Too cold.",
                    "A bell would ring if you entered. Would anyone hear it?"
                ];
                text.textContent = responses[Math.floor(Math.random() * responses.length)];
                text.classList.add('visible');
                setTimeout(() => text.classList.remove('visible'), 4000);
            }
            
            // Gas pump area
            if (x > width * 0.3 && x < width * 0.6 && y > height * 0.45 && y < height * 0.65) {
                const responses = [
                    "The pump displays: 'PLEASE PAY INSIDE'",
                    "Gasoline smell. When did you last fill up?",
                    "The numbers spin but never stop.",
                    "Your car... where did you park?"
                ];
                text.textContent = responses[Math.floor(Math.random() * responses.length)];
                text.classList.add('visible');
                setTimeout(() => text.classList.remove('visible'), 4000);
            }
            
            // Dark areas (parking lot)
            if (y > height * 0.7) {
                const responses = [
                    "The darkness beyond the lights feels solid.",
                    "Something moves. Or was it a shadow?",
                    "You could walk into that darkness. Would you come back?",
                    "The highway hums in the distance. So far away."
                ];
                text.textContent = responses[Math.floor(Math.random() * responses.length)];
                text.classList.add('visible');
                setTimeout(() => text.classList.remove('visible'), 4000);
            }
        });
        
        // Main loop
        function animate() {
            drawScene();
            updateClock();
            updateRadio();
            updateAmbientText();
            updatePhone();
            
            requestAnimationFrame(animate);
        }
        
        // Initialize
        document.getElementById('ambient-text').textContent = ambientTexts[0];
        document.getElementById('radio-text').textContent = radioSongs[0];
        animate();
    </script>
</body>
</html>
