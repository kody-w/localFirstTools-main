<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phantom Recess</title>
    <meta name="description" content="An abandoned playground soundscape where cursor movements summon ghost sounds of children who once played here">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(to bottom, #2d1b4e 0%, #1a1a2e 30%, #0d0d1a 100%);
            min-height: 100vh;
            overflow: hidden;
            font-family: 'Georgia', serif;
            cursor: none;
        }
        #scene {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(to bottom, #1a2a1a 0%, #0d150d 100%);
        }
        .equipment {
            position: absolute;
            cursor: none;
            transition: filter 0.5s;
        }
        .equipment:hover {
            filter: brightness(1.3) drop-shadow(0 0 20px rgba(200, 180, 255, 0.4));
        }
        .swing-set {
            bottom: 30%;
            left: 20%;
            width: 200px;
            height: 180px;
        }
        .merry-go-round {
            bottom: 28%;
            right: 25%;
            width: 150px;
            height: 80px;
        }
        .sandbox {
            bottom: 30%;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 60px;
        }
        .slide {
            bottom: 30%;
            right: 10%;
            width: 100px;
            height: 160px;
        }
        .ghost-cursor {
            position: fixed;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            pointer-events: none;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }
        .memory-text {
            position: fixed;
            color: rgba(200, 180, 255, 0.6);
            font-style: italic;
            font-size: 14px;
            pointer-events: none;
            animation: fadeMemory 4s forwards;
            z-index: 100;
        }
        @keyframes fadeMemory {
            0% { opacity: 0; transform: translateY(0); }
            20% { opacity: 0.8; }
            100% { opacity: 0; transform: translateY(-30px); }
        }
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70%;
            pointer-events: none;
        }
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        .instruction {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(200, 180, 255, 0.5);
            font-size: 14px;
            text-align: center;
        }
        .moon {
            position: absolute;
            top: 10%;
            right: 15%;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, #fffde7 0%, #e8e4c9 50%, #c9c5b0 100%);
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(255, 253, 231, 0.4);
        }
        svg { overflow: visible; }
        .sound-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            color: rgba(200, 180, 255, 0.6);
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="scene">
        <div class="stars" id="stars"></div>
        <div class="moon"></div>
        
        <!-- Swing Set -->
        <div class="equipment swing-set" id="swings" data-sound="swings">
            <svg width="200" height="180" viewBox="0 0 200 180">
                <rect x="10" y="0" width="8" height="150" fill="#4a3728"/>
                <rect x="182" y="0" width="8" height="150" fill="#4a3728"/>
                <rect x="0" y="0" width="200" height="10" fill="#5c4633"/>
                <!-- Swing 1 -->
                <line x1="50" y1="10" x2="40" y2="120" stroke="#666" stroke-width="2" id="chain1a"/>
                <line x1="70" y1="10" x2="80" y2="120" stroke="#666" stroke-width="2" id="chain1b"/>
                <rect x="35" y="120" width="50" height="8" fill="#3a2a1a" rx="2" id="seat1"/>
                <!-- Swing 2 -->
                <line x1="130" y1="10" x2="120" y2="130" stroke="#666" stroke-width="2" id="chain2a"/>
                <line x1="150" y1="10" x2="160" y2="130" stroke="#666" stroke-width="2" id="chain2b"/>
                <rect x="115" y="130" width="50" height="8" fill="#3a2a1a" rx="2" id="seat2"/>
            </svg>
        </div>
        
        <!-- Merry-go-round -->
        <div class="equipment merry-go-round" id="merryGoRound" data-sound="merry">
            <svg width="150" height="80" viewBox="0 0 150 80">
                <ellipse cx="75" cy="60" rx="70" ry="15" fill="#8b4513" opacity="0.3"/>
                <circle cx="75" cy="40" r="5" fill="#666"/>
                <ellipse cx="75" cy="50" rx="60" ry="20" fill="#c41e3a" id="merryPlatform"/>
                <circle cx="75" cy="50" r="8" fill="#666"/>
                <rect x="20" y="45" width="110" height="4" fill="#a00" rx="2"/>
                <rect x="73" y="20" width="4" height="30" fill="#666"/>
            </svg>
        </div>
        
        <!-- Sandbox -->
        <div class="equipment sandbox" id="sandbox" data-sound="sandbox">
            <svg width="180" height="60" viewBox="0 0 180 60">
                <rect x="0" y="20" width="180" height="40" fill="#8b7355"/>
                <rect x="5" y="25" width="170" height="30" fill="#e6d5a8"/>
                <circle cx="40" cy="40" r="8" fill="#d4c494"/>
                <circle cx="100" cy="38" r="10" fill="#d4c494"/>
                <path d="M130 45 L145 45 L140 35 Z" fill="#d4c494"/>
            </svg>
        </div>
        
        <!-- Slide -->
        <div class="equipment slide" id="slide" data-sound="slide">
            <svg width="100" height="160" viewBox="0 0 100 160">
                <rect x="10" y="0" width="8" height="120" fill="#4a3728"/>
                <rect x="82" y="60" width="8" height="60" fill="#4a3728"/>
                <path d="M20 20 Q50 20 70 80 Q85 130 85 150" stroke="#888" stroke-width="15" fill="none" stroke-linecap="round"/>
                <rect x="5" y="15" width="30" height="20" fill="#5c4633"/>
            </svg>
        </div>
        
        <div class="ground"></div>
    </div>
    
    <div class="ghost-cursor" id="cursor"></div>
    <div class="instruction">Hover over the playground equipment to hear the echoes of children past</div>
    <div class="sound-indicator" id="soundIndicator">Click to enable sound</div>

    <script>
        const cursor = document.getElementById('cursor');
        const scene = document.getElementById('scene');
        let audioEnabled = false;
        let audioCtx = null;
        
        // Ghost memories
        const memories = {
            swings: [
                "Higher! Push me higher!",
                "I can touch the sky!",
                "Watch me, mommy!",
                "One more minute, please?",
                "I'm flying!"
            ],
            merry: [
                "Faster! Faster!",
                "I'm getting dizzy!",
                "Hold on tight!",
                "Wheeeee!",
                "Don't let go!"
            ],
            sandbox: [
                "This is my castle",
                "Want to help me dig?",
                "Look what I found!",
                "It's almost done",
                "Let's build a moat"
            ],
            slide: [
                "Watch me go!",
                "It's so fast!",
                "Again! Again!",
                "I'm not scared",
                "Catch me at the bottom!"
            ]
        };
        
        // Create stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
            star.style.animationDelay = Math.random() * 2 + 's';
            starsContainer.appendChild(star);
        }
        
        // Audio system
        function initAudio() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        
        function playGhostSound(type, intensity) {
            if (!audioEnabled || !audioCtx) return;
            
            const now = audioCtx.currentTime;
            
            if (type === 'swings') {
                // Creaking chain sounds
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(80 + Math.random() * 40, now);
                osc.frequency.linearRampToValueAtTime(60 + Math.random() * 30, now + 0.3);
                
                filter.type = 'bandpass';
                filter.frequency.value = 800;
                filter.Q.value = 5;
                
                gain.gain.setValueAtTime(0, now);
                gain.gain.linearRampToValueAtTime(intensity * 0.1, now + 0.05);
                gain.gain.linearRampToValueAtTime(0, now + 0.5);
                
                osc.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                
                osc.start(now);
                osc.stop(now + 0.5);
            } else if (type === 'merry') {
                // Spinning metallic sound
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                
                osc.type = 'sine';
                osc.frequency.setValueAtTime(300, now);
                osc.frequency.linearRampToValueAtTime(500, now + 0.2);
                osc.frequency.linearRampToValueAtTime(300, now + 0.4);
                
                gain.gain.setValueAtTime(intensity * 0.05, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.4);
                
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                
                osc.start(now);
                osc.stop(now + 0.4);
            } else if (type === 'sandbox') {
                // Soft sandy rustling
                const bufferSize = audioCtx.sampleRate * 0.3;
                const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
                const data = buffer.getChannelData(0);
                
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.1;
                }
                
                const source = audioCtx.createBufferSource();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                
                source.buffer = buffer;
                filter.type = 'lowpass';
                filter.frequency.value = 2000;
                
                gain.gain.setValueAtTime(intensity * 0.2, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
                
                source.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                
                source.start(now);
            } else if (type === 'slide') {
                // Whooshing slide sound
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, now);
                osc.frequency.exponentialRampToValueAtTime(200, now + 0.5);
                
                filter.type = 'lowpass';
                filter.frequency.value = 1500;
                
                gain.gain.setValueAtTime(0, now);
                gain.gain.linearRampToValueAtTime(intensity * 0.08, now + 0.1);
                gain.gain.linearRampToValueAtTime(0, now + 0.5);
                
                osc.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                
                osc.start(now);
                osc.stop(now + 0.5);
            }
            
            // Play ghost laughter occasionally
            if (Math.random() < 0.1) {
                playGhostLaughter();
            }
        }
        
        function playGhostLaughter() {
            if (!audioCtx) return;
            
            const now = audioCtx.currentTime;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(400, now);
            
            // Laughter pattern
            for (let i = 0; i < 5; i++) {
                const t = now + i * 0.15;
                osc.frequency.setValueAtTime(400 + Math.random() * 200, t);
                gain.gain.setValueAtTime(0.03, t);
                gain.gain.linearRampToValueAtTime(0, t + 0.1);
            }
            
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            osc.start(now);
            osc.stop(now + 0.8);
        }
        
        // Track hover states
        let hoverTimes = {};
        let lastSoundTime = 0;
        
        // Cursor tracking
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        
        // Enable audio on click
        document.addEventListener('click', () => {
            if (!audioEnabled) {
                initAudio();
                audioEnabled = true;
                document.getElementById('soundIndicator').textContent = 'Sound enabled - listen closely...';
                setTimeout(() => {
                    document.getElementById('soundIndicator').style.opacity = '0';
                }, 2000);
            }
        });
        
        // Equipment interactions
        const equipment = document.querySelectorAll('.equipment');
        equipment.forEach(eq => {
            eq.addEventListener('mouseenter', () => {
                hoverTimes[eq.id] = Date.now();
            });
            
            eq.addEventListener('mousemove', (e) => {
                const soundType = eq.dataset.sound;
                const hoverDuration = (Date.now() - (hoverTimes[eq.id] || Date.now())) / 1000;
                const intensity = Math.min(hoverDuration / 3, 1);
                
                // Play sounds periodically
                if (Date.now() - lastSoundTime > 300) {
                    playGhostSound(soundType, intensity);
                    lastSoundTime = Date.now();
                }
                
                // Show memory text
                if (Math.random() < 0.02 && intensity > 0.3) {
                    showMemory(soundType, e.clientX, e.clientY);
                }
            });
            
            eq.addEventListener('mouseleave', () => {
                delete hoverTimes[eq.id];
            });
        });
        
        function showMemory(type, x, y) {
            const memoryList = memories[type];
            const text = memoryList[Math.floor(Math.random() * memoryList.length)];
            
            const memory = document.createElement('div');
            memory.className = 'memory-text';
            memory.textContent = text;
            memory.style.left = (x + (Math.random() - 0.5) * 100) + 'px';
            memory.style.top = (y - 30) + 'px';
            document.body.appendChild(memory);
            
            setTimeout(() => memory.remove(), 4000);
        }
        
        // Animate swing
        let swingAngle = 0;
        function animateSwing() {
            swingAngle += 0.03;
            const swing1 = Math.sin(swingAngle) * 15;
            const swing2 = Math.sin(swingAngle + 1) * 12;
            
            const chains1a = document.getElementById('chain1a');
            const chains1b = document.getElementById('chain1b');
            const seat1 = document.getElementById('seat1');
            
            if (chains1a) {
                chains1a.setAttribute('x2', 40 + swing1);
                chains1b.setAttribute('x2', 80 + swing1);
                seat1.setAttribute('x', 35 + swing1);
            }
            
            const chains2a = document.getElementById('chain2a');
            const chains2b = document.getElementById('chain2b');
            const seat2 = document.getElementById('seat2');
            
            if (chains2a) {
                chains2a.setAttribute('x2', 120 + swing2);
                chains2b.setAttribute('x2', 160 + swing2);
                seat2.setAttribute('x', 115 + swing2);
            }
            
            requestAnimationFrame(animateSwing);
        }
        
        // Animate merry-go-round
        let merryAngle = 0;
        function animateMerry() {
            merryAngle += 0.5;
            const platform = document.getElementById('merryPlatform');
            if (platform) {
                // Subtle rotation effect via opacity variation
                const opacity = 0.9 + Math.sin(merryAngle * 0.1) * 0.1;
                platform.style.opacity = opacity;
            }
            requestAnimationFrame(animateMerry);
        }
        
        animateSwing();
        animateMerry();
        
        // Wind ambience
        function playWindAmbience() {
            if (!audioEnabled || !audioCtx) {
                setTimeout(playWindAmbience, 1000);
                return;
            }
            
            const bufferSize = audioCtx.sampleRate * 2;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            
            for (let i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() * 2 - 1) * 0.02;
            }
            
            const source = audioCtx.createBufferSource();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            
            source.buffer = buffer;
            source.loop = false;
            
            filter.type = 'lowpass';
            filter.frequency.value = 400;
            
            gain.gain.value = 0.3;
            
            source.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);
            
            source.start();
            
            setTimeout(playWindAmbience, 2000);
        }
        
        setTimeout(playWindAmbience, 2000);
    </script>
</body>
</html>