{
  "console": "game-boy",
  "name": "Game Boy Collection",
  "year": 1989,
  "icon": "üü¢",
  "theme": { "bg": "#0f380f", "accent": "#9bbc0f", "font": "monospace" },
  "render": { "width": 160, "height": 144, "scanlines": true, "scanlineAlpha": 0.04 },
  "audio": { "type": "gameboy", "channels": 4 },
  "games": [
    {
      "id": "block-drop",
      "name": "Block Drop",
      "icon": "üü©",
      "desc": "Falling blocks ‚Äî clear lines",
      "code": "var C0='#0f380f',C1='#306230',C2='#8bac0f',C3='#9bbc0f';if(mode==='init'){G.grid=[];for(var r=0;r<20;r++){G.grid[r]=[];for(var c=0;c<10;c++)G.grid[r][c]=0}G.pieces=[[[[1,1],[1,1]]],[[[1,1,1,1]],[[1],[1],[1],[1]]],[[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]],[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]]],[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]],[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],[[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]],[[0,1],[0,1],[1,1]]],[[[0,0,1],[1,1,1]],[[1,0],[1,0],[1,1]],[[1,1,1],[1,0,0]],[[1,1],[0,1],[0,1]]]];G.cx=3;G.cy=0;G.cr=0;G.cp=Math.floor(Math.random()*7);G.np=Math.floor(Math.random()*7);G.tick=0;G.speed=30;G.score=0;G.lines=0;G.level=1;G.over=false;G.das=0;}\nif(mode==='update'){if(G.over)return;function shape(){return G.pieces[G.cp][G.cr%G.pieces[G.cp].length]}function fits(px,py,pr){var s=G.pieces[G.cp][pr%G.pieces[G.cp].length];for(var r=0;r<s.length;r++)for(var c=0;c<s[r].length;c++){if(s[r][c]){var nr=py+r,nc=px+c;if(nc<0||nc>=10||nr>=20)return false;if(nr>=0&&G.grid[nr][nc])return false}}return true}if(K('a')||K('ArrowLeft')){G.das++;if(G.das===1||G.das>8){if(fits(G.cx-1,G.cy,G.cr)){G.cx--;snd.tone(800,.01,.03)}}}else if(K('d')||K('ArrowRight')){G.das++;if(G.das===1||G.das>8){if(fits(G.cx+1,G.cy,G.cr)){G.cx++;snd.tone(800,.01,.03)}}}else G.das=0;if((K('w')||K('ArrowUp'))&&!G._rotated){var nr=(G.cr+1)%G.pieces[G.cp].length;if(fits(G.cx,G.cy,nr)){G.cr=nr;snd.tone(600,.02,.03)}G._rotated=true}if(!K('w')&&!K('ArrowUp'))G._rotated=false;var fast=K('s')||K('ArrowDown');G.tick++;if(G.tick>=(fast?2:G.speed)){G.tick=0;if(fits(G.cx,G.cy+1,G.cr)){G.cy++}else{var s=shape();for(var r=0;r<s.length;r++)for(var c=0;c<s[r].length;c++){if(s[r][c]&&G.cy+r>=0)G.grid[G.cy+r][G.cx+c]=G.cp+1}var cleared=0;for(var r=19;r>=0;r--){var full=true;for(var c=0;c<10;c++)if(!G.grid[r][c])full=false;if(full){G.grid.splice(r,1);G.grid.unshift([0,0,0,0,0,0,0,0,0,0]);cleared++;r++}}if(cleared>0){G.lines+=cleared;G.score+=cleared*cleared*100*G.level;G.level=Math.floor(G.lines/10)+1;G.speed=Math.max(3,30-G.level*2);snd.score()}else{snd.tone(200,.03,.04)}G.cp=G.np;G.np=Math.floor(Math.random()*7);G.cx=3;G.cy=0;G.cr=0;if(!fits(G.cx,G.cy,G.cr)){G.over=true;snd.die()}}}}\nif(mode==='draw'){cls(C0);var ox=30,oy=2,cs=7;rect(ox-1,oy-1,cs*10+2,cs*20+2,C1);for(var r=0;r<20;r++)for(var c=0;c<10;c++){var v=G.grid[r][c];O.fillStyle=v?C3:C0;O.fillRect(ox+c*cs,oy+r*cs,cs-1,cs-1)}if(!G.over){var s=G.pieces[G.cp][G.cr%G.pieces[G.cp].length];for(var r=0;r<s.length;r++)for(var c=0;c<s[r].length;c++){if(s[r][c]){O.fillStyle=C2;O.fillRect(ox+(G.cx+c)*cs,oy+(G.cy+r)*cs,cs-1,cs-1)}}}txt('NEXT',ox+cs*10+14,oy+4,5,C2);var ns=G.pieces[G.np][0];for(var r=0;r<ns.length;r++)for(var c=0;c<ns[r].length;c++){if(ns[r][c]){O.fillStyle=C3;O.fillRect(ox+cs*10+10+c*5,oy+14+r*5,4,4)}}txt('SCORE',ox+cs*10+14,oy+40,5,C2);txt(String(G.score),ox+cs*10+14,oy+50,5,C3);txt('LINES',ox+cs*10+14,oy+64,5,C2);txt(String(G.lines),ox+cs*10+14,oy+74,5,C3);txt('LVL '+G.level,ox+cs*10+14,oy+90,5,C3);if(G.over)txt('GAME OVER',RW/2,RH/2,8,C3);hud('SCORE: '+G.score+' ¬∑ LINES: '+G.lines+' ¬∑ LVL '+G.level);controls('A/D or ‚Üê/‚Üí Move ¬∑ W/‚Üë Rotate ¬∑ S/‚Üì Fast drop')}"
    },
    {
      "id": "pocket-world",
      "name": "Pocket World",
      "icon": "‚öîÔ∏è",
      "desc": "Turn-based creature battles",
      "code": "var C0='#0f380f',C1='#306230',C2='#8bac0f',C3='#9bbc0f';if(mode==='init'){var types=['Flamox','Aquara','Leafix','Voltik','Shadowl'];var tcolors=[C3,C2,C3,C2,C1];G.team=[{name:'Flamox',hp:30,maxHp:30,atk:8,type:0,moves:['Ember','Tackle']},{name:'Leafix',hp:35,maxHp:35,atk:6,type:2,moves:['Vine','Tackle']}];G.enemy={name:types[Math.floor(Math.random()*5)],hp:25,maxHp:25,atk:7,type:Math.floor(Math.random()*5),moves:['Strike','Bite']};G.cur=0;G.phase='choose';G.msg='';G.msgTimer=0;G.caught=[];G.battles=0;G.sel=0;G.balls=3;}\nif(mode==='update'){if(G.msgTimer>0){G.msgTimer--;if(G.msgTimer===0){if(G.enemy.hp<=0||G.team[G.cur].hp<=0){if(G.enemy.hp<=0){G.battles++;G.msg=G.enemy.name+' defeated!';G.msgTimer=40;var types=['Flamox','Aquara','Leafix','Voltik','Shadowl'];G.enemy={name:types[Math.floor(Math.random()*5)],hp:25+G.battles*3,maxHp:25+G.battles*3,atk:7+G.battles,type:Math.floor(Math.random()*5),moves:['Strike','Bite']};G.team[G.cur].hp=Math.min(G.team[G.cur].maxHp,G.team[G.cur].hp+5)}if(G.team[G.cur].hp<=0){if(G.cur<G.team.length-1){G.cur++;G.msg='Go, '+G.team[G.cur].name+'!';G.msgTimer=30}else G.msg='All fainted! Game Over'}}G.phase='choose';G.sel=0}return}if(G.phase==='choose'){if(K('w')||K('ArrowUp')){if(!G._mv){G.sel=Math.max(0,G.sel-1);snd.tone(800,.01,.03);G._mv=true}}else if(K('s')||K('ArrowDown')){if(!G._mv){G.sel=Math.min(2,G.sel);snd.tone(800,.01,.03);G._mv=true}}else G._mv=false;if(K(' ')||K('Enter')){if(!G._sel){G._sel=true;if(G.sel<=1){var me=G.team[G.cur];var dmg=Math.max(1,me.atk+Math.floor(Math.random()*4)-2);var eff=G.sel===0?1.2:1;dmg=Math.floor(dmg*eff);G.enemy.hp=Math.max(0,G.enemy.hp-dmg);G.msg=me.name+' used '+(G.sel===0?me.moves[0]:me.moves[1])+'! -'+dmg;snd.hit();G.phase='enemy';G.msgTimer=30}else if(G.balls>0){G.balls--;var chance=.3+(1-G.enemy.hp/G.enemy.maxHp)*.5;if(Math.random()<chance){G.caught.push(G.enemy.name);G.msg='Caught '+G.enemy.name+'!';snd.win();var types=['Flamox','Aquara','Leafix','Voltik','Shadowl'];G.enemy={name:types[Math.floor(Math.random()*5)],hp:25+G.battles*3,maxHp:25+G.battles*3,atk:7+G.battles,type:Math.floor(Math.random()*5),moves:['Strike','Bite']};G.msgTimer=40;G.phase='choose'}else{G.msg='It escaped!';snd.tone(200,.1,.06,'sawtooth');G.phase='enemy';G.msgTimer=20}}}}else G._sel=false}else if(G.phase==='enemy'){if(G.msgTimer===0){var dmg2=Math.max(1,G.enemy.atk+Math.floor(Math.random()*3)-1);G.team[G.cur].hp=Math.max(0,G.team[G.cur].hp-dmg2);G.msg=G.enemy.name+' used '+G.enemy.moves[Math.floor(Math.random()*2)]+'! -'+dmg2;snd.tone(150,.06,.06,'sawtooth');G.phase='choose';G.msgTimer=30}}}\nif(mode==='draw'){cls(C0);var me=G.team[G.cur],en=G.enemy;rect(10,90,30,20,C2);txt(me.name,25,86,5,C3);rect(10,82,Math.floor(30*(me.hp/me.maxHp)),3,C3);txt(me.hp+'/'+me.maxHp,25,78,4,C2);rect(110,20,30,20,C1);txt(en.name,125,16,5,C3);rect(110,12,Math.floor(30*(en.hp/en.maxHp)),3,en.hp>en.maxHp*.3?C3:C2);txt(en.hp+'/'+en.maxHp,125,8,4,C2);rect(5,115,RW-10,27,C1);if(G.msgTimer>0){txt(G.msg,RW/2,128,5,C3)}else{var opts=[me.moves[0],me.moves[1],'Ball('+G.balls+')'];for(var i=0;i<opts.length;i++){txt((G.sel===i?'> ':'')+opts[i],40,120+i*8,5,G.sel===i?C3:C2)}}txt('Caught: '+G.caught.length,RW-10,RH-6,4,C2,'right');hud(me.name+' HP:'+me.hp+'/'+me.maxHp+' vs '+en.name+' HP:'+en.hp+'/'+en.maxHp);controls('W/S Select ¬∑ Space/Enter Confirm ¬∑ Catch creatures!')}"
    },
    {
      "id": "link-land",
      "name": "Link Land",
      "icon": "üó°Ô∏è",
      "desc": "Top-down adventure, sword & puzzles",
      "code": "var C0='#0f380f',C1='#306230',C2='#8bac0f',C3='#9bbc0f';if(mode==='init'){G.px=80;G.py=72;G.dir=1;G.hp=6;G.maxHp=6;G.atk=0;G.keys=0;G.screen=0;G.score=0;G.rooms=[];for(var s=0;s<8;s++){var en=[];for(var i=0;i<2+s;i++)en.push({x:30+Math.random()*100,y:20+Math.random()*90,vx:(Math.random()-.5)*1.2,vy:(Math.random()-.5)*1.2,hp:1+Math.floor(s/3),alive:true});var walls=[];for(var i=0;i<3;i++)walls.push({x:20+Math.random()*120,y:20+Math.random()*100,w:10+Math.random()*20,h:6+Math.random()*10});var hasKey=s%3===2;G.rooms.push({enemies:en,walls:walls,key:hasKey?{x:80,y:60,got:false}:null,door:s<7?{x:70,y:0,w:20,locked:s%3===2}:null})}G.iframes=0;}\nif(mode==='update'){var room=G.rooms[G.screen];var spd=1.8;G.iframes--;if(K('a')||K('ArrowLeft')){G.px-=spd;G.dir=2}if(K('d')||K('ArrowRight')){G.px+=spd;G.dir=0}if(K('w')||K('ArrowUp')){G.py-=spd;G.dir=3}if(K('s')||K('ArrowDown')){G.py+=spd;G.dir=1}G.px=Math.max(6,Math.min(RW-6,G.px));G.py=Math.max(12,Math.min(RH-6,G.py));room.walls.forEach(function(w){if(G.px+4>w.x&&G.px-4<w.x+w.w&&G.py+4>w.y&&G.py-4<w.y+w.h){if(G.dir===0)G.px=w.x-4;if(G.dir===2)G.px=w.x+w.w+4;if(G.dir===1)G.py=w.y-4;if(G.dir===3)G.py=w.y+w.h+4}});if((K(' ')||K('Enter'))&&G.atk<=0){G.atk=8;snd.tone(400,.03,.04)}G.atk--;var dx=[10,0,-10,0][G.dir],dy=[0,10,0,-10][G.dir],ax=G.px+dx,ay=G.py+dy;room.enemies.forEach(function(e){if(!e.alive)return;e.x+=e.vx;e.y+=e.vy;if(e.x<8||e.x>RW-8)e.vx*=-1;if(e.y<12||e.y>RH-8)e.vy*=-1;if(G.atk>3&&Math.abs(ax-e.x)<10&&Math.abs(ay-e.y)<10){e.hp--;snd.hit();if(e.hp<=0){e.alive=false;G.score+=25}}if(G.iframes<=0&&Math.abs(e.x-G.px)<8&&Math.abs(e.y-G.py)<8){G.hp--;G.iframes=20;snd.tone(150,.06,.04,'sawtooth')}});if(room.key&&!room.key.got&&Math.abs(G.px-room.key.x)<8&&Math.abs(G.py-room.key.y)<8){room.key.got=true;G.keys++;snd.pickup()}if(room.door&&G.py<8){var allDead=room.enemies.every(function(e){return!e.alive});if(allDead&&(!room.door.locked||G.keys>0)){if(room.door.locked)G.keys--;G.screen++;G.py=RH-12;snd.tone(440,.06,.05);if(G.screen>=G.rooms.length){snd.win()}}}}\nif(mode==='draw'){cls(C0);var room=G.rooms[Math.min(G.screen,G.rooms.length-1)];rect(0,0,RW,8,C1);rect(0,RH-4,RW,4,C1);rect(0,0,4,RH,C1);rect(RW-4,0,4,RH,C1);room.walls.forEach(function(w){rect(w.x,w.y,w.w,w.h,C1)});if(room.door){var allDead=room.enemies.every(function(e){return!e.alive});rect(room.door.x,0,room.door.w,8,allDead?C0:C1);if(room.door.locked&&!allDead)txt('X',room.door.x+room.door.w/2,4,5,C2)}if(room.key&&!room.key.got){rect(room.key.x-3,room.key.y-3,6,6,C3);txt('K',room.key.x,room.key.y,4,C0)}room.enemies.forEach(function(e){if(!e.alive)return;rect(e.x-4,e.y-4,8,8,C2);rect(e.x-2,e.y-2,2,2,C3);rect(e.x+1,e.y-2,2,2,C3)});var blink=G.iframes>0&&G.iframes%3<1;if(!blink){rect(G.px-4,G.py-4,8,10,C3);rect(G.px-2,G.py-6,4,3,C2)}if(G.atk>3){rect(G.px+dx-2,G.py+dy-4,4,8,C3)}for(var i=0;i<G.maxHp/2;i++){var full=G.hp>=(i+1)*2;txt(full?'‚ô•':'‚ô°',6+i*10,RH-10,5,full?C3:C1,'left')}txt('S:'+G.screen,RW/2,RH-10,4,C2);txt('K:'+G.keys,RW-10,RH-10,4,C3,'right');if(G.screen>=G.rooms.length)txt('YOU WIN!',RW/2,RH/2,10,C3);if(G.hp<=0)txt('GAME OVER',RW/2,RH/2,8,C3);hud('HP:'+G.hp+' ¬∑ ROOM:'+(G.screen+1)+'/'+G.rooms.length+' ¬∑ KEYS:'+G.keys);controls('WASD/Arrows Move ¬∑ Space/Enter Sword ¬∑ Clear enemies ‚Üí go north')}"
    },
    {
      "id": "warp-zone",
      "name": "Warp Zone",
      "icon": "üåÄ",
      "desc": "Inhale enemies, copy powers",
      "code": "var C0='#0f380f',C1='#306230',C2='#8bac0f',C3='#9bbc0f';if(mode==='init'){G.px=20;G.py=RH-28;G.vy=0;G.ground=true;G.score=0;G.hp=4;G.dead=false;G.scroll=0;G.power='none';G.inhale=0;G.floating=false;G.plats=[];G.enemies=[];for(var i=0;i<50;i++){G.plats.push({x:i*30,y:RH-12,w:30,h:12});if(Math.random()<.35)G.plats.push({x:i*30,y:RH-40-Math.random()*30,w:25,h:6});if(i>2&&Math.random()<.2){var t=Math.floor(Math.random()*3);G.enemies.push({x:i*30+10,y:RH-26,vx:-.4,alive:true,type:t})}}}\nif(mode==='update'){if(G.dead)return;var spd=1.6;if(K('d')||K('ArrowRight'))G.px+=spd;if(K('a')||K('ArrowLeft'))G.px-=spd;if(G.px>60){G.scroll+=G.px-60;G.px=60}if((K('w')||K('ArrowUp'))&&G.ground){G.vy=-4.5;G.ground=false;G.floating=false;snd.jump()}if(K('w')||K('ArrowUp')){if(!G.ground&&G.vy>0){G.vy*=.85;G.floating=true}}G.vy+=.2;G.py+=G.vy;G.ground=false;var wx=G.px+G.scroll;G.plats.forEach(function(p){if(wx+5>p.x&&wx-5<p.x+p.w&&G.py+12>=p.y&&G.py+12-G.vy<=p.y+3&&G.vy>=0){G.py=p.y-12;G.vy=0;G.ground=true}});if(K(' ')||K('Enter')){if(G.power==='fire'&&G.inhale===0){G.inhale=-1;snd.shoot()}else if(G.power==='none'){G.inhale=Math.min(10,G.inhale+1)}}else{if(G.inhale>0&&G.power==='none')G.inhale=0}G.enemies=G.enemies.filter(function(e){if(!e.alive)return false;e.x+=e.vx;if(G.inhale>5&&Math.abs(wx+15-e.x)<25&&Math.abs(G.py-e.y)<15){e.alive=false;G.power=['fire','ice','spike'][e.type];G.score+=50;snd.pickup();return false}if(G.inhale===-1&&Math.abs(wx+15-e.x)<20&&Math.abs(G.py-e.y)<12){e.alive=false;G.score+=30;snd.hit();return false}if(Math.abs(wx-e.x)<7&&Math.abs(G.py-e.y)<12){G.hp--;snd.tone(150,.06,.04,'sawtooth');if(G.hp<=0)G.dead=true;e.vx*=-1}return true});if(G.inhale===-1)G.inhale=0;if(G.py>RH+20){G.dead=true;snd.die()}}\nif(mode==='draw'){cls(C0);G.plats.forEach(function(p){var sx=p.x-G.scroll;if(sx<-40||sx>RW+10)return;rect(sx,p.y,p.w,p.h,p.h>8?C1:C2)});G.enemies.forEach(function(e){if(!e.alive)return;var sx=e.x-G.scroll;if(sx<-20||sx>RW+20)return;var cols=[C3,C2,C1];rect(sx-5,e.y-5,10,10,cols[e.type]);txt(['F','I','S'][e.type],sx,e.y,5,C0)});if(!G.dead){rect(G.px-5,G.py-5,10,12,C3);rect(G.px-3,G.py-7,6,4,C2);if(G.inhale>3){O.strokeStyle=C2;O.lineWidth=1;O.beginPath();O.arc(G.px+10,G.py,G.inhale*2,-.5,.5);O.stroke()}if(G.floating){rect(G.px-6,G.py+8,3,3,C2);rect(G.px+3,G.py+8,3,3,C2)}}if(G.power!=='none')txt('PWR:'+G.power.toUpperCase(),RW/2,6,5,C3);for(var i=0;i<G.hp;i++)txt('‚ô•',6+i*9,RH-8,5,C3,'left');txt(String(G.score),RW-4,6,5,C3,'right');if(G.dead)txt('GAME OVER',RW/2,RH/2,8,C3);hud('HP:'+G.hp+' ¬∑ POWER:'+G.power.toUpperCase()+' ¬∑ SCORE:'+G.score);controls('A/D Move ¬∑ W Jump (hold to float) ¬∑ Space Inhale/Use power')}"
    },
    {
      "id": "kart-sprint",
      "name": "Kart Sprint GB",
      "icon": "üèéÔ∏è",
      "desc": "Top-down racer, 3 laps",
      "code": "var C0='#0f380f',C1='#306230',C2='#8bac0f',C3='#9bbc0f';if(mode==='init'){G.px=RW/2;G.py=RH/2+40;G.angle=-Math.PI/2;G.spd=0;G.lap=0;G.cp=0;G.timer=0;G.cx=RW/2;G.cy=RH/2;G.rx=60;G.ry=50;G.tw=20;G.best=Infinity;G.ai={x:RW/2+5,y:RH/2+40,angle:-Math.PI/2,spd:0,lap:0,cp:0};}\nif(mode==='update'){var accel=.04,maxS=2.2,fric=.97,turn=.05;if(K('w')||K('ArrowUp'))G.spd=Math.min(maxS,G.spd+accel);if(K('s')||K('ArrowDown'))G.spd=Math.max(-.5,G.spd-accel*.5);if(K('a')||K('ArrowLeft'))G.angle-=turn*(G.spd>0?1:-1);if(K('d')||K('ArrowRight'))G.angle+=turn*(G.spd>0?1:-1);var dx=(G.px-G.cx)/G.rx,dy=(G.py-G.cy)/G.ry,dist=Math.sqrt(dx*dx+dy*dy);var onTrack=dist>.45&&dist<1.35;G.spd*=onTrack?fric:fric*.85;G.px+=Math.cos(G.angle)*G.spd;G.py+=Math.sin(G.angle)*G.spd;G.px=Math.max(4,Math.min(RW-4,G.px));G.py=Math.max(4,Math.min(RH-4,G.py));var ta=Math.atan2(G.py-G.cy,G.px-G.cx);var cpi=Math.floor(((ta+Math.PI)/(Math.PI*2))*4)%4;if(cpi===(G.cp+1)%4){G.cp=cpi;if(cpi===0){G.lap++;snd.tone(660,.06,.06);snd.tone(880,.06,.06);if(G.lap>=3)snd.win()}}G.timer++;var ai=G.ai;var ata=Math.atan2(ai.y-G.cy,ai.x-G.cx)+Math.PI/2+.15;var adiff=ata-ai.angle;while(adiff>Math.PI)adiff-=Math.PI*2;while(adiff<-Math.PI)adiff+=Math.PI*2;if(adiff<-.05)ai.angle-=turn;if(adiff>.05)ai.angle+=turn;ai.spd=Math.min(maxS*.85,ai.spd+accel*.9);var adx2=(ai.x-G.cx)/G.rx,ady2=(ai.y-G.cy)/G.ry,ad2=Math.sqrt(adx2*adx2+ady2*ady2);ai.spd*=ad2>.45&&ad2<1.35?fric:fric*.85;ai.x+=Math.cos(ai.angle)*ai.spd;ai.y+=Math.sin(ai.angle)*ai.spd;var ata2=Math.atan2(ai.y-G.cy,ai.x-G.cx);var acp=Math.floor(((ata2+Math.PI)/(Math.PI*2))*4)%4;if(acp===(ai.cp+1)%4){ai.cp=acp;if(acp===0)ai.lap++}}\nif(mode==='draw'){cls(C0);O.strokeStyle=C1;O.lineWidth=G.tw;O.beginPath();O.ellipse(G.cx,G.cy,G.rx,G.ry,0,0,Math.PI*2);O.stroke();O.strokeStyle=C2;O.lineWidth=1;O.setLineDash([3,3]);O.beginPath();O.ellipse(G.cx,G.cy,G.rx,G.ry,0,0,Math.PI*2);O.stroke();O.setLineDash([]);rect(G.cx-1,G.cy+G.ry-G.tw/2,2,G.tw,C3);var drawKart=function(kx,ky,ka,c){O.save();O.translate(kx,ky);O.rotate(ka);rect(-4,-3,8,6,c);rect(3,-1,3,2,C3);O.restore()};drawKart(G.px,G.py,G.angle,C3);drawKart(G.ai.x,G.ai.y,G.ai.angle,C1);txt('LAP '+(Math.min(3,G.lap+1))+'/3',8,8,5,C3,'left');txt('AI LAP '+(Math.min(3,G.ai.lap+1)),RW-4,8,5,C2,'right');var secs=(G.timer/60).toFixed(1);txt(secs+'s',RW/2,8,5,C3);if(G.lap>=3)txt('FINISH!',RW/2,RH/2,10,C3);if(G.ai.lap>=3&&G.lap<3)txt('AI WINS',RW/2,RH/2,10,C1);hud('LAP '+(Math.min(3,G.lap+1))+'/3 ¬∑ TIME: '+secs+'s');controls('W/‚Üë Gas ¬∑ S/‚Üì Brake ¬∑ A/D or ‚Üê/‚Üí Steer ¬∑ 3 Laps!')}"
    }
  ]
}
