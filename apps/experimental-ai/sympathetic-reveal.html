<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sympathetic Reveal</title>
    <meta name="description" content="Hidden messages appear when warmed by your cursor's presence, like sympathetic ink revealing secrets through gentle heat">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0f0d08; min-height: 100vh; font-family: 'Georgia', serif; color: #a09080; overflow: hidden; }
        #canvas { position: fixed; top: 0; left: 0; cursor: none; }
        #controls {
            position: fixed; top: 20px; left: 20px; background: rgba(15,13,8,0.95);
            padding: 20px; border-radius: 10px; border: 1px solid rgba(180,140,80,0.3);
            z-index: 100;
        }
        h3 { margin-bottom: 15px; color: #c0a070; font-weight: normal; }
        .control-row { margin: 10px 0; }
        label { display: block; font-size: 11px; margin-bottom: 5px; opacity: 0.8; }
        input[type="range"] { width: 140px; }
        .value { float: right; color: #d0b080; font-size: 12px; }
        button {
            display: block; width: 100%; padding: 10px; margin: 6px 0;
            background: rgba(120,90,50,0.4); border: 1px solid rgba(180,140,80,0.4);
            color: #a08060; cursor: pointer; border-radius: 6px; font-family: inherit;
        }
        #stats { position: fixed; top: 20px; right: 20px; font-size: 12px; color: #806050; z-index: 100; text-align: right; }
        #info { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 12px; opacity: 0.5; z-index: 100; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="controls">
        <h3>Sympathetic Reveal</h3>
        <div class="control-row">
            <label>Heat Radius <span class="value" id="heat-val">80</span></label>
            <input type="range" id="heat" min="40" max="150" value="80">
        </div>
        <div class="control-row">
            <label>Reveal Speed <span class="value" id="reveal-val">60</span></label>
            <input type="range" id="reveal" min="20" max="100" value="60">
        </div>
        <button id="write-btn">Write Secret Message</button>
        <button id="cool-btn">Cool Down All</button>
        <button id="clear-btn">Clear Canvas</button>
    </div>
    <div id="stats">
        <div>Secrets: <span id="secret-count">0</span></div>
        <div>Revealed: <span id="revealed-pct">0</span>%</div>
    </div>
    <div id="info">Move your warmth over the parchment to reveal hidden secrets</div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let W, H;
        function resize() { W = canvas.width = innerWidth; H = canvas.height = innerHeight; initSecrets(); }
        
        let heatRadius = 80;
        let revealSpeed = 0.6;
        let time = 0;
        let mouseX = -100, mouseY = -100;
        
        const secrets = [];
        const heatMap = [];
        const particles = [];
        
        const SECRET_MESSAGES = [
            "Between the lines lies truth",
            "What is hidden shall be found",
            "Memory persists in silence",
            "The warmth reveals all",
            "Some secrets want to be known",
            "Light finds its way through",
            "Nothing stays buried forever",
            "Patience unveils mysteries",
            "Heat awakens dormant words",
            "The invisible becomes visible"
        ];
        
        class Secret {
            constructor(x, y, text) {
                this.x = x;
                this.y = y;
                this.text = text || SECRET_MESSAGES[Math.floor(Math.random() * SECRET_MESSAGES.length)];
                this.revealed = 0;
                this.temperature = 0;
                this.fontSize = 14 + Math.floor(Math.random() * 8);
                this.rotation = (Math.random() - 0.5) * 0.2;
                this.chars = this.text.split('').map((char, i) => ({
                    char: char,
                    revealed: 0,
                    x: i * this.fontSize * 0.6,
                    y: 0
                }));
            }
            
            update(mx, my) {
                const dist = Math.hypot(this.x - mx, this.y - my);
                
                if (dist < heatRadius) {
                    const heat = 1 - (dist / heatRadius);
                    this.temperature = Math.min(1, this.temperature + heat * 0.02 * revealSpeed);
                } else {
                    this.temperature = Math.max(0, this.temperature - 0.005);
                }
                
                this.chars.forEach((char, i) => {
                    const charX = this.x + char.x;
                    const charDist = Math.hypot(charX - mx, this.y - my);
                    
                    if (charDist < heatRadius && this.temperature > 0.3) {
                        char.revealed = Math.min(1, char.revealed + 0.02 * revealSpeed * this.temperature);
                    }
                });
                
                this.revealed = this.chars.reduce((sum, c) => sum + c.revealed, 0) / this.chars.length;
                
                if (this.temperature > 0.5 && Math.random() < 0.05) {
                    particles.push({
                        x: this.x + Math.random() * this.text.length * this.fontSize * 0.6,
                        y: this.y,
                        vx: (Math.random() - 0.5) * 0.5,
                        vy: -Math.random() * 1,
                        size: 1 + Math.random() * 2,
                        life: 1,
                        hue: 30 + Math.random() * 20
                    });
                }
            }
            
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                
                ctx.font = this.fontSize + "px Georgia";
                
                this.chars.forEach((char, i) => {
                    if (char.revealed > 0.05) {
                        const alpha = char.revealed;
                        const glow = this.temperature * 0.3;
                        
                        if (glow > 0.1) {
                            ctx.shadowColor = "rgba(255, 200, 100, " + glow + ")";
                            ctx.shadowBlur = 10;
                        }
                        
                        const hue = 35 + char.revealed * 10;
                        const lightness = 30 + char.revealed * 30;
                        ctx.fillStyle = "hsla(" + hue + ", 50%, " + lightness + "%, " + alpha + ")";
                        ctx.fillText(char.char, char.x, char.y);
                        
                        ctx.shadowBlur = 0;
                    }
                });
                
                ctx.restore();
            }
        }
        
        function initSecrets() {
            secrets.length = 0;
            const count = Math.floor((W * H) / 80000) + 3;
            
            for (let i = 0; i < count; i++) {
                secrets.push(new Secret(
                    100 + Math.random() * (W - 400),
                    100 + Math.random() * (H - 200)
                ));
            }
        }
        
        resize(); window.onresize = resize;
        
        function drawBackground() {
            const gradient = ctx.createRadialGradient(W/2, H/2, 0, W/2, H/2, Math.max(W, H) * 0.7);
            gradient.addColorStop(0, '#1a1610');
            gradient.addColorStop(1, '#0f0d08');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
            
            ctx.globalAlpha = 0.03;
            for (let i = 0; i < 50; i++) {
                const x = (i * 137) % W;
                const y = (i * 89) % H;
                const size = 100 + Math.sin(i) * 50;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fillStyle = '#2a2015';
                ctx.fill();
            }
            ctx.globalAlpha = 1;
        }
        
        function drawHeatCursor() {
            const gradient = ctx.createRadialGradient(mouseX, mouseY, 0, mouseX, mouseY, heatRadius);
            gradient.addColorStop(0, 'rgba(255, 180, 80, 0.15)');
            gradient.addColorStop(0.3, 'rgba(255, 150, 50, 0.08)');
            gradient.addColorStop(0.7, 'rgba(255, 100, 30, 0.03)');
            gradient.addColorStop(1, 'transparent');
            ctx.fillStyle = gradient;
            ctx.fillRect(mouseX - heatRadius, mouseY - heatRadius, heatRadius * 2, heatRadius * 2);
            
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 8, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255, 200, 100, 0.5)';
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 4, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255, 230, 180, 0.8)';
            ctx.fill();
        }
        
        function drawParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.02;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                    continue;
                }
                
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
                ctx.fillStyle = "hsla(" + p.hue + ", 60%, 60%, " + p.life + ")";
                ctx.fill();
            }
        }
        
        function updateStats() {
            document.getElementById('secret-count').textContent = secrets.length;
            
            let totalRevealed = 0;
            secrets.forEach(s => totalRevealed += s.revealed);
            const pct = secrets.length > 0 ? Math.floor((totalRevealed / secrets.length) * 100) : 0;
            document.getElementById('revealed-pct').textContent = pct;
        }
        
        function animate() {
            time += 0.016;
            
            drawBackground();
            
            secrets.forEach(s => {
                s.update(mouseX, mouseY);
                s.draw();
            });
            
            drawParticles();
            drawHeatCursor();
            updateStats();
            
            requestAnimationFrame(animate);
        }
        
        canvas.onmousemove = e => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        };
        
        canvas.onmouseleave = () => {
            mouseX = -100;
            mouseY = -100;
        };
        
        document.getElementById('heat').oninput = e => {
            heatRadius = parseInt(e.target.value);
            document.getElementById('heat-val').textContent = e.target.value;
        };
        
        document.getElementById('reveal').oninput = e => {
            revealSpeed = e.target.value / 100;
            document.getElementById('reveal-val').textContent = e.target.value;
        };
        
        document.getElementById('write-btn').onclick = () => {
            const msg = prompt("Write a secret message:");
            if (msg && msg.trim()) {
                secrets.push(new Secret(
                    100 + Math.random() * (W - 400),
                    100 + Math.random() * (H - 200),
                    msg.trim()
                ));
            }
        };
        
        document.getElementById('cool-btn').onclick = () => {
            secrets.forEach(s => {
                s.temperature = 0;
                s.chars.forEach(c => {
                    c.revealed = Math.max(0, c.revealed - 0.3);
                });
            });
        };
        
        document.getElementById('clear-btn').onclick = () => {
            secrets.length = 0;
            particles.length = 0;
            initSecrets();
        };
        
        animate();
    </script>
</body>
</html>