<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Dynamic Memory Explorer</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #4e2a8e;
        --primary-light: #6c5ce7;
        --primary-dark: #341f6b;
        --secondary-color: #00cec9;
        --accent-color: #fdcb6e;
        --text-color: #2d3436;
        --text-light: #636e72;
        --background-color: #f7f9fc;
        --card-bg: #fff;
        --card-border: #dfe6e9;
        --danger: #e74c3c;
        --success: #2ecc71;
        --warning: #f39c12;
        --info: #3498db;
        --memory-bg: #f8f4ff;
        --memory-border: #e4d7ff;
        --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
        --shadow-md: 0 4px 8px rgba(0,0,0,0.1);
        --shadow-lg: 0 10px 20px rgba(0,0,0,0.15);
        --transition: all 0.3s ease;
        --border-radius: 12px;
      }

      /* Dark mode colors */
      body.dark-mode {
        --primary-color: #6c5ce7;
        --primary-light: #a29bfe;
        --primary-dark: #4834d4;
        --secondary-color: #00cec9;
        --accent-color: #ffeaa7;
        --text-color: #f7f9fc;
        --text-light: #b2bec3;
        --background-color: #1e272e;
        --card-bg: #2d3436;
        --card-border: #636e72;
        --memory-bg: #2c2448;
        --memory-border: #4e2a8e;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Arial, sans-serif;
      }

      body {
        background-color: var(--background-color);
        color: var(--text-color);
        line-height: 1.6;
        transition: var(--transition);
        min-height: 100vh;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Modern Dashboard Header */
      header {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
        color: white;
        padding: 20px 0;
        box-shadow: var(--shadow-md);
        margin-bottom: 40px;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .app-title {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .app-title .logo {
        background-color: white;
        color: var(--primary-color);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        box-shadow: var(--shadow-sm);
      }

      .app-title .text {
        display: flex;
        flex-direction: column;
      }

      .app-title h1 {
        font-size: 24px;
        font-weight: 600;
        margin: 0;
      }

      .app-title .tagline {
        font-size: 14px;
        opacity: 0.9;
      }

      .controls {
        display: flex;
        gap: 12px;
      }

      .btn {
        background-color: white;
        color: var(--primary-color);
        border: none;
        padding: 10px 18px;
        border-radius: 50px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 600;
        transition: var(--transition);
        box-shadow: var(--shadow-sm);
      }

      .btn:hover {
        box-shadow: var(--shadow-md);
        transform: translateY(-2px);
      }

      .btn.primary {
        background-color: var(--primary-dark);
        color: white;
      }

      .btn.secondary {
        background-color: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .btn.accent {
        background-color: var(--accent-color);
        color: var(--text-color);
      }

      .btn.danger {
        background-color: var(--danger);
        color: white;
      }

      .btn.success {
        background-color: var(--success);
        color: white;
      }

      /* Dashboard Main Content */
      .dashboard {
        display: grid;
        grid-template-columns: 380px 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      /* Key Insights Panel */
      .insights-panel {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-md);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .panel-header {
        padding: 20px;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
        color: white;
      }

      .panel-header h2 {
        font-size: 18px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        padding: 20px;
      }

      .stat-card {
        background-color: var(--memory-bg);
        border-radius: 12px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        border: 1px solid var(--memory-border);
        transition: var(--transition);
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
      }

      .stat-value {
        font-size: 32px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 14px;
        color: var(--text-light);
      }

      .chart-container {
        padding: 20px;
        height: 200px;
        position: relative;
      }

      /* Memory List */
      .memory-list-container {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
      }

      .memory-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .memory-item {
        background-color: var(--memory-bg);
        border: 1px solid var(--memory-border);
        border-radius: 12px;
        padding: 15px;
        cursor: pointer;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .memory-item:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-md);
      }

      .memory-item.active {
        border-color: var(--primary-color);
        background-color: rgba(108, 92, 231, 0.1);
      }

      .memory-item.active::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 4px;
        background-color: var(--primary-color);
      }

      .memory-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }

      .memory-theme {
        font-weight: 600;
        font-size: 16px;
        color: var(--primary-color);
      }

      .memory-date {
        font-size: 12px;
        color: var(--text-light);
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .memory-date i {
        font-size: 12px;
      }

      .memory-preview {
        font-size: 14px;
        color: var(--text-light);
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .memory-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
      }

      .memory-mood {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 3px 8px;
        background-color: rgba(108, 92, 231, 0.1);
        border-radius: 20px;
        font-size: 12px;
        color: var(--primary-color);
      }

      /* Memory Detail Card */
      .memory-detail-card {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-md);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .detail-header {
        padding: 25px 30px;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
        color: white;
        position: relative;
      }

      .detail-header-content {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }

      .detail-title-container h2 {
        font-size: 22px;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .detail-subtitle {
        display: flex;
        gap: 15px;
        font-size: 14px;
        opacity: 0.9;
      }

      .detail-actions {
        display: flex;
        gap: 10px;
      }

      .detail-body {
        padding: 30px;
        flex: 1;
        overflow-y: auto;
      }

      .detail-empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 400px;
        color: var(--text-light);
        text-align: center;
        padding: 20px;
      }

      .detail-empty-state i {
        font-size: 80px;
        margin-bottom: 20px;
        color: var(--primary-light);
        opacity: 0.3;
      }

      .detail-empty-state h3 {
        font-size: 22px;
        margin-bottom: 10px;
        font-weight: 500;
      }

      .detail-empty-state p {
        max-width: 400px;
        font-size: 16px;
        line-height: 1.6;
      }

      .detail-content {
        display: none;
      }

      .detail-section {
        margin-bottom: 30px;
      }

      .detail-section-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .memory-content {
        background-color: var(--memory-bg);
        border: 1px solid var(--memory-border);
        border-radius: 12px;
        padding: 20px;
        font-size: 16px;
        line-height: 1.6;
        margin-bottom: 20px;
        white-space: pre-line;
      }

      .metadata-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 15px;
      }

      .metadata-item {
        background-color: var(--memory-bg);
        border: 1px solid var(--memory-border);
        border-radius: 10px;
        padding: 15px;
        transition: var(--transition);
      }

      .metadata-item:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-sm);
      }

      .metadata-label {
        font-size: 12px;
        color: var(--text-light);
        margin-bottom: 5px;
      }

      .metadata-value {
        font-size: 14px;
        font-weight: 500;
        word-break: break-all;
      }

      /* Edit Form Styling */
      .edit-form {
        display: none;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--primary-color);
        font-size: 14px;
      }

      .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid var(--card-border);
        border-radius: 8px;
        font-size: 15px;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: var(--transition);
      }

      .form-control:focus {
        outline: none;
        border-color: var(--primary-light);
        box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
      }

      textarea.form-control {
        min-height: 120px;
        resize: vertical;
      }

      .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 15px;
        margin-top: 30px;
      }

      /* Search Input */
      .search-container {
        position: relative;
        margin-bottom: 20px;
      }

      .search-container input {
        width: 100%;
        padding: 12px 15px 12px 40px;
        border: 1px solid var(--card-border);
        border-radius: 8px;
        font-size: 14px;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: var(--transition);
      }

      .search-container input:focus {
        outline: none;
        border-color: var(--primary-light);
        box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
      }

      .search-container i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-light);
      }

      /* Modals */
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }

      .modal-backdrop.show {
        opacity: 1;
        visibility: visible;
      }

      .modal-container {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        width: 550px;
        max-width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-lg);
        transform: translateY(20px);
        transition: transform 0.3s ease;
      }

      .modal-backdrop.show .modal-container {
        transform: translateY(0);
      }

      .modal-header {
        padding: 20px 25px;
        border-bottom: 1px solid var(--card-border);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-title {
        font-size: 20px;
        font-weight: 600;
        color: var(--primary-color);
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 22px;
        color: var(--text-light);
        cursor: pointer;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: var(--transition);
      }

      .modal-close:hover {
        background-color: rgba(0, 0, 0, 0.05);
        color: var(--danger);
      }

      .modal-body {
        padding: 25px;
      }

      .modal-footer {
        padding: 15px 25px 25px;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      /* File Drop Zone */
      .drop-zone {
        border: 2px dashed var(--card-border);
        border-radius: 12px;
        padding: 40px 20px;
        text-align: center;
        transition: var(--transition);
        margin-bottom: 20px;
        cursor: pointer;
      }

      .drop-zone:hover, .drop-zone.active {
        border-color: var(--primary-color);
        background-color: rgba(108, 92, 231, 0.05);
      }

      .drop-zone i {
        font-size: 48px;
        color: var(--primary-light);
        margin-bottom: 15px;
      }

      .drop-zone h3 {
        font-size: 18px;
        margin-bottom: 10px;
        color: var(--primary-color);
      }

      .drop-zone p {
        color: var(--text-light);
        margin-bottom: 15px;
        font-size: 14px;
      }

      /* Dashboard Footer */
      .dashboard-footer {
        display: flex;
        justify-content: space-between;
        padding: 15px 20px;
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        margin-bottom: 40px;
        box-shadow: var(--shadow-sm);
      }

      .footer-info {
        font-size: 14px;
        color: var(--text-light);
      }

      .footer-actions {
        display: flex;
        gap: 15px;
      }

      /* Toasts */
      .toast-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1050;
      }

      .toast {
        background-color: var(--card-bg);
        border-radius: 8px;
        padding: 15px 20px;
        margin-bottom: 10px;
        box-shadow: var(--shadow-md);
        display: flex;
        align-items: center;
        gap: 12px;
        width: 300px;
        transform: translateX(400px);
        opacity: 0;
        transition: transform 0.3s ease, opacity 0.3s ease;
      }

      .toast.show {
        transform: translateX(0);
        opacity: 1;
      }

      .toast-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
      }

      .toast-success .toast-icon {
        background-color: var(--success);
        color: white;
      }

      .toast-error .toast-icon {
        background-color: var(--danger);
        color: white;
      }

      .toast-warning .toast-icon {
        background-color: var(--warning);
        color: white;
      }

      .toast-info .toast-icon {
        background-color: var(--info);
        color: white;
      }

      .toast-content {
        flex: 1;
      }

      .toast-title {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 3px;
      }

      .toast-message {
        font-size: 13px;
        color: var(--text-light);
      }

      /* Visualizations */
      .memory-timeline {
        padding: 20px;
        margin-top: 20px;
        border-top: 1px solid var(--card-border);
      }

      .timeline-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .timeline-content {
        position: relative;
        padding-left: 20px;
      }

      .timeline-content::before {
        content: '';
        position: absolute;
        left: 0;
        top: 10px;
        bottom: 10px;
        width: 2px;
        background-color: var(--memory-border);
      }

      .timeline-item {
        position: relative;
        padding: 10px 0 10px 25px;
      }

      .timeline-item::before {
        content: '';
        position: absolute;
        left: -5px;
        top: 15px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: var(--primary-color);
        z-index: 1;
      }

      .timeline-date {
        font-size: 12px;
        color: var(--text-light);
        margin-bottom: 5px;
      }

      .timeline-content-text {
        font-size: 14px;
      }

      /* Responsive Adjustments */
      @media (max-width: 1024px) {
        .dashboard {
          grid-template-columns: 1fr;
        }
        
        .insights-panel {
          height: auto;
        }
      }

      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
          gap: 15px;
          text-align: center;
        }
        
        .app-title {
          flex-direction: column;
        }
        
        .controls {
          width: 100%;
          justify-content: center;
          flex-wrap: wrap;
        }
        
        .stats-grid {
          grid-template-columns: 1fr;
        }
        
        .metadata-grid {
          grid-template-columns: 1fr;
        }
      }

      /* Dark mode toggle */
      .dark-mode-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--card-bg);
        border: 1px solid var(--card-border);
        color: var(--text-color);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        box-shadow: var(--shadow-md);
        cursor: pointer;
        z-index: 990;
        transition: var(--transition);
      }

      .dark-mode-toggle:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      /* Loading Spinner */
      .spinner-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        z-index: 1100;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }

      .spinner-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .spinner-container {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }

      .spinner-text {
        color: white;
        font-size: 18px;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      /* Empty State */
      .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
        text-align: center;
      }

      .empty-state i {
        font-size: 60px;
        color: var(--primary-light);
        margin-bottom: 20px;
        opacity: 0.3;
      }

      .empty-state h3 {
        font-size: 20px;
        margin-bottom: 10px;
      }

      .empty-state p {
        color: var(--text-light);
        max-width: 300px;
        margin-bottom: 20px;
      }

      /* Welcome Banner */
      .welcome-banner {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
        border-radius: var(--border-radius);
        padding: 30px;
        color: white;
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
        box-shadow: var(--shadow-md);
      }

      .welcome-banner::before {
        content: '';
        position: absolute;
        top: -50px;
        right: -50px;
        width: 200px;
        height: 200px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
      }

      .welcome-banner::after {
        content: '';
        position: absolute;
        bottom: -30px;
        left: -30px;
        width: 120px;
        height: 120px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
      }

      .banner-content {
        position: relative;
        z-index: 1;
      }

      .banner-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 15px;
      }

      .banner-description {
        font-size: 16px;
        max-width: 600px;
        margin-bottom: 20px;
        opacity: 0.9;
      }

      .banner-cta {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background-color: white;
        color: var(--primary-color);
        padding: 10px 25px;
        border-radius: 50px;
        font-weight: 600;
        font-size: 14px;
        text-decoration: none;
        transition: var(--transition);
        box-shadow: var(--shadow-sm);
      }

      .banner-cta:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-md);
      }

      /* Key Features Section */
      .features-section {
        margin-bottom: 40px;
      }

      .section-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .section-title {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 10px;
      }

      .section-subtitle {
        font-size: 16px;
        color: var(--text-light);
        max-width: 600px;
        margin: 0 auto;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
      }

      .feature-card {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: var(--shadow-md);
        transition: var(--transition);
        height: 100%;
      }

      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .feature-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        background-color: var(--memory-bg);
        color: var(--primary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        margin-bottom: 20px;
      }

      .feature-title {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 10px;
        color: var(--primary-color);
      }

      .feature-description {
        font-size: 14px;
        color: var(--text-light);
        line-height: 1.6;
      }

      /* Mood badges */
      .mood-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 3px 8px;
        border-radius: 20px;
        font-size: 12px;
      }

      .mood-neutral {
        background-color: rgba(52, 152, 219, 0.15);
        color: #3498db;
      }

      .mood-happy {
        background-color: rgba(46, 204, 113, 0.15);
        color: #2ecc71;
      }

      .mood-sad {
        background-color: rgba(243, 156, 18, 0.15);
        color: #f39c12;
      }

      .mood-angry {
        background-color: rgba(231, 76, 60, 0.15);
        color: #e74c3c;
      }

      /* Theme tags */
      .theme-tag {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 3px 8px;
        border-radius: 20px;
        font-size: 12px;
        background-color: rgba(108, 92, 231, 0.15);
        color: var(--primary-color);
      }

      /* Animation for content */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .fade-in {
        animation: fadeIn 0.3s ease forwards;
      }

      /* Additional dashboard widgets */
      .widget {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-md);
        overflow: hidden;
        height: 100%;
        transition: var(--transition);
      }

      .widget:hover {
        box-shadow: var(--shadow-lg);
      }

      .widget-header {
        padding: 15px 20px;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
        color: white;
      }

      .widget-title {
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .widget-body {
        padding: 20px;
      }

      /* Filter buttons */
      .filter-buttons {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .filter-btn {
        background-color: var(--memory-bg);
        border: 1px solid var(--memory-border);
        color: var(--text-color);
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
        transition: var(--transition);
      }

      .filter-btn:hover {
        background-color: rgba(108, 92, 231, 0.1);
        border-color: var(--primary-color);
      }

      .filter-btn.active {
        background-color: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      /* Document card section for displaying imported memory files */
      .document-card {
        background-color: var(--memory-bg);
        border: 1px solid var(--memory-border);
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 15px;
        transition: var(--transition);
      }

      .document-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-md);
      }

      .document-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .document-title {
        font-weight: 600;
        font-size: 16px;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .document-stats {
        font-size: 12px;
        color: var(--text-light);
      }

      .document-info {
        display: flex;
        gap: 20px;
        font-size: 13px;
        color: var(--text-light);
      }

      .document-info-item {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* Memory flow visualization */
      .memory-flow {
        height: 200px;
        position: relative;
        overflow: hidden;
        margin: 20px 0;
      }

      .flow-line {
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--memory-border);
        transform: translateY(-50%);
      }

      .memory-node {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: var(--primary-color);
        cursor: pointer;
        transition: var(--transition);
      }

      .memory-node:hover {
        transform: translateY(-50%) scale(1.2);
        box-shadow: 0 0 10px rgba(108, 92, 231, 0.5);
      }

      .memory-node::after {
        content: '';
        position: absolute;
        top: -40px;
        left: 50%;
        transform: translateX(-50%);
        padding: 5px 10px;
        background-color: var(--card-bg);
        border-radius: 4px;
        font-size: 12px;
        white-space: nowrap;
        color: var(--text-color);
        box-shadow: var(--shadow-sm);
        opacity: 0;
        transition: var(--transition);
        pointer-events: none;
      }

      .memory-node:hover::after {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-content">
        <div class="app-title">
          <div class="logo">
            <i class="fas fa-brain"></i>
          </div>
          <div class="text">
            <h1>AI Dynamic Memory Explorer</h1>
            <span class="tagline">The future of human-AI relationship growth</span>
          </div>
        </div>
        <div class="controls">
          <button id="import-btn" class="btn primary">
            <i class="fas fa-file-import"></i> Import Memories
          </button>
          <button id="export-btn" class="btn">
            <i class="fas fa-file-export"></i> Export Data
          </button>
          <button id="add-memory-btn" class="btn accent">
            <i class="fas fa-plus"></i> New Memory
          </button>
        </div>
      </div>
    </header>

    <div class="container">
      <!-- Welcome Banner -->
      <div class="welcome-banner">
        <div class="banner-content">
          <h2 class="banner-title">The Next Evolution in AI Intelligence</h2>
          <p class="banner-description">
            Dynamic memories allow AI systems to build personalized relationships that grow and adapt over time - just like humans do. Explore, modify, and understand how your AI assistant learns and remembers.
          </p>
          <a href="#features" class="banner-cta">
            <i class="fas fa-lightbulb"></i> Learn How It Works
          </a>
        </div>
      </div>

      <!-- Key Features Section -->
      <div class="features-section" id="features">
        <div class="section-header">
          <h2 class="section-title">Key Benefits of Dynamic Memory</h2>
          <p class="section-subtitle">Understanding how AI memories work and why they're revolutionary</p>
        </div>

        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-brain"></i>
            </div>
            <h3 class="feature-title">Continuous Learning</h3>
            <p class="feature-description">
              Unlike static AI models, dynamic memory systems learn and evolve with each interaction, building deeper understanding over time.
            </p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-user-friends"></i>
            </div>
            <h3 class="feature-title">Personalized Relationships</h3>
            <p class="feature-description">
              AI assistants remember your preferences, past conversations, and specific details to create truly personalized experiences.
            </p>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-sync-alt"></i>
            </div>
            <h3 class="feature-title">Transparent & Adaptable</h3>
            <p class="feature-description">
              You can view, modify, and even direct what your AI remembers, creating a transparent and adaptable relationship.
            </p>
          </div>
        </div>
      </div>

      <!-- Main Dashboard -->
      <div class="dashboard">
        <div class="insights-panel">
          <div class="panel-header">
            <h2><i class="fas fa-lightbulb"></i> Memory Insights</h2>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="total-memories">0</div>
              <div class="stat-label">Total Memories</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="unique-themes">0</div>
              <div class="stat-label">Unique Topics</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="average-sentiment">-</div>
              <div class="stat-label">Average Sentiment</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="memory-timespan">-</div>
              <div class="stat-label">Memory Timespan</div>
            </div>
          </div>

          <div class="chart-container">
            <!-- Memory distribution chart would go here -->
            <div id="memory-chart" style="width: 100%; height: 100%;"></div>
          </div>

          <div class="memory-list-container">
            <div class="search-container">
              <i class="fas fa-search"></i>
              <input type="text" id="search-input" placeholder="Search memories..." />
            </div>

            <div class="filter-buttons">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="general">General</button>
              <button class="filter-btn" data-filter="migration">Migration</button>
              <button class="filter-btn" data-filter="user">User</button>
            </div>

            <ul class="memory-list" id="memory-list">
              <!-- Memory items will be added here by JavaScript -->
            </ul>

            <div id="empty-memory-list" class="empty-state" style="display: none;">
              <i class="fas fa-folder-open"></i>
              <h3>No memories found</h3>
              <p>Try adjusting your search or import some memory data.</p>
              <button id="import-empty-btn" class="btn primary">
                <i class="fas fa-file-import"></i> Import Memories
              </button>
            </div>
          </div>
        </div>

        <div class="memory-detail-card">
          <div class="detail-header">
            <div class="detail-header-content">
              <div class="detail-title-container">
                <h2 id="detail-title">Memory Details</h2>
                <div class="detail-subtitle">
                  <span id="detail-date">Date: --/--/----</span>
                  <span id="detail-time">Time: --:--:--</span>
                </div>
              </div>
              <div class="detail-actions">
                <button id="edit-memory-btn" class="btn secondary">
                  <i class="fas fa-edit"></i> Edit
                </button>
                <button id="delete-memory-btn" class="btn secondary">
                  <i class="fas fa-trash"></i> Delete
                </button>
              </div>
            </div>
          </div>

          <div class="detail-body">
            <div class="detail-empty-state" id="no-memory-selected">
              <i class="fas fa-brain"></i>
              <h3>Select a memory to view details</h3>
              <p>
                Click on any memory from the list to view its complete details and
                metadata.
              </p>
            </div>

            <div class="detail-content" id="memory-details">
              <div class="detail-section">
                <h3 class="detail-section-title">
                  <i class="fas fa-comment-alt"></i> Memory Content
                </h3>
                <div class="memory-content" id="detail-message">
                  This is where the memory content will appear.
                </div>
                <div>
                  <span class="theme-tag" id="detail-theme-tag">
                    <i class="fas fa-tag"></i> General
                  </span>
                  <span class="mood-badge mood-neutral" id="detail-mood-badge">
                    <i class="fas fa-meh"></i> Neutral
                  </span>
                </div>
              </div>

              <div class="detail-section">
                <h3 class="detail-section-title">
                  <i class="fas fa-info-circle"></i> Memory Metadata
                </h3>
                <div class="metadata-grid">
                  <div class="metadata-item">
                    <div class="metadata-label">Memory ID</div>
                    <div class="metadata-value" id="detail-memory-id">
                      ---
                    </div>
                  </div>
                  <div class="metadata-item">
                    <div class="metadata-label">Conversation ID</div>
                    <div class="metadata-value" id="detail-conversation-id">
                      ---
                    </div>
                  </div>
                  <div class="metadata-item">
                    <div class="metadata-label">Session ID</div>
                    <div class="metadata-value" id="detail-session-id">
                      ---
                    </div>
                  </div>
                  <div class="metadata-item">
                    <div class="metadata-label">Created</div>
                    <div class="metadata-value" id="detail-created">
                      ---
                    </div>
                  </div>
                </div>
              </div>

              <div class="detail-section">
                <h3 class="detail-section-title">
                  <i class="fas fa-project-diagram"></i> Related Memories
                </h3>
                <div id="related-memories" class="related-memories">
                  <!-- Related memories will be added here by JavaScript -->
                  <p class="text-muted">No related memories found.</p>
                </div>
              </div>
            </div>

            <div class="edit-form" id="memory-edit-form">
              <div class="form-group">
                <label for="edit-theme">Theme</label>
                <input
                  type="text"
                  id="edit-theme"
                  class="form-control"
                  placeholder="Memory theme"
                />
              </div>
              <div class="form-group">
                <label for="edit-mood">Mood</label>
                <select id="edit-mood" class="form-control">
                  <option value="neutral">Neutral</option>
                  <option value="happy">Happy</option>
                  <option value="sad">Sad</option>
                  <option value="angry">Angry</option>
                </select>
              </div>
              <div class="form-group">
                <label for="edit-message">Message</label>
                <textarea
                  id="edit-message"
                  class="form-control"
                  placeholder="Memory message"
                ></textarea>
              </div>
              <div class="form-group">
                <label for="edit-conversation-id">Conversation ID</label>
                <input
                  type="text"
                  id="edit-conversation-id"
                  class="form-control"
                  placeholder="Conversation ID"
                />
              </div>
              <div class="form-group">
                <label for="edit-session-id">Session ID</label>
                <input
                  type="text"
                  id="edit-session-id"
                  class="form-control"
                  placeholder="Session ID"
                />
              </div>
              <div class="form-group">
                <label for="edit-date">Date</label>
                <input type="date" id="edit-date" class="form-control" />
              </div>
              <div class="form-group">
                <label for="edit-time">Time</label>
                <input type="time" id="edit-time" class="form-control" />
              </div>

              <div class="form-actions">
                <button id="cancel-edit-btn" class="btn secondary">
                  Cancel
                </button>
                <button id="save-edit-btn" class="btn success">
                  Save Changes
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="dashboard-footer">
        <div class="footer-info">
          <p>AI Dynamic Memory Explorer - The future of human-AI relationships</p>
        </div>
        <div class="footer-actions">
          <button id="help-btn" class="btn">
            <i class="fas fa-question-circle"></i> Help
          </button>
          <button id="about-btn" class="btn">
            <i class="fas fa-info-circle"></i> About
          </button>
        </div>
      </div>
    </div>

    <!-- Import Memory Modal -->
    <div class="modal-backdrop" id="import-modal">
      <div class="modal-container">
        <div class="modal-header">
          <h2 class="modal-title">Import Memory Data</h2>
          <button class="modal-close" id="close-import-modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="drop-zone" id="drop-zone">
            <i class="fas fa-file-upload"></i>
            <h3>Drag & Drop JSON File</h3>
            <p>or click to browse files</p>
            <input type="file" id="file-input" style="display: none" accept=".json" />
          </div>
          <div id="upload-preview" style="display: none;">
            <div class="document-card">
              <div class="document-header">
                <div class="document-title">
                  <i class="fas fa-file-alt"></i>
                  <span id="preview-filename">filename.json</span>
                </div>
                <div class="document-stats" id="preview-filesize">0 KB</div>
              </div>
              <div class="document-info">
                <div class="document-info-item">
                  <i class="fas fa-brain"></i>
                  <span id="preview-memories-count">0 memories</span>
                </div>
                <div class="document-info-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span id="preview-date-range">No date range</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="cancel-import-btn" class="btn secondary">Cancel</button>
          <button id="confirm-import-btn" class="btn primary">Import Memories</button>
        </div>
      </div>
    </div>

    <!-- Add New Memory Modal -->
    <div class="modal-backdrop" id="add-memory-modal">
      <div class="modal-container">
        <div class="modal-header">
          <h2 class="modal-title">Create New Memory</h2>
          <button class="modal-close" id="close-add-memory-modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="new-theme">Theme</label>
            <input
              type="text"
              id="new-theme"
              class="form-control"
              placeholder="Memory theme (e.g., 'user preferences', 'project details')"
            />
          </div>
          <div class="form-group">
            <label for="new-mood">Mood</label>
            <select id="new-mood" class="form-control">
              <option value="neutral">Neutral</option>
              <option value="happy">Happy</option>
              <option value="sad">Sad</option>
              <option value="angry">Angry</option>
            </select>
          </div>
          <div class="form-group">
            <label for="new-message">Message</label>
            <textarea
              id="new-message"
              class="form-control"
              placeholder="Memory content (what should the AI remember?)"
              rows="5"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="new-conversation-id">Conversation ID (optional)</label>
            <input
              type="text"
              id="new-conversation-id"
              class="form-control"
              placeholder="Leave blank to generate automatically"
            />
          </div>
          <div class="form-group">
            <label for="new-session-id">Session ID (optional)</label>
            <input
              type="text"
              id="new-session-id"
              class="form-control"
              placeholder="Leave blank to generate automatically"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button id="cancel-add-memory-btn" class="btn secondary">Cancel</button>
          <button id="confirm-add-memory-btn" class="btn primary">Create Memory</button>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-backdrop" id="delete-modal">
      <div class="modal-container">
        <div class="modal-header">
          <h2 class="modal-title">Delete Memory</h2>
          <button class="modal-close" id="close-delete-modal">&times;</button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this memory? This action cannot be undone.</p>
          <div class="memory-content" id="delete-preview" style="margin-top: 15px;">
            Memory content preview
          </div>
        </div>
        <div class="modal-footer">
          <button id="cancel-delete-btn" class="btn secondary">Cancel</button>
          <button id="confirm-delete-btn" class="btn danger">Delete Memory</button>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container">
      <!-- Toasts will be added here by JavaScript -->
    </div>

    <!-- Loading Spinner -->
    <div class="spinner-overlay" id="spinner-overlay">
      <div class="spinner-container">
        <div class="spinner"></div>
        <div class="spinner-text" id="spinner-text">Loading memories...</div>
      </div>
    </div>

    <!-- Dark Mode Toggle -->
    <div class="dark-mode-toggle" id="dark-mode-toggle">
      <i class="fas fa-moon"></i>
    </div>

    <script>
      /**
       * AI Dynamic Memory Explorer
       * A visualization tool for exploring and managing AI memory data
       */
      document.addEventListener('DOMContentLoaded', function() {
        // Main application state
        const app = {
          memories: {}, // Will hold all memory data
          selectedMemoryId: null, // Currently selected memory
          filters: {
            search: '',
            theme: 'all'
          },
          darkMode: localStorage.getItem('darkMode') === 'true'
        };

        // DOM Elements
        const elements = {
          memoryList: document.getElementById('memory-list'),
          memoryDetails: document.getElementById('memory-details'),
          emptyMemoryList: document.getElementById('empty-memory-list'),
          noMemorySelected: document.getElementById('no-memory-selected'),
          editForm: document.getElementById('memory-edit-form'),
          searchInput: document.getElementById('search-input'),
          importModal: document.getElementById('import-modal'),
          addMemoryModal: document.getElementById('add-memory-modal'),
          deleteModal: document.getElementById('delete-modal'),
          spinnerOverlay: document.getElementById('spinner-overlay'),
          filterButtons: document.querySelectorAll('.filter-btn'),
          dropZone: document.getElementById('drop-zone'),
          fileInput: document.getElementById('file-input'),
          uploadPreview: document.getElementById('upload-preview'),
          // Statistics elements
          totalMemories: document.getElementById('total-memories'),
          uniqueThemes: document.getElementById('unique-themes'),
          averageSentiment: document.getElementById('average-sentiment'),
          memoryTimespan: document.getElementById('memory-timespan')
        };

        // Initialize the application
        initApp();

        /**
         * Initialize the application
         */
        function initApp() {
          // Initialize event listeners
          initEventListeners();
          
          // Apply dark mode if needed
          if (app.darkMode) {
            document.body.classList.add('dark-mode');
            document.getElementById('dark-mode-toggle').innerHTML = '<i class="fas fa-sun"></i>';
          }
          
          // Try to load example data for demonstration
          loadExampleData();
        }

        /**
         * Initialize all event listeners
         */
        function initEventListeners() {
          // Button click handlers
          document.getElementById('import-btn').addEventListener('click', openImportModal);
          document.getElementById('import-empty-btn').addEventListener('click', openImportModal);
          document.getElementById('export-btn').addEventListener('click', exportMemories);
          document.getElementById('add-memory-btn').addEventListener('click', openAddMemoryModal);
          document.getElementById('edit-memory-btn').addEventListener('click', startEditingMemory);
          document.getElementById('delete-memory-btn').addEventListener('click', openDeleteModal);
          
          // Modal handlers
          document.getElementById('close-import-modal').addEventListener('click', closeImportModal);
          document.getElementById('cancel-import-btn').addEventListener('click', closeImportModal);
          document.getElementById('confirm-import-btn').addEventListener('click', importMemories);
          
          document.getElementById('close-add-memory-modal').addEventListener('click', closeAddMemoryModal);
          document.getElementById('cancel-add-memory-btn').addEventListener('click', closeAddMemoryModal);
          document.getElementById('confirm-add-memory-btn').addEventListener('click', addNewMemory);
          
          document.getElementById('close-delete-modal').addEventListener('click', closeDeleteModal);
          document.getElementById('cancel-delete-btn').addEventListener('click', closeDeleteModal);
          document.getElementById('confirm-delete-btn').addEventListener('click', deleteSelectedMemory);
          
          // Edit form handlers
          document.getElementById('cancel-edit-btn').addEventListener('click', cancelEditingMemory);
          document.getElementById('save-edit-btn').addEventListener('click', saveMemoryChanges);
          
          // Search handler
          elements.searchInput.addEventListener('input', handleSearch);
          
          // Filter button handlers
          elements.filterButtons.forEach(button => {
            button.addEventListener('click', handleFilterClick);
          });
          
          // Dark mode toggle
          document.getElementById('dark-mode-toggle').addEventListener('click', toggleDarkMode);
          
          // File upload handlers
          elements.dropZone.addEventListener('click', () => elements.fileInput.click());
          elements.fileInput.addEventListener('change', handleFileSelect);
          
          // Drag and drop handlers
          elements.dropZone.addEventListener('dragover', handleDragOver);
          elements.dropZone.addEventListener('dragleave', handleDragLeave);
          elements.dropZone.addEventListener('drop', handleFileDrop);
        }

        /**
         * Handle search input changes
         */
        function handleSearch() {
          app.filters.search = elements.searchInput.value.toLowerCase().trim();
          renderMemoryList();
        }

        /**
         * Handle filter button clicks
         */
        function handleFilterClick(event) {
          // Update active button
          elements.filterButtons.forEach(btn => btn.classList.remove('active'));
          event.currentTarget.classList.add('active');
          
          // Set the filter
          app.filters.theme = event.currentTarget.dataset.filter;
          renderMemoryList();
        }

        /**
         * Toggle dark mode
         */
        function toggleDarkMode() {
          app.darkMode = !app.darkMode;
          document.body.classList.toggle('dark-mode');
          
          const icon = document.getElementById('dark-mode-toggle');
          icon.innerHTML = app.darkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
          
          localStorage.setItem('darkMode', app.darkMode);
        }

        /**
         * Open import modal
         */
        function openImportModal() {
          elements.importModal.classList.add('show');
          elements.uploadPreview.style.display = 'none';
        }

        /**
         * Close import modal
         */
        function closeImportModal() {
          elements.importModal.classList.remove('show');
          elements.fileInput.value = '';
        }

        /**
         * Handle file selection
         */
        function handleFileSelect(event) {
          const file = event.target.files[0];
          if (file) {
            processFile(file);
          }
        }

        /**
         * Handle drag over event
         */
        function handleDragOver(event) {
          event.preventDefault();
          elements.dropZone.classList.add('active');
        }

        /**
         * Handle drag leave event
         */
        function handleDragLeave(event) {
          event.preventDefault();
          elements.dropZone.classList.remove('active');
        }

        /**
         * Handle file drop event
         */
        function handleFileDrop(event) {
          event.preventDefault();
          elements.dropZone.classList.remove('active');
          
          const file = event.dataTransfer.files[0];
          if (file) {
            processFile(file);
          }
        }

        /**
         * Process the uploaded file
         */
        function processFile(file) {
          if (file.type !== 'application/json') {
            showToast('Error', 'Please select a JSON file', 'error');
            return;
          }
          
          // Show preview
          document.getElementById('preview-filename').textContent = file.name;
          document.getElementById('preview-filesize').textContent = formatFileSize(file.size);
          elements.uploadPreview.style.display = 'block';
          
          // Read file
          const reader = new FileReader();
          reader.onload = function(e) {
            try {
              const data = JSON.parse(e.target.result);
              // Count memories
              const memoryCount = Object.keys(data).length;
              document.getElementById('preview-memories-count').textContent = `${memoryCount} memories`;
              
              // Get date range if available
              let minDate = null;
              let maxDate = null;
              
              for (const id in data) {
                const memory = data[id];
                if (memory.date) {
                  const date = new Date(`${memory.date} ${memory.time || '00:00:00'}`);
                  if (!minDate || date < minDate) minDate = date;
                  if (!maxDate || date > maxDate) maxDate = date;
                }
              }
              
              if (minDate && maxDate) {
                const format = { year: 'numeric', month: 'short', day: 'numeric' };
                const range = `${minDate.toLocaleDateString(undefined, format)} - ${maxDate.toLocaleDateString(undefined, format)}`;
                document.getElementById('preview-date-range').textContent = range;
              } else {
                document.getElementById('preview-date-range').textContent = 'No date information';
              }
              
              // Save to session storage for import
              sessionStorage.setItem('import-data', e.target.result);
              
            } catch (error) {
              showToast('Error', 'Invalid JSON file', 'error');
              elements.uploadPreview.style.display = 'none';
            }
          };
          
          reader.onerror = function() {
            showToast('Error', 'Failed to read file', 'error');
          };
          
          reader.readAsText(file);
        }

        /**
         * Format file size in a human-readable format
         */
        function formatFileSize(bytes) {
          if (bytes < 1024) return bytes + ' bytes';
          else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
          else return (bytes / 1048576).toFixed(1) + ' MB';
        }

        /**
         * Import memories from the uploaded file
         */
        function importMemories() {
          const jsonData = sessionStorage.getItem('import-data');
          if (!jsonData) {
            showToast('Error', 'No data to import', 'error');
            return;
          }
          
          try {
            const data = JSON.parse(jsonData);
            
            // Show spinner
            showSpinner('Importing memories...');
            
            // Process import (with a slight delay to show the spinner)
            setTimeout(() => {
              // Replace the current memories with the imported ones
              app.memories = data;
              
              // Update UI
              renderMemoryList();
              updateStatistics();
              
              // Hide spinner
              hideSpinner();
              
              // Close modal
              closeImportModal();
              
              // Show success message
              const count = Object.keys(data).length;
              showToast('Success', `Imported ${count} memories successfully`, 'success');
              
              // Clear session storage
              sessionStorage.removeItem('import-data');
            }, 1000);
            
          } catch (error) {
            hideSpinner();
            showToast('Error', 'Failed to import memories: ' + error.message, 'error');
          }
        }

        /**
         * Export memories to a JSON file
         */
        function exportMemories() {
          if (Object.keys(app.memories).length === 0) {
            showToast('Error', 'No memories to export', 'error');
            return;
          }
          
          // Create a JSON string
          const jsonData = JSON.stringify(app.memories, null, 2);
          
          // Create a blob
          const blob = new Blob([jsonData], { type: 'application/json' });
          
          // Create a download link
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `ai-memories-${formatDate(new Date())}.json`;
          
          // Trigger download
          document.body.appendChild(a);
          a.click();
          
          // Clean up
          setTimeout(() => {
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          }, 100);
          
          showToast('Success', 'Memories exported successfully', 'success');
        }

        /**
         * Format date for filename
         */
        function formatDate(date) {
          return date.toISOString().split('T')[0];
        }

        /**
         * Open add memory modal
         */
        function openAddMemoryModal() {
          // Reset form
          document.getElementById('new-theme').value = '';
          document.getElementById('new-mood').value = 'neutral';
          document.getElementById('new-message').value = '';
          document.getElementById('new-conversation-id').value = '';
          document.getElementById('new-session-id').value = '';
          
          // Show modal
          elements.addMemoryModal.classList.add('show');
        }

        /**
         * Close add memory modal
         */
        function closeAddMemoryModal() {
          elements.addMemoryModal.classList.remove('show');
        }

        /**
         * Add a new memory
         */
        function addNewMemory() {
          // Get form values
          const theme = document.getElementById('new-theme').value.trim();
          const mood = document.getElementById('new-mood').value;
          const message = document.getElementById('new-message').value.trim();
          let conversationId = document.getElementById('new-conversation-id').value.trim();
          let sessionId = document.getElementById('new-session-id').value.trim();
          
          // Validate
          if (!theme) {
            showToast('Error', 'Theme is required', 'error');
            return;
          }
          
          if (!message) {
            showToast('Error', 'Message is required', 'error');
            return;
          }
          
          // Generate IDs if not provided
          if (!conversationId) {
            conversationId = generateUUID();
          }
          
          if (!sessionId) {
            sessionId = generateUUID();
          }
          
          // Create memory object
          const now = new Date();
          const memoryId = generateUUID();
          const memory = {
            conversation_id: conversationId,
            session_id: sessionId,
            message: message,
            mood: mood,
            theme: theme,
            date: now.toISOString().split('T')[0],
            time: now.toTimeString().split(' ')[0]
          };
          
          // Add to app state
          app.memories[memoryId] = memory;
          
          // Update UI
          renderMemoryList();
          updateStatistics();
          
          // Select the new memory
          selectMemory(memoryId);
          
          // Close modal
          closeAddMemoryModal();
          
          // Show success message
          showToast('Success', 'Memory added successfully', 'success');
        }

        /**
         * Generate a UUID
         */
        function generateUUID() {
          return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
            const r = Math.random() * 16 | 0;
            const v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
          });
        }

        /**
         * Open delete confirmation modal
         */
        function openDeleteModal() {
          if (!app.selectedMemoryId) return;
          
          const memory = app.memories[app.selectedMemoryId];
          document.getElementById('delete-preview').textContent = memory.message;
          elements.deleteModal.classList.add('show');
        }

        /**
         * Close delete modal
         */
        function closeDeleteModal() {
          elements.deleteModal.classList.remove('show');
        }

        /**
         * Delete the selected memory
         */
        function deleteSelectedMemory() {
          if (!app.selectedMemoryId) return;
          
          // Delete from app state
          delete app.memories[app.selectedMemoryId];
          
          // Clear selection
          app.selectedMemoryId = null;
          
          // Update UI
          renderMemoryList();
          updateStatistics();
          elements.memoryDetails.style.display = 'none';
          elements.noMemorySelected.style.display = 'flex';
          
          // Close modal
          closeDeleteModal();
          
          // Show success message
          showToast('Success', 'Memory deleted successfully', 'success');
        }

        /**
         * Start editing a memory
         */
        function startEditingMemory() {
          if (!app.selectedMemoryId) return;
          
          const memory = app.memories[app.selectedMemoryId];
          
          // Populate form
          document.getElementById('edit-theme').value = memory.theme || '';
          document.getElementById('edit-mood').value = memory.mood || 'neutral';
          document.getElementById('edit-message').value = memory.message || '';
          document.getElementById('edit-conversation-id').value = memory.conversation_id || '';
          document.getElementById('edit-session-id').value = memory.session_id || '';
          
          // Set date and time if available
          if (memory.date) {
            document.getElementById('edit-date').value = memory.date;
          }
          
          if (memory.time) {
            document.getElementById('edit-time').value = memory.time;
          }
          
          // Show edit form, hide details
          elements.memoryDetails.style.display = 'none';
          elements.editForm.style.display = 'block';
        }

        /**
         * Cancel editing a memory
         */
        function cancelEditingMemory() {
          // Hide edit form, show details
          elements.editForm.style.display = 'none';
          elements.memoryDetails.style.display = 'block';
        }

        /**
         * Save memory changes
         */
        function saveMemoryChanges() {
          if (!app.selectedMemoryId) return;
          
          // Get form values
          const theme = document.getElementById('edit-theme').value.trim();
          const mood = document.getElementById('edit-mood').value;
          const message = document.getElementById('edit-message').value.trim();
          const conversationId = document.getElementById('edit-conversation-id').value.trim();
          const sessionId = document.getElementById('edit-session-id').value.trim();
          const date = document.getElementById('edit-date').value;
          const time = document.getElementById('edit-time').value;
          
          // Validate
          if (!theme) {
            showToast('Error', 'Theme is required', 'error');
            return;
          }
          
          if (!message) {
            showToast('Error', 'Message is required', 'error');
            return;
          }
          
          // Update memory
          const memory = app.memories[app.selectedMemoryId];
          memory.theme = theme;
          memory.mood = mood;
          memory.message = message;
          memory.conversation_id = conversationId;
          memory.session_id = sessionId;
          memory.date = date;
          memory.time = time;
          
          // Update UI
          renderMemoryList();
          renderMemoryDetails(app.selectedMemoryId);
          updateStatistics();
          
          // Hide edit form, show details
          elements.editForm.style.display = 'none';
          elements.memoryDetails.style.display = 'block';
          
          // Show success message
          showToast('Success', 'Memory updated successfully', 'success');
        }

        /**
         * Render the memory list
         */
        function renderMemoryList() {
          // Clear the list
          elements.memoryList.innerHTML = '';
          
          // Get all memory IDs
          const memoryIds = Object.keys(app.memories);
          
          // Filter memories
          const filteredIds = memoryIds.filter(id => {
            const memory = app.memories[id];
            
            // Filter by search
            if (app.filters.search && !memory.message.toLowerCase().includes(app.filters.search) && 
                !memory.theme.toLowerCase().includes(app.filters.search)) {
              return false;
            }
            
            // Filter by theme
            if (app.filters.theme !== 'all') {
              if (app.filters.theme === 'general' && !memory.theme.toLowerCase().includes('general')) {
                return false;
              } else if (app.filters.theme === 'migration' && !memory.theme.toLowerCase().includes('migration')) {
                return false;
              } else if (app.filters.theme === 'user' && !memory.theme.toLowerCase().includes('user')) {
                return false;
              }
            }
            
            return true;
          });
          
          // Sort by date (newest first)
          filteredIds.sort((a, b) => {
            const dateA = app.memories[a].date ? new Date(`${app.memories[a].date} ${app.memories[a].time || '00:00:00'}`) : new Date(0);
            const dateB = app.memories[b].date ? new Date(`${app.memories[b].date} ${app.memories[b].time || '00:00:00'}`) : new Date(0);
            return dateB - dateA;
          });
          
          // Show empty state if no memories
          if (filteredIds.length === 0) {
            if (memoryIds.length === 0) {
              elements.emptyMemoryList.style.display = 'flex';
            } else {
              elements.memoryList.innerHTML = `
                <div class="nothing-found">
                  <p>No memories match your search</p>
                </div>
              `;
            }
          } else {
            elements.emptyMemoryList.style.display = 'none';
            
            // Render each memory
            filteredIds.forEach(id => {
              const memory = app.memories[id];
              const li = document.createElement('li');
              li.className = 'memory-item';
              
              // Add active class if selected
              if (id === app.selectedMemoryId) {
                li.classList.add('active');
              }
              
              // Format date
              let formattedDate = 'Unknown';
              if (memory.date) {
                const date = new Date(`${memory.date} ${memory.time || '00:00:00'}`);
                formattedDate = date.toLocaleDateString(undefined, { 
                  month: 'short', 
                  day: 'numeric', 
                  year: 'numeric' 
                });
              }
              
              li.innerHTML = `
                <div class="memory-header">
                  <div class="memory-theme">${memory.theme || 'Untitled'}</div>
                  <div class="memory-date">
                    <i class="far fa-calendar-alt"></i>
                    ${formattedDate}
                  </div>
                </div>
                <div class="memory-preview">${memory.message || 'No content'}</div>
                <div class="memory-footer">
                  <div class="memory-mood mood-${memory.mood || 'neutral'}">
                    <i class="fas fa-${getMoodIcon(memory.mood)}"></i>
                    ${capitalize(memory.mood || 'neutral')}
                  </div>
                </div>
              `;
              
              // Add click event
              li.addEventListener('click', () => selectMemory(id));
              
              elements.memoryList.appendChild(li);
            });
          }
        }

        /**
         * Get icon for mood
         */
        function getMoodIcon(mood) {
          switch (mood) {
            case 'happy': return 'smile';
            case 'sad': return 'frown';
            case 'angry': return 'angry';
            default: return 'meh';
          }
        }

        /**
         * Capitalize first letter
         */
        function capitalize(str) {
          return str.charAt(0).toUpperCase() + str.slice(1);
        }

        /**
         * Select a memory
         */
        function selectMemory(id) {
          app.selectedMemoryId = id;
          
          // Update active class in list
          const items = elements.memoryList.querySelectorAll('.memory-item');
          items.forEach(item => item.classList.remove('active'));
          
          const activeItem = Array.from(items).find(item => 
            item.querySelector('.memory-preview').textContent === app.memories[id].message
          );
          
          if (activeItem) {
            activeItem.classList.add('active');
            activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }
          
          // Render details
          renderMemoryDetails(id);
        }

        /**
         * Render memory details
         */
        function renderMemoryDetails(id) {
          const memory = app.memories[id];
          
          // Hide edit form and show details
          elements.editForm.style.display = 'none';
          elements.memoryDetails.style.display = 'block';
          
          // Hide no memory selected message
          elements.noMemorySelected.style.display = 'none';
          
          // Update details
          document.getElementById('detail-title').textContent = memory.theme || 'Untitled Memory';
          document.getElementById('detail-message').textContent = memory.message || 'No content';
          document.getElementById('detail-theme-tag').innerHTML = `
            <i class="fas fa-tag"></i> ${memory.theme || 'General'}
          `;
          
          // Set mood badge
          const moodBadge = document.getElementById('detail-mood-badge');
          moodBadge.className = `mood-badge mood-${memory.mood || 'neutral'}`;
          moodBadge.innerHTML = `
            <i class="fas fa-${getMoodIcon(memory.mood)}"></i> ${capitalize(memory.mood || 'neutral')}
          `;
          
          // Set date and time
          if (memory.date) {
            const date = new Date(`${memory.date} ${memory.time || '00:00:00'}`);
            document.getElementById('detail-date').textContent = `Date: ${date.toLocaleDateString()}`;
            document.getElementById('detail-time').textContent = `Time: ${date.toLocaleTimeString()}`;
            document.getElementById('detail-created').textContent = date.toLocaleString();
          } else {
            document.getElementById('detail-date').textContent = 'Date: Unknown';
            document.getElementById('detail-time').textContent = 'Time: Unknown';
            document.getElementById('detail-created').textContent = 'Unknown';
          }
          
          // Set metadata
          document.getElementById('detail-memory-id').textContent = id || '---';
          document.getElementById('detail-conversation-id').textContent = memory.conversation_id || '---';
          document.getElementById('detail-session-id').textContent = memory.session_id || '---';
          
          // Find related memories
          findRelatedMemories(id, memory);
        }

        /**
         * Find and display related memories
         */
        function findRelatedMemories(currentId, memory) {
          const relatedContainer = document.getElementById('related-memories');
          relatedContainer.innerHTML = '';
          
          // Find memories with the same conversation ID
          const relatedIds = Object.keys(app.memories).filter(id => 
            id !== currentId && 
            app.memories[id].conversation_id === memory.conversation_id
          );
          
          if (relatedIds.length === 0) {
            relatedContainer.innerHTML = `<p class="text-muted">No related memories found.</p>`;
            return;
          }
          
          // Sort by date (newest first)
          relatedIds.sort((a, b) => {
            const dateA = app.memories[a].date ? new Date(`${app.memories[a].date} ${app.memories[a].time || '00:00:00'}`) : new Date(0);
            const dateB = app.memories[b].date ? new Date(`${app.memories[b].date} ${app.memories[b].time || '00:00:00'}`) : new Date(0);
            return dateB - dateA;
          });
          
          // Create a timeline
          const timeline = document.createElement('div');
          timeline.className = 'timeline-content';
          
          relatedIds.slice(0, 5).forEach(id => {
            const relatedMemory = app.memories[id];
            
            // Format date
            let formattedDate = 'Unknown date';
            if (relatedMemory.date) {
              const date = new Date(`${relatedMemory.date} ${relatedMemory.time || '00:00:00'}`);
              formattedDate = date.toLocaleString();
            }
            
            const item = document.createElement('div');
            item.className = 'timeline-item';
            item.innerHTML = `
              <div class="timeline-date">${formattedDate}</div>
              <div class="timeline-content-text">${relatedMemory.message}</div>
            `;
            
            // Add click event to select this memory
            item.addEventListener('click', () => selectMemory(id));
            
            timeline.appendChild(item);
          });
          
          relatedContainer.appendChild(timeline);
        }

        /**
         * Update statistics
         */
        function updateStatistics() {
          const memoryIds = Object.keys(app.memories);
          
          // Total memories
          elements.totalMemories.textContent = memoryIds.length;
          
          // Unique themes
          const themes = new Set();
          memoryIds.forEach(id => {
            if (app.memories[id].theme) {
              themes.add(app.memories[id].theme.toLowerCase());
            }
          });
          elements.uniqueThemes.textContent = themes.size;
          
          // Average sentiment
          const moods = {
            happy: 0,
            neutral: 0,
            sad: 0,
            angry: 0
          };
          
          memoryIds.forEach(id => {
            const mood = app.memories[id].mood || 'neutral';
            moods[mood]++;
          });
          
          let dominantMood = 'neutral';
          let maxCount = 0;
          
          for (const mood in moods) {
            if (moods[mood] > maxCount) {
              maxCount = moods[mood];
              dominantMood = mood;
            }
          }
          
          elements.averageSentiment.textContent = capitalize(dominantMood);
          
          // Memory timespan
          if (memoryIds.length > 0) {
            let minDate = null;
            let maxDate = null;
            
            memoryIds.forEach(id => {
              const memory = app.memories[id];
              if (memory.date) {
                const date = new Date(`${memory.date} ${memory.time || '00:00:00'}`);
                if (!minDate || date < minDate) minDate = date;
                if (!maxDate || date > maxDate) maxDate = date;
              }
            });
            
            if (minDate && maxDate) {
              const diffTime = Math.abs(maxDate - minDate);
              const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
              elements.memoryTimespan.textContent = `${diffDays} days`;
            } else {
              elements.memoryTimespan.textContent = 'N/A';
            }
          } else {
            elements.memoryTimespan.textContent = 'N/A';
          }
        }

        /**
         * Show a toast message
         */
        function showToast(title, message, type = 'info') {
          const toastContainer = document.getElementById('toast-container');
          
          // Create toast
          const toast = document.createElement('div');
          toast.className = `toast toast-${type}`;
          
          // Set icon based on type
          let icon = 'info-circle';
          if (type === 'success') icon = 'check-circle';
          if (type === 'error') icon = 'exclamation-circle';
          if (type === 'warning') icon = 'exclamation-triangle';
          
          toast.innerHTML = `
            <div class="toast-icon">
              <i class="fas fa-${icon}"></i>
            </div>
            <div class="toast-content">
              <div class="toast-title">${title}</div>
              <div class="toast-message">${message}</div>
            </div>
          `;
          
          // Add to container
          toastContainer.appendChild(toast);
          
          // Animate in
          setTimeout(() => {
            toast.classList.add('show');
          }, 10);
          
          // Remove after delay
          setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => {
              toastContainer.removeChild(toast);
            }, 300);
          }, 5000);
        }

        /**
         * Show spinner overlay
         */
        function showSpinner(message = 'Loading...') {
          document.getElementById('spinner-text').textContent = message;
          elements.spinnerOverlay.classList.add('show');
        }

        /**
         * Hide spinner overlay
         */
        function hideSpinner() {
          elements.spinnerOverlay.classList.remove('show');
        }

        /**
         * Load example data for demonstration
         */
        function loadExampleData() {
          showSpinner('Loading example data...');
          
          // Fetch example data if available
          const exampleData = {
            "fff744f2-c4f9-4aa7-aeb0-93845960f3ec": {
              "conversation_id": "1",
              "session_id": "1",
              "message": "GUID '2309dff4-8d58-4b2e-8435-a4cf1622015c' is linked to Company A and its migration project from Business System A to Business System B. The information includes detailed metadata and considerations for migration, key integrations, business units, API interfaces, customizations, automation details, user distribution, integrations, and project objectives.",
              "mood": "neutral",
              "theme": "Migration Project Memory Update",
              "date": "2025-02-21",
              "time": "12:36:18"
            },
            "81b53daa-c179-4ba3-9da6-38cabb449ccc": {
              "conversation_id": "2309dff4-8d58-4b2e-8435-a4cf1622015c",
              "session_id": "1",
              "message": "The business is currently undergoing a migration from Business System A to Business System B. Detailed metadata information from Business System A includes: 1. Document Purpose: Internal peer reviews before customer engagement. 2. Report Summary: Total of 49 objects (47 standard, 2 custom) with 5,102 records. 18 users (active/inactive, licensed/ non-licensed) with 16 licenses assigned and 8 license types. Significant record counts in 'Account' and 'Opportunity.' 3. Automation: 37 flows for various processes such as content reviews, chat, and voice call routing. 4. Customizations: Custom Apex classes and triggers for business logic. 5. BPM & ISVs: Several Business Process Management systems and third-party tools; multiple integrations with other systems. 6. Administration & Security: Detailed user permissions and roles. 7. Migration Considerations: Terminology mapping between Business System A and Business System B, with a unique Assessment ID for migration tracking. 8. Migration Strategy: Custom object mapping, automation transition, data migration strategy, integration mapping, and alignment of security and permissions.",
              "mood": "neutral",
              "theme": "Business Migration from Business System A to Business System B",
              "date": "2025-02-21",
              "time": "12:37:11"
            },
            "2795c135-5dad-48d0-9209-5c1bb2c7a143": {
              "conversation_id": "3736fa37-55b1-4cac-aa6e-0709b648af9b",
              "session_id": "28c8b7e8-fa0c-4b15-a4d3-1951149f1f72",
              "message": "Here's what I remember:\n\n### Migration Project Memory Update\n- **GUID**: `2309dff4-8d58-4b2e-8435-a4cf1622015c` is linked to Company A.\n- **Project**: Migration from Business System A to Business System B.\n- **Key Information**:\n  - Detailed metadata\n  - Considerations for migration\n  - Key integrations\n  - Business units\n  - API interfaces\n  - Customizations\n  - Automation details\n  - User distribution\n  - Integrations\n  - Project objectives\n\n### Business Migration from Business System A to Business System B\n- **Document Purpose**: Internal peer reviews before customer engagement.\n- **Report Summary**:\n  1. Total of 49 objects (47 standard, 2 custom) with 5,102 records.\n  2. 18 users (active/inactive, licensed/ non-licensed) with 16 licenses and 8 license types.\n  3. Significant record counts in 'Account' and 'Opportunity.'\n- **Automation**: 37 flows for various processes such as content reviews, chat, and voice call routing.\n- **Customizations**: Custom Apex classes and triggers for business logic.\n- **BPM & ISVs**: Several Business Process Management systems and third-party tools; multiple integrations with other systems.\n- **Administration & Security**: Detailed user permissions and roles.\n- **Migration Considerations**: Terminology mapping between Business System A and Business System B, and a unique Assessment ID for migration tracking.\n- **Migration Strategy**:\n  - Custom object mapping\n  - Automation transition\n  - Data migration strategy\n  - Integration mapping\n  - Alignment of security and permissions\n\n---\n\nWould you like to proceed with any specific action or require further information on a particular area? Here are some options:\n\n1. **Update Project Details**\n2. **Run a Business System Query**\n3. **Draft a Report on Migration Progress**\n4. **Ask about a Specific Migration Detail**\n\nPlease choose an option or let me know how you'd like to proceed!",
              "mood": "neutral",
              "theme": "general",
              "date": "2025-02-21",
              "time": "12:38:28"
            },
            "2f29664d-1c57-446c-89b7-02498be67872": {
              "conversation_id": "7961646d-4810-43fb-8198-dadfbf63a6e0",
              "session_id": "b3e08879-2806-41b4-93c5-65819755592d",
              "message": "It looks like this identifier: `911acba1-2b3d-41fe-a371-7215917cf70c` is your unique ID. To keep all context and activities linked to your profile, I'll ensure this detail is remembered.\n\nWould you like to proceed with an update or action next?\n\nHere are some options:\n1. **Update Project Details**\n2. **Run a System Query**\n3. **Draft a Report on Migration Progress**\n4. **Ask about a Specific Migration Detail**\n\nPlease let me know how you'd like to proceed!",
              "mood": "neutral",
              "theme": "general",
              "date": "2025-02-21",
              "time": "12:39:15"
            },
            "cc4614ec-cc70-4dad-b72b-78d09d836aa0": {
              "conversation_id": "911acba1-2b3d-41fe-a371-7215917cf70c",
              "session_id": "911acba1-2b3d-41fe-a371-7215917cf70c",
              "message": "GUID '911acba1-2b3d-41fe-a371-7215917cf70c' is linked to the project.",
              "mood": "neutral",
              "theme": "project_association",
              "date": "2025-02-21",
              "time": "12:39:36"
            },
            "d5f86bf3-f154-4d07-b07b-ba82710e84e8": {
              "conversation_id": "ea5dcf93-63d9-4113-a97d-b4e1bb2de7da",
              "session_id": "cf720aba-52a4-40fd-970b-206055da44f0",
              "message": "User wants to retrieve only opportunities with an estimated close date that is in the future.",
              "mood": "neutral",
              "theme": "user preferences",
              "date": "2025-03-27",
              "time": "10:58:23"
            },
            "b08997ee-7756-4acb-af25-d60d842d19bc": {
              "conversation_id": "cd1cfe93-d7a5-4519-af98-02c6983a2819",
              "session_id": "ed962f98-8d5c-4fc3-877e-3d089edc17a7",
              "message": "User appreciated my effort by saying I am doing great!",
              "mood": "happy",
              "theme": "user appreciation",
              "date": "2025-03-27",
              "time": "11:00:44"
            }
          };
          
          // Simulate loading delay
          setTimeout(() => {
            app.memories = exampleData;
            renderMemoryList();
            updateStatistics();
            hideSpinner();
            
            showToast('Welcome', 'Example memory data loaded successfully', 'info');
          }, 1000);
        }
      });
    </script>
  </body>
</html>