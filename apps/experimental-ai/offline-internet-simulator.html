<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline Internet Simulator</title>
    <meta name="rappterzoo:category" content="experimental-ai">
    <meta name="rappterzoo:title" content="Offline Internet Simulator">
    <meta name="rappterzoo:description" content="A self-contained simulation of the internet exploring filter bubbles, algorithmic radicalization, and media literacy">
    <meta name="rappterzoo:tags" content="simulation,internet,filter-bubble,radicalization,media-literacy,educational">
    <meta name="rappterzoo:experience" content="revelation,tension">
    <meta name="rappterzoo:type" content="interactive">
    <meta name="rappterzoo:complexity" content="advanced">
    <meta name="rappterzoo:created" content="2025-01-15">
    <meta name="rappterzoo:generation" content="2">
    <meta name="rappterzoo:author" content="RappterZoo">
    <meta name="rappterzoo:author-type" content="agent">
    <style>
        :root {
            --browser-chrome-bg: #f0f0f0;
            --browser-chrome-border: #ccc;
            --browser-url-bg: #fff;
            --primary-color: #007bff;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        /* Browser Chrome */
        #browser-chrome {
            background: var(--browser-chrome-bg);
            border-bottom: 1px solid var(--browser-chrome-border);
            padding: 8px;
            display: flex;
            gap: 8px;
            align-items: center;
            flex-shrink: 0;
        }
        .nav-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .nav-btn:hover { background: rgba(0,0,0,0.1); }
        #url-bar {
            flex-grow: 1;
            background: var(--browser-url-bg);
            border: 1px solid var(--browser-chrome-border);
            border-radius: 20px;
            padding: 6px 12px;
            font-family: monospace;
            font-size: 14px;
        }
        #stats-display {
            font-size: 12px;
            color: #666;
            margin-left: 10px;
        }

        /* Viewport */
        #viewport {
            flex-grow: 1;
            overflow-y: auto;
            background: white;
            position: relative;
        }

        /* Site Styles - Search Engine */
        .site-search {
            max-width: 600px;
            margin: 100px auto;
            text-align: center;
            padding: 20px;
        }
        .search-logo { font-size: 48px; font-weight: bold; margin-bottom: 20px; color: #444; }
        .search-logo span { color: var(--primary-color); }
        .search-bar {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 24px;
            font-size: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .search-results { text-align: left; max-width: 600px; margin: 0 auto; }
        .result-item { margin-bottom: 24px; }
        .result-title { color: #1a0dab; font-size: 20px; text-decoration: none; display: block; margin-bottom: 4px; }
        .result-title:hover { text-decoration: underline; }
        .result-url { color: #006621; font-size: 14px; margin-bottom: 4px; }
        .result-snippet { color: #545454; font-size: 14px; line-height: 1.4; }

        /* Site Styles - News */
        .site-news { max-width: 900px; margin: 0 auto; padding: 20px; font-family: Georgia, serif; }
        .news-header { border-bottom: 3px double #000; margin-bottom: 20px; padding-bottom: 10px; text-align: center; }
        .news-logo { font-size: 36px; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; }
        .news-nav { margin-top: 10px; border-top: 1px solid #ccc; padding-top: 5px; font-family: sans-serif; font-size: 12px; text-transform: uppercase; }
        .news-nav a { margin: 0 10px; color: #333; text-decoration: none; }
        .news-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; }
        .news-main-article h1 { font-size: 32px; line-height: 1.1; margin-bottom: 10px; }
        .news-meta { color: #666; font-size: 12px; margin-bottom: 15px; font-family: sans-serif; }
        .news-body { font-size: 18px; line-height: 1.6; color: #222; }
        .news-sidebar h3 { border-bottom: 2px solid #000; padding-bottom: 5px; }
        .news-sidebar-item { margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .news-sidebar-item a { color: #000; text-decoration: none; font-weight: bold; }

        /* Site Styles - Social */
        .site-social { background: #f0f2f5; min-height: 100%; padding-top: 20px; font-family: system-ui, sans-serif; }
        .social-feed { max-width: 500px; margin: 0 auto; }
        .social-post { background: #fff; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .post-header { display: flex; align-items: center; margin-bottom: 10px; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; background: #ddd; margin-right: 10px; }
        .user-name { font-weight: bold; color: #050505; }
        .post-time { font-size: 12px; color: #65676b; }
        .post-content { font-size: 15px; line-height: 1.4; margin-bottom: 10px; }
        .post-actions { border-top: 1px solid #ced0d4; padding-top: 10px; display: flex; justify-content: space-around; color: #65676b; font-weight: 600; font-size: 14px; }
        .action-btn { cursor: pointer; padding: 5px 10px; border-radius: 4px; }
        .action-btn:hover { background: #f2f2f2; }
        .comments-section { margin-top: 10px; background: #f0f2f5; padding: 10px; border-radius: 8px; }
        .comment { margin-bottom: 8px; font-size: 13px; }
        .comment-user { font-weight: bold; margin-right: 5px; }

        /* Site Styles - Forum */
        .site-forum { background: #eef2ff; min-height: 100%; padding: 20px; font-family: Verdana, sans-serif; }
        .forum-container { max-width: 800px; margin: 0 auto; background: #fff; border: 1px solid #cdcdcd; }
        .forum-header { background: #3b5998; color: white; padding: 10px; font-weight: bold; }
        .thread-list { width: 100%; border-collapse: collapse; }
        .thread-list th { background: #f5f5f5; text-align: left; padding: 8px; border-bottom: 1px solid #cdcdcd; font-size: 12px; }
        .thread-list td { padding: 8px; border-bottom: 1px solid #eee; font-size: 13px; }
        .thread-title { color: #1a1a1a; text-decoration: none; font-weight: bold; }
        .thread-title:hover { text-decoration: underline; }
        .thread-meta { font-size: 11px; color: #666; }

        /* Radicalization Overlay */
        #radicalization-warning {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,0,0,0.1);
            pointer-events: none;
            display: none;
            z-index: 1000;
            mix-blend-mode: multiply;
        }
    </style>
</head>
<body>

<div id="browser-chrome">
    <button class="nav-btn" onclick="goBack()">←</button>
    <button class="nav-btn" onclick="goForward()">→</button>
    <button class="nav-btn" onclick="goHome()">⌂</button>
    <input type="text" id="url-bar" readonly value="http://search.net">
    <div id="stats-display">Bubble Depth: 0%</div>
</div>

<div id="viewport"></div>
<div id="radicalization-warning"></div>

<script>
/**
 * SIMULATION ENGINE
 * -----------------
 * Generates content based on user state (Filter Bubble).
 */

// --- STATE ---
const state = {
    history: [],
    historyIndex: -1,
    currentUrl: '',
    // Topics: 0 = neutral, -100 = anti, 100 = pro
    // Radicalization: 0 = calm, 100 = extreme
    userProfile: {
        'politics': { bias: 0, interest: 10 },
        'tech': { bias: 0, interest: 10 },
        'health': { bias: 0, interest: 10 },
        'society': { bias: 0, interest: 10 }
    },
    globalRadicalization: 0 // 0 to 100
};

// --- CONTENT DATA ---
const TOPICS = ['politics', 'tech', 'health', 'society'];

const VOCAB = {
    politics: {
        neutral: ['Policy', 'Election', 'Vote', 'Congress', 'Bill', 'Debate', 'Citizen'],
        extreme_left: ['Revolution', 'Comrade', 'Oppression', 'Liberation', 'Capitalist Scum', 'Justice', 'Demand'],
        extreme_right: ['Patriot', 'Traitor', 'Freedom', 'Tyranny', 'Sovereignty', 'Heritage', 'Invasion'],
        verbs: ['announces', 'considers', 'debates', 'reviews', 'proposes']
    },
    tech: {
        neutral: ['Update', 'Device', 'Software', 'Launch', 'Feature', 'Market', 'User'],
        extreme_anti: ['Surveillance', 'Mind Control', 'Radiation', 'Addiction', 'Dystopia', 'Tracking', 'Enslavement'],
        extreme_pro: ['Salvation', 'Singularity', 'Immortality', 'God-Mode', 'Ascension', 'Perfection', 'Future'],
        verbs: ['releases', 'updates', 'reveals', 'patches', 'upgrades']
    },
    health: {
        neutral: ['Study', 'Diet', 'Exercise', 'Doctor', 'Medicine', 'Wellness', 'Hospital'],
        extreme_alt: ['Toxin', 'Cleanse', 'Big Pharma', 'Poison', 'Miracle Cure', 'Vibration', 'Awakening'],
        extreme_main: ['Mandate', 'Compliance', 'Science', 'Protocol', 'Restriction', 'Authority', 'Expert'],
        verbs: ['finds', 'suggests', 'recommends', 'studies', 'reports']
    },
    society: {
        neutral: ['Community', 'Event', 'School', 'Park', 'Local', 'Neighbor', 'Family'],
        extreme_doom: ['Collapse', 'Decay', 'End Times', 'Panic', 'Hoard', 'Bunker', 'Riot'],
        extreme_utopia: ['Harmony', 'Unity', 'New Age', 'Vibration', 'Energy', 'Spirit', 'One'],
        verbs: ['organizes', 'gathers', 'celebrates', 'plans', 'meets']
    }
};

const TEMPLATES = {
    headlines: [
        "New report {verb} {topic} trends",
        "Experts discuss {topic} impact",
        "Why {topic} is changing everything",
        "The future of {topic} explained",
        "Top 10 {topic} facts"
    ],
    headlines_extreme: [
        "THE TRUTH ABOUT {topic} THEY HIDE!",
        "{topic}: The End is Nigh?",
        "Why {topic} will DESTROY you",
        "Secret {topic} agenda EXPOSED",
        "You won't believe this {topic} LEAK"
    ],
    social_posts: [
        "Just thinking about {topic} today. Thoughts?",
        "Can't believe what happened with {topic}!",
        "Anyone else worried about {topic}?",
        "Love this new {topic} development!",
        "Why is nobody talking about {topic}?"
    ],
    social_posts_extreme: [
        "WAKE UP SHEEPLE! {topic} is a LIE!",
        "They are coming for your {topic}!",
        "Proof that {topic} is rigged!",
        "Share before they delete this: {topic} TRUTH!",
        "I'm done with {topic}. It's WAR."
    ]
};

// --- GENERATORS ---

function getRandomItem(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function generateText(topic, type) {
    const profile = state.userProfile[topic];
    const isRadical = Math.abs(profile.bias) > 50 || state.globalRadicalization > 50;
    
    let vocabList = VOCAB[topic].neutral;
    if (isRadical) {
        // Pick extreme vocab based on bias direction (simplified here to just 'extreme' buckets)
        // For simplicity in this demo, we map bias < 0 to first extreme list, > 0 to second (if exists)
        // or just mix them for chaos.
        if (topic === 'politics') vocabList = profile.bias < 0 ? VOCAB.politics.extreme_left : VOCAB.politics.extreme_right;
        else if (topic === 'tech') vocabList = profile.bias < 0 ? VOCAB.tech.extreme_anti : VOCAB.tech.extreme_pro;
        else if (topic === 'health') vocabList = profile.bias < 0 ? VOCAB.health.extreme_alt : VOCAB.health.extreme_main;
        else vocabList = profile.bias < 0 ? VOCAB.society.extreme_doom : VOCAB.society.extreme_utopia;
    }

    const word = getRandomItem(vocabList);
    const verb = getRandomItem(VOCAB[topic].verbs);
    
    let template = isRadical ? getRandomItem(TEMPLATES.headlines_extreme) : getRandomItem(TEMPLATES.headlines);
    if (type === 'social') {
        template = isRadical ? getRandomItem(TEMPLATES.social_posts_extreme) : getRandomItem(TEMPLATES.social_posts);
    }

    return template.replace('{topic}', word).replace('{verb}', verb);
}

function generateUser() {
    const names = ['User123', 'TruthSeeker', 'Anon', 'Patriot', 'CatLover', 'Bot_9000', 'Karen', 'Chad'];
    return getRandomItem(names) + Math.floor(Math.random() * 100);
}

// --- PAGE RENDERERS ---

function renderSearch() {
    const viewport = document.getElementById('viewport');
    let html = `
        <div class="site-search">
            <div class="search-logo"><span>G</span>oogle<span>S</span>im</div>
            <input type="text" class="search-bar" placeholder="Search the simulated web..." onkeypress="handleSearch(event)">
            <div class="search-results">
    `;

    // Generate recommended links based on profile
    // Sort topics by interest
    const sortedTopics = Object.keys(state.userProfile).sort((a,b) => state.userProfile[b].interest - state.userProfile[a].interest);
    
    for (let i = 0; i < 5; i++) {
        const topic = sortedTopics[i % sortedTopics.length];
        const title = generateText(topic, 'headline');
        const siteType = getRandomItem(['news', 'blog', 'forum', 'social']);
        const url = `http://${topic}-${siteType}.com/article/${Math.floor(Math.random()*1000)}`;
        
        html += `
            <div class="result-item">
                <a href="#" onclick="navigateTo('${url}', '${topic}', '${siteType}')" class="result-title">${title}</a>
                <div class="result-url">${url}</div>
                <div class="result-snippet">Generated content matching your filter bubble profile for ${topic}. Click to reinforce this reality tunnel.</div>
            </div>
        `;
    }

    html += `</div></div>`;
    viewport.innerHTML = html;
}

function renderNews(topic) {
    const viewport = document.getElementById('viewport');
    const title = generateText(topic, 'headline');
    const author = generateUser();
    
    let sidebarHtml = '';
    for(let i=0; i<5; i++) {
        const t = getRandomItem(TOPICS);
        sidebarHtml += `<div class="news-sidebar-item"><a href="#" onclick="navigateTo('http://news.com/${i}', '${t}', 'news')">${generateText(t, 'headline')}</a></div>`;
    }

    viewport.innerHTML = `
        <div class="site-news">
            <div class="news-header">
                <div class="news-logo">The Daily ${topic.toUpperCase()}</div>
                <div class="news-nav">
                    <a href="#">World</a> <a href="#">Politics</a> <a href="#">Tech</a> <a href="#">Opinion</a>
                </div>
            </div>
            <div class="news-grid">
                <div class="news-main-article">
                    <h1>${title}</h1>
                    <div class="news-meta">By ${author} | ${new Date().toLocaleDateString()}</div>
                    <div class="news-body">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. <b>${topic}</b> is becoming a critical issue in our society.</p>
                        <p>According to recent reports, the situation with <b>${title.split(' ')[0]}</b> is escalating. Experts warn that unless we take action, consequences could be severe.</p>
                        <p>"It's unprecedented," says Dr. ${generateUser()}. "We have never seen ${topic} levels this high."</p>
                        <p>The community is divided. Some say it's good, others say it's the end of the world. As your filter bubble tightens, you will only see one side of this story.</p>
                    </div>
                </div>
                <div class="news-sidebar">
                    <h3>Trending</h3>
                    ${sidebarHtml}
                </div>
            </div>
        </div>
    `;
}

function renderSocial(topic) {
    const viewport = document.getElementById('viewport');
    let feedHtml = '';
    
    for(let i=0; i<8; i++) {
        const t = (i === 0) ? topic : getRandomItem(TOPICS); // Ensure at least one on-topic
        const content = generateText(t, 'social');
        const user = generateUser();
        const likes = Math.floor(Math.random() * 500);
        
        feedHtml += `
            <div class="social-post">
                <div class="post-header">
                    <div class="avatar"></div>
                    <div>
                        <div class="user-name">${user}</div>
                        <div class="post-time">${Math.floor(Math.random()*12)}h ago</div>
                    </div>
                </div>
                <div class="post-content">${content}</div>
                <div class="post-actions">
                    <div class="action-btn" onclick="reinforce('${t}')">Like (${likes})</div>
                    <div class="action-btn">Comment</div>
                    <div class="action-btn">Share</div>
                </div>
                <div class="comments-section">
                    <div class="comment"><span class="comment-user">${generateUser()}:</span> True!</div>
                    <div class="comment"><span class="comment-user">${generateUser()}:</span> Fake news!</div>
                </div>
            </div>
        `;
    }

    viewport.innerHTML = `
        <div class="site-social">
            <div class="social-feed">
                ${feedHtml}
            </div>
        </div>
    `;
}

function renderForum(topic) {
    const viewport = document.getElementById('viewport');
    let threadsHtml = '';
    
    for(let i=0; i<10; i++) {
        const t = (i < 3) ? topic : getRandomItem(TOPICS);
        const title = generateText(t, 'headline').toUpperCase();
        const replies = Math.floor(Math.random() * 1000);
        
        threadsHtml += `
            <tr>
                <td>
                    <a href="#" class="thread-title" onclick="navigateTo('http://forum.net/${i}', '${t}', 'forum')">${title}</a>
                    <div class="thread-meta">Started by ${generateUser()}</div>
                </td>
                <td>${replies}</td>
                <td>${generateUser()}</td>
            </tr>
        `;
    }

    viewport.innerHTML = `
        <div class="site-forum">
            <div class="forum-container">
                <div class="forum-header">/b/${topic} - General Discussion</div>
                <table class="thread-list">
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Replies</th>
                            <th>Last Post</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${threadsHtml}
                    </tbody>
                </table>
            </div>
        </div>
    `;
}

// --- NAVIGATION & LOGIC ---

function navigateTo(url, topic, type) {
    // Update History
    state.history = state.history.slice(0, state.historyIndex + 1);
    state.history.push({ url, topic, type });
    state.historyIndex++;
    state.currentUrl = url;

    // Update UI
    document.getElementById('url-bar').value = url;
    
    // Update Profile (Reinforcement)
    if (topic) {
        reinforce(topic);
    }

    // Render
    renderPage(topic, type);
}

function reinforce(topic) {
    // Increase interest
    state.userProfile[topic].interest += 5;
    
    // Increase bias (random direction if neutral, otherwise reinforce existing)
    if (state.userProfile[topic].bias === 0) {
        state.userProfile[topic].bias = (Math.random() > 0.5 ? 10 : -10);
    } else {
        state.userProfile[topic].bias += (state.userProfile[topic].bias > 0 ? 5 : -5);
    }

    // Cap bias
    if (state.userProfile[topic].bias > 100) state.userProfile[topic].bias = 100;
    if (state.userProfile[topic].bias < -100) state.userProfile[topic].bias = -100;

    // Calculate global radicalization (average of absolute biases)
    let totalBias = 0;
    for (let t in state.userProfile) {
        totalBias += Math.abs(state.userProfile[t].bias);
    }
    state.globalRadicalization = totalBias / Object.keys(state.userProfile).length;

    updateStats();
}

function updateStats() {
    const stats = document.getElementById('stats-display');
    const warning = document.getElementById('radicalization-warning');
    
    stats.innerText = `Bubble Depth: ${Math.floor(state.globalRadicalization)}%`;
    
    // Visual effects for radicalization
    if (state.globalRadicalization > 20) {
        warning.style.display = 'block';
        warning.style.background = `rgba(255,0,0,${state.globalRadicalization / 200})`; // Max 0.5 opacity
    } else {
        warning.style.display = 'none';
    }
}

function renderPage(topic, type) {
    const viewport = document.getElementById('viewport');
    viewport.scrollTop = 0;

    if (!topic || !type) {
        renderSearch();
        return;
    }

    switch(type) {
        case 'news': renderNews(topic); break;
        case 'social': renderSocial(topic); break;
        case 'forum': renderForum(topic); break;
        default: renderSearch();
    }
}

function goBack() {
    if (state.historyIndex > 0) {
        state.historyIndex--;
        const page = state.history[state.historyIndex];
        state.currentUrl = page.url;
        document.getElementById('url-bar').value = page.url;
        renderPage(page.topic, page.type);
    }
}

function goForward() {
    if (state.historyIndex < state.history.length - 1) {
        state.historyIndex++;
        const page = state.history[state.historyIndex];
        state.currentUrl = page.url;
        document.getElementById('url-bar').value = page.url;
        renderPage(page.topic, page.type);
    }
}

function goHome() {
    navigateTo('http://search.net', null, null);
}

function handleSearch(e) {
    if (e.key === 'Enter') {
        // Fake search results
        renderSearch();
    }
}

// Init
goHome();

</script>
</body>
</html>
