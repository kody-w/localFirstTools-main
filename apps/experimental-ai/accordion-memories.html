<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accordion Memories</title>
    <meta name="description" content="Your life story unfolds as an infinite accordion book where folding pages causes memories to influence each other">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #1a1520 0%, #2a2030 100%); min-height: 100vh; font-family: Georgia, serif; color: #d4c4a0; overflow-x: hidden; }
        #accordion {
            display: flex; align-items: center; justify-content: center;
            min-height: 100vh; padding: 50px; perspective: 1000px;
        }
        .memory-page {
            width: 200px; min-height: 300px; background: linear-gradient(180deg, #f4e4c4 0%, #e4d4b4 100%);
            margin: 0 -20px; padding: 20px; transform-style: preserve-3d;
            transition: transform 0.5s, margin 0.3s; cursor: pointer;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.3); border-radius: 3px; position: relative;
        }
        .memory-page:hover { transform: rotateY(-10deg); margin: 0 10px; z-index: 10; }
        .memory-page.expanded { margin: 0 30px; transform: rotateY(0deg) scale(1.1); }
        .memory-title { font-size: 14px; color: #4a3a2a; margin-bottom: 10px; font-weight: bold; }
        .memory-date { font-size: 10px; color: #8a7a6a; margin-bottom: 15px; }
        .memory-content { font-size: 12px; color: #5a4a3a; line-height: 1.6; }
        .memory-emotion { position: absolute; bottom: 10px; right: 10px; font-size: 20px; }
        #controls {
            position: fixed; top: 20px; left: 20px; background: rgba(30,20,40,0.9);
            padding: 20px; border-radius: 10px; border: 1px solid rgba(200,180,140,0.3); z-index: 100;
        }
        button {
            display: block; width: 100%; padding: 10px; margin: 8px 0;
            background: rgba(100,80,60,0.4); border: 1px solid rgba(200,180,140,0.4);
            color: #d4c4a0; cursor: pointer; border-radius: 8px; font-family: Georgia, serif;
        }
        input, textarea {
            width: 100%; padding: 8px; margin: 5px 0; background: rgba(60,50,40,0.5);
            border: 1px solid rgba(200,180,140,0.3); color: #d4c4a0; border-radius: 5px;
            font-family: Georgia, serif;
        }
        #info { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 12px; opacity: 0.5; }
        .fold-crease {
            position: absolute; left: 0; top: 0; bottom: 0; width: 3px;
            background: linear-gradient(90deg, rgba(0,0,0,0.2), transparent);
        }
        .hidden-memory {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(255,250,240,0.95); padding: 15px; border-radius: 5px;
            font-size: 11px; color: #6a5a4a; opacity: 0; transition: opacity 0.5s;
            pointer-events: none; text-align: center; max-width: 180px;
        }
        .memory-page.expanded .hidden-memory { opacity: 1; }
    </style>
</head>
<body>
    <div id="controls">
        <h3 style="margin-bottom:15px;color:#e4d4b4">Add Memory</h3>
        <input type="text" id="title-input" placeholder="Memory title...">
        <input type="date" id="date-input">
        <textarea id="content-input" rows="3" placeholder="What happened..."></textarea>
        <select id="emotion-select">
            <option value="joy">Joy</option>
            <option value="love">Love</option>
            <option value="peace">Peace</option>
            <option value="sadness">Sadness</option>
            <option value="wonder">Wonder</option>
        </select>
        <button id="add-btn">Add to Accordion</button>
        <button id="export-btn">Export Memories</button>
        <button id="import-btn">Import Memories</button>
        <input type="file" id="import-file" accept=".json" style="display:none">
    </div>
    <div id="accordion"></div>
    <div id="info">Click pages to expand | Drag to reorder | Folded pages influence each other</div>
    <script>
        const emotions = { joy: 'sun', love: 'heart', peace: 'dove', sadness: 'rain', wonder: 'star' };
        const emojis = { joy: 'â˜€ï¸', love: 'â¤ï¸', peace: 'ðŸ•Šï¸', sadness: 'ðŸŒ§ï¸', wonder: 'âœ¨' };
        let memories = [];

        function loadMemories() {
            const saved = localStorage.getItem('accordionMemories');
            if (saved) memories = JSON.parse(saved);
            else {
                memories = [
                    { id: 1, title: 'First Light', date: '2000-01-01', content: 'The beginning of everything. A moment of pure potential.', emotion: 'wonder' },
                    { id: 2, title: 'Learning to Walk', date: '2001-06-15', content: 'Falling down, getting up. The first steps toward independence.', emotion: 'joy' },
                    { id: 3, title: 'First Friend', date: '2005-09-01', content: 'A stranger became someone who understood. Connection formed.', emotion: 'love' }
                ];
            }
        }

        function saveMemories() {
            localStorage.setItem('accordionMemories', JSON.stringify(memories));
        }

        function generateHiddenMemory(mem1, mem2) {
            const connections = [
                'Between these moments, time folded into itself...',
                'Here lies the space where one memory became another...',
                'The echo of what was meets the shadow of what came...',
                'In this crease, the past whispers to itself...',
                'Two moments touch, creating something unseen...'
            ];
            return connections[Math.floor(Math.random() * connections.length)];
        }

        function renderAccordion() {
            const container = document.getElementById('accordion');
            container.innerHTML = '';
            memories.forEach((mem, idx) => {
                const page = document.createElement('div');
                page.className = 'memory-page';
                page.dataset.id = mem.id;
                const hidden = idx > 0 ? generateHiddenMemory(memories[idx-1], mem) : '';
                page.innerHTML = 
                    '<div class="fold-crease"></div>' +
                    '<div class="memory-title">' + mem.title + '</div>' +
                    '<div class="memory-date">' + mem.date + '</div>' +
                    '<div class="memory-content">' + mem.content + '</div>' +
                    '<div class="memory-emotion">' + emojis[mem.emotion] + '</div>' +
                    (hidden ? '<div class="hidden-memory">' + hidden + '</div>' : '');
                page.onclick = () => {
                    document.querySelectorAll('.memory-page').forEach(p => p.classList.remove('expanded'));
                    page.classList.add('expanded');
                };
                container.appendChild(page);
            });
        }

        document.getElementById('add-btn').onclick = () => {
            const title = document.getElementById('title-input').value || 'Untitled Memory';
            const date = document.getElementById('date-input').value || new Date().toISOString().split('T')[0];
            const content = document.getElementById('content-input').value || 'A moment in time...';
            const emotion = document.getElementById('emotion-select').value;
            memories.push({ id: Date.now(), title, date, content, emotion });
            memories.sort((a, b) => new Date(a.date) - new Date(b.date));
            saveMemories();
            renderAccordion();
            document.getElementById('title-input').value = '';
            document.getElementById('content-input').value = '';
        };

        document.getElementById('export-btn').onclick = () => {
            const blob = new Blob([JSON.stringify(memories, null, 2)], {type: 'application/json'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'accordion-memories.json';
            a.click();
        };

        document.getElementById('import-btn').onclick = () => document.getElementById('import-file').click();
        document.getElementById('import-file').onchange = e => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = ev => {
                    memories = JSON.parse(ev.target.result);
                    saveMemories();
                    renderAccordion();
                };
                reader.readAsText(file);
            }
        };

        loadMemories();
        renderAccordion();
    </script>
</body>
</html>