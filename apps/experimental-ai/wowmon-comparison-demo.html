<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WowMon Comparison Tool Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: monospace;
            background: #2d2d2d;
            color: #9bbc0f;
            padding: 20px;
        }

        :root {
            --gb-darkest: #0f380f;
            --gb-dark: #306230;
            --gb-light: #8bac0f;
            --gb-lightest: #9bbc0f;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--gb-lightest);
            padding: 30px;
            border-radius: 10px;
            color: var(--gb-darkest);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--gb-darkest);
        }

        .demo-section {
            background: var(--gb-light);
            border: 3px solid var(--gb-darkest);
            padding: 20px;
            margin: 20px 0;
        }

        .demo-section h2 {
            margin-bottom: 15px;
            color: var(--gb-darkest);
        }

        .creature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .creature-item {
            background: var(--gb-lightest);
            border: 2px solid var(--gb-darkest);
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .creature-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .creature-item h3 {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .creature-types {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .type-badge {
            background: var(--gb-darkest);
            color: var(--gb-lightest);
            padding: 3px 8px;
            font-size: 10px;
            text-transform: uppercase;
        }

        .creature-stats {
            font-size: 11px;
            line-height: 1.6;
        }

        .add-compare-btn {
            width: 100%;
            background: var(--gb-dark);
            color: var(--gb-lightest);
            border: 2px solid var(--gb-darkest);
            padding: 8px;
            margin-top: 10px;
            cursor: pointer;
            font-family: monospace;
            font-size: 12px;
        }

        .add-compare-btn:hover {
            background: var(--gb-darkest);
        }

        .add-compare-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .instructions {
            background: var(--gb-lightest);
            border: 2px solid var(--gb-darkest);
            padding: 15px;
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.8;
        }

        .instructions strong {
            color: var(--gb-darkest);
        }

        .live-region {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: var(--gb-dark);
            color: var(--gb-lightest);
            border: 2px solid var(--gb-darkest);
            padding: 10px 20px;
            cursor: pointer;
            font-family: monospace;
            font-size: 13px;
        }

        .quick-btn:hover {
            background: var(--gb-darkest);
        }

        code {
            background: var(--gb-darkest);
            color: var(--gb-lightest);
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>WowMon Comparison Tool - Interactive Demo</h1>

        <div class="instructions">
            <strong>Instructions:</strong><br>
            1. Click "Add to Compare" on any creature card below (2-4 recommended)<br>
            2. The comparison panel will slide in from the right<br>
            3. View detailed side-by-side comparisons, battle predictions, and more<br>
            4. Try the Quick Actions for pre-configured comparisons<br>
            5. Use the Share button to get a shareable URL
        </div>

        <div class="quick-actions">
            <button class="quick-btn" onclick="compareStarters()">Compare Starters</button>
            <button class="quick-btn" onclick="compareEvolutions()">Compare Evolution Chain</button>
            <button class="quick-btn" onclick="compareTypes()">Compare Different Types</button>
            <button class="quick-btn" onclick="clearComparison()">Clear All</button>
        </div>

        <div class="demo-section">
            <h2>Available Creatures</h2>
            <div class="creature-grid" id="creature-grid"></div>
        </div>

        <div class="demo-section">
            <h2>API Examples</h2>
            <p style="margin-bottom: 15px;">Try these in the browser console:</p>
            <div style="background: var(--gb-lightest); padding: 15px; font-size: 12px; line-height: 1.8;">
                <code>comparisonTool.addToComparison('murloc')</code> - Add Murloc to comparison<br>
                <code>comparisonTool.togglePanel()</code> - Toggle comparison panel<br>
                <code>comparisonTool.shareComparison()</code> - Get shareable URL<br>
                <code>comparisonTool.clearAll()</code> - Clear all comparisons
            </div>
        </div>
    </div>

    <!-- Live region for screen reader announcements -->
    <div class="live-region" role="status" aria-live="polite" aria-atomic="true"></div>

    <script>
        // Mock game engine with WowMon data
        const mockGameEngine = {
            cartridge: {
                creatures: {
                    "murloc": {
                        id: "murloc",
                        name: "MURLOC",
                        type: ["water", "beast"],
                        baseHp: 45,
                        baseAttack: 49,
                        baseDefense: 49,
                        baseSpeed: 45,
                        evolveLevel: 16,
                        evolveTo: "murloc_warrior",
                        moves: ["tackle", "bubble", "water_gun", "bite"],
                        description: "The amphibious Murloc makes strange gurgling sounds."
                    },
                    "murloc_warrior": {
                        id: "murloc_warrior",
                        name: "MURLOCWARRIOR",
                        type: ["water", "beast"],
                        baseHp: 60,
                        baseAttack: 62,
                        baseDefense: 63,
                        baseSpeed: 60,
                        evolveLevel: 32,
                        evolveTo: "murloc_king",
                        moves: ["tackle", "bubble", "water_gun", "bite"],
                        description: "Armed with a spear, this Murloc has mastered combat."
                    },
                    "murloc_king": {
                        id: "murloc_king",
                        name: "MURLOCKING",
                        type: ["water", "beast", "magic"],
                        baseHp: 80,
                        baseAttack: 82,
                        baseDefense: 83,
                        baseSpeed: 80,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["hydro_pump", "ice_beam", "thunderbolt", "recover"],
                        description: "The ruler of all Murlocs, commanding both sea and magic."
                    },
                    "wisp": {
                        id: "wisp",
                        name: "WISP",
                        type: ["nature", "spirit"],
                        baseHp: 50,
                        baseAttack: 50,
                        baseDefense: 50,
                        baseSpeed: 70,
                        evolveLevel: 18,
                        evolveTo: "ancient_wisp",
                        moves: ["glow", "nature_power", "sleep_powder", "magical_leaf"],
                        description: "A spirit of the forest that glows with ethereal light."
                    },
                    "ancient_wisp": {
                        id: "ancient_wisp",
                        name: "ANCIENTWISP",
                        type: ["nature", "spirit"],
                        baseHp: 65,
                        baseAttack: 65,
                        baseDefense: 65,
                        baseSpeed: 90,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["solar_beam", "heal_pulse", "energy_ball", "psychic"],
                        description: "An ancient forest spirit with immense natural power."
                    },
                    "imp": {
                        id: "imp",
                        name: "IMP",
                        type: ["fire", "demon"],
                        baseHp: 40,
                        baseAttack: 55,
                        baseDefense: 35,
                        baseSpeed: 55,
                        evolveLevel: 20,
                        evolveTo: "felguard",
                        moves: ["firebolt", "scratch", "ember", "confuse_ray"],
                        description: "A mischievous demon that loves to cause chaos."
                    },
                    "felguard": {
                        id: "felguard",
                        name: "FELGUARD",
                        type: ["fire", "demon"],
                        baseHp: 70,
                        baseAttack: 85,
                        baseDefense: 65,
                        baseSpeed: 65,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["inferno", "shadow_ball", "drain_life", "dark_pulse"],
                        description: "A powerful demon warrior from the Burning Legion."
                    },
                    "gnoll": {
                        id: "gnoll",
                        name: "GNOLL",
                        type: ["beast"],
                        baseHp: 45,
                        baseAttack: 60,
                        baseDefense: 45,
                        baseSpeed: 50,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["bite", "howl", "slash", "crunch"],
                        description: "A hyena-like humanoid that hunts in packs."
                    },
                    "kobold": {
                        id: "kobold",
                        name: "KOBOLD",
                        type: ["earth", "beast"],
                        baseHp: 35,
                        baseAttack: 45,
                        baseDefense: 50,
                        baseSpeed: 40,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["dig", "rock_throw", "candle_light", "tackle"],
                        description: "You no take candle! A mining creature of the deep."
                    },
                    "wolf": {
                        id: "wolf",
                        name: "WOLF",
                        type: ["beast"],
                        baseHp: 50,
                        baseAttack: 65,
                        baseDefense: 50,
                        baseSpeed: 65,
                        evolveLevel: 30,
                        evolveTo: "dire_wolf",
                        moves: ["bite", "howl", "quick_attack", "tackle"],
                        description: "A loyal predator of the wild."
                    },
                    "dire_wolf": {
                        id: "dire_wolf",
                        name: "DIREWOLF",
                        type: ["beast", "shadow"],
                        baseHp: 75,
                        baseAttack: 90,
                        baseDefense: 70,
                        baseSpeed: 85,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["crunch", "shadow_claw", "ice_fang", "iron_tail"],
                        description: "An alpha predator with supernatural strength."
                    },
                    "naga": {
                        id: "naga",
                        name: "NAGA",
                        type: ["water", "magic"],
                        baseHp: 65,
                        baseAttack: 75,
                        baseDefense: 65,
                        baseSpeed: 75,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["water_pulse", "frost_shock", "lightning_bolt", "tidal_wave"],
                        description: "Former night elves transformed by the sea."
                    },
                    "elemental": {
                        id: "elemental",
                        name: "ELEMENTAL",
                        type: ["magic"],
                        baseHp: 60,
                        baseAttack: 65,
                        baseDefense: 60,
                        baseSpeed: 60,
                        evolveLevel: null,
                        evolveTo: null,
                        moves: ["elemental_blast", "barrier", "explosion", "cosmic_power"],
                        description: "Pure magical energy given form."
                    }
                },
                moves: {
                    tackle: { name: "Tackle", power: 40, accuracy: 100, pp: 35, type: "normal" },
                    bubble: { name: "Bubble", power: 40, accuracy: 100, pp: 30, type: "water" },
                    water_gun: { name: "Water Gun", power: 40, accuracy: 100, pp: 25, type: "water" },
                    bite: { name: "Bite", power: 60, accuracy: 100, pp: 25, type: "beast" },
                    scratch: { name: "Scratch", power: 40, accuracy: 100, pp: 35, type: "normal" },
                    ember: { name: "Ember", power: 40, accuracy: 100, pp: 25, type: "fire" },
                    firebolt: { name: "Firebolt", power: 50, accuracy: 100, pp: 20, type: "fire" },
                    glow: { name: "Glow", power: 0, accuracy: 100, pp: 20, type: "nature", effect: "lower_accuracy" },
                    nature_power: { name: "Nature Power", power: 50, accuracy: 100, pp: 20, type: "nature" },
                    howl: { name: "Howl", power: 0, accuracy: 100, pp: 40, type: "beast", effect: "raise_attack" },
                    dig: { name: "Dig", power: 80, accuracy: 100, pp: 10, type: "earth" },
                    rock_throw: { name: "Rock Throw", power: 50, accuracy: 90, pp: 15, type: "earth" },
                    hydro_pump: { name: "Hydro Pump", power: 110, accuracy: 80, pp: 5, type: "water" },
                    ice_beam: { name: "Ice Beam", power: 90, accuracy: 100, pp: 10, type: "ice" },
                    sleep_powder: { name: "Sleep Powder", power: 0, accuracy: 75, pp: 15, type: "nature", effect: "sleep" },
                    magical_leaf: { name: "Magical Leaf", power: 60, accuracy: 100, pp: 20, type: "nature" },
                    solar_beam: { name: "Solar Beam", power: 120, accuracy: 100, pp: 10, type: "nature" },
                    heal_pulse: { name: "Heal Pulse", power: 0, accuracy: 100, pp: 10, type: "nature", effect: "heal" },
                    energy_ball: { name: "Energy Ball", power: 80, accuracy: 100, pp: 10, type: "nature" },
                    psychic: { name: "Psychic", power: 90, accuracy: 100, pp: 10, type: "magic" },
                    confuse_ray: { name: "Confuse Ray", power: 0, accuracy: 100, pp: 10, type: "magic", effect: "confuse" },
                    inferno: { name: "Inferno", power: 100, accuracy: 50, pp: 5, type: "fire" },
                    shadow_ball: { name: "Shadow Ball", power: 80, accuracy: 100, pp: 15, type: "shadow" },
                    dark_pulse: { name: "Dark Pulse", power: 80, accuracy: 100, pp: 15, type: "shadow" },
                    slash: { name: "Slash", power: 70, accuracy: 100, pp: 20, type: "normal" },
                    crunch: { name: "Crunch", power: 80, accuracy: 100, pp: 15, type: "beast" },
                    quick_attack: { name: "Quick Attack", power: 40, accuracy: 100, pp: 30, type: "normal", priority: 1 },
                    shadow_claw: { name: "Shadow Claw", power: 70, accuracy: 100, pp: 15, type: "shadow" },
                    ice_fang: { name: "Ice Fang", power: 65, accuracy: 95, pp: 15, type: "ice" },
                    candle_light: { name: "Candle Light", power: 40, accuracy: 100, pp: 20, type: "fire" },
                    water_pulse: { name: "Water Pulse", power: 60, accuracy: 100, pp: 20, type: "water" },
                    frost_shock: { name: "Frost Shock", power: 40, accuracy: 100, pp: 30, type: "ice" },
                    lightning_bolt: { name: "Lightning Bolt", power: 90, accuracy: 100, pp: 15, type: "electric" },
                    tidal_wave: { name: "Tidal Wave", power: 90, accuracy: 100, pp: 10, type: "water" },
                    elemental_blast: { name: "Elemental Blast", power: 90, accuracy: 100, pp: 10, type: "magic" },
                    barrier: { name: "Barrier", power: 0, accuracy: 100, pp: 20, type: "magic", effect: "defense_up" },
                    explosion: { name: "Explosion", power: 250, accuracy: 100, pp: 5, type: "fire" },
                    cosmic_power: { name: "Cosmic Power", power: 0, accuracy: 100, pp: 20, type: "magic", effect: "stats_up" }
                }
            }
        };

        // Initialize comparison tool
        let comparisonTool;

        window.addEventListener('DOMContentLoaded', () => {
            // Create comparison tool
            comparisonTool = new WowMonComparisonTool(mockGameEngine);
            window.comparisonTool = comparisonTool;

            // Render creature grid
            renderCreatureGrid();
        });

        function renderCreatureGrid() {
            const grid = document.getElementById('creature-grid');
            const creatures = mockGameEngine.cartridge.creatures;

            for (const [id, creature] of Object.entries(creatures)) {
                const card = document.createElement('div');
                card.className = 'creature-item';

                const baseTotal = creature.baseHp + creature.baseAttack + creature.baseDefense + creature.baseSpeed;

                card.innerHTML = `
                    <h3>${creature.name}</h3>
                    <div class="creature-types">
                        ${creature.type.map(t => `<span class="type-badge">${t}</span>`).join('')}
                    </div>
                    <div class="creature-stats">
                        <strong>Base Stats:</strong><br>
                        HP: ${creature.baseHp}<br>
                        Attack: ${creature.baseAttack}<br>
                        Defense: ${creature.baseDefense}<br>
                        Speed: ${creature.baseSpeed}<br>
                        <strong>BST: ${baseTotal}</strong>
                    </div>
                    <button class="add-compare-btn" onclick="addCreatureToCompare('${id}')">
                        Add to Compare
                    </button>
                `;

                grid.appendChild(card);
            }
        }

        function addCreatureToCompare(creatureId) {
            if (comparisonTool.addToComparison(creatureId)) {
                // Open panel if this is the first or second addition
                if (comparisonTool.comparisonList.length <= 2) {
                    if (!comparisonTool.comparisonPanel.classList.contains('active')) {
                        comparisonTool.togglePanel();
                    }
                }
            }
        }

        function compareStarters() {
            comparisonTool.clearAll();
            comparisonTool.addToComparison('murloc');
            comparisonTool.addToComparison('wisp');
            comparisonTool.addToComparison('imp');
            if (!comparisonTool.comparisonPanel.classList.contains('active')) {
                comparisonTool.togglePanel();
            }
        }

        function compareEvolutions() {
            comparisonTool.clearAll();
            comparisonTool.addToComparison('murloc');
            comparisonTool.addToComparison('murloc_warrior');
            comparisonTool.addToComparison('murloc_king');
            if (!comparisonTool.comparisonPanel.classList.contains('active')) {
                comparisonTool.togglePanel();
            }
        }

        function compareTypes() {
            comparisonTool.clearAll();
            comparisonTool.addToComparison('murloc'); // Water/Beast
            comparisonTool.addToComparison('imp'); // Fire/Demon
            comparisonTool.addToComparison('wisp'); // Nature/Spirit
            comparisonTool.addToComparison('naga'); // Water/Magic
            if (!comparisonTool.comparisonPanel.classList.contains('active')) {
                comparisonTool.togglePanel();
            }
        }

        function clearComparison() {
            comparisonTool.clearAll();
        }
    </script>

    <!-- Include the comparison tool -->
    <script src="../../wowmon-comparison-tool.js"></script>
</body>
</html>
