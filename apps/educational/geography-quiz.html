<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geography Quiz</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0e1113;color:#e0e0e0;font-family:'Segoe UI',system-ui,sans-serif;min-height:100vh;display:flex;flex-direction:column}
header{background:#161a1e;padding:12px 20px;border-bottom:1px solid #2a2f35;display:flex;align-items:center;gap:16px;flex-wrap:wrap}
header h1{font-size:1.3rem;color:#00d2d3}
.mode-btns{display:flex;gap:6px;margin-left:auto}
.mode-btn{background:#1e2329;border:1px solid #2a2f35;color:#aaa;padding:5px 14px;border-radius:6px;cursor:pointer;font-size:.8rem}
.mode-btn.active{background:#00d2d3;color:#0e1113;border-color:#00d2d3}
main{flex:1;display:flex;flex-direction:column;padding:16px;max-width:1000px;width:100%;margin:0 auto}
.score-bar{display:flex;gap:16px;font-size:.85rem;color:#aaa;padding:8px 0;flex-wrap:wrap}
.score-bar span{color:#00d2d3;font-weight:bold}
.quiz-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px}
.question{font-size:1.3rem;text-align:center;color:#e0e0e0}
.options{display:grid;grid-template-columns:1fr 1fr;gap:10px;width:100%;max-width:600px;margin-top:12px}
.option{background:#161a1e;border:2px solid #2a2f35;border-radius:8px;padding:14px 20px;cursor:pointer;font-size:.95rem;text-align:center;transition:all .2s}
.option:hover{border-color:#00d2d3;background:#1e2329}
.option.correct{border-color:#2ecc71;background:#2ecc7122;color:#2ecc71}
.option.wrong{border-color:#ff6347;background:#ff634722;color:#ff6347}
.option.disabled{pointer-events:none;opacity:.7}
.feedback{min-height:30px;font-size:1rem;text-align:center}
.feedback.right{color:#2ecc71}
.feedback.wrong{color:#ff6347}
.flag-display{font-size:5rem;text-align:center;line-height:1.2;margin:8px 0}
.continent-filter{display:flex;gap:6px;flex-wrap:wrap;margin:8px 0}
.cont-btn{background:#1e2329;border:1px solid #2a2f35;color:#aaa;padding:3px 10px;border-radius:4px;cursor:pointer;font-size:.75rem}
.cont-btn.active{background:#00d2d3;color:#0e1113;border-color:#00d2d3}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;width:100%}
.stat-card{background:#161a1e;border:1px solid #2a2f35;border-radius:8px;padding:16px;text-align:center}
.stat-card h4{color:#00d2d3;font-size:.85rem;margin-bottom:6px}
.stat-card .num{font-size:1.8rem;font-weight:bold;color:#e0e0e0}
.stat-card .sub{font-size:.75rem;color:#888;margin-top:4px}
.btn{background:#00d2d3;color:#0e1113;border:none;padding:8px 18px;border-radius:6px;cursor:pointer;font-weight:600;font-size:.85rem}
.btn:hover{opacity:.9}
.next-btn{margin-top:12px}
</style>
</head>
<body>
<header>
<h1>üåç Geography Quiz</h1>
<div class="mode-btns">
<div class="mode-btn active" data-mode="capitals">Capitals</div>
<div class="mode-btn" data-mode="flags">Flags</div>
<div class="mode-btn" data-mode="stats">Stats</div>
</div>
</header>
<main id="app"></main>
<script>
const countries=[
{n:"France",cap:"Paris",cont:"Europe",flag:"üá´üá∑"},{n:"Germany",cap:"Berlin",cont:"Europe",flag:"üá©üá™"},{n:"Italy",cap:"Rome",cont:"Europe",flag:"üáÆüáπ"},{n:"Spain",cap:"Madrid",cont:"Europe",flag:"üá™üá∏"},{n:"United Kingdom",cap:"London",cont:"Europe",flag:"üá¨üáß"},{n:"Portugal",cap:"Lisbon",cont:"Europe",flag:"üáµüáπ"},{n:"Netherlands",cap:"Amsterdam",cont:"Europe",flag:"üá≥üá±"},{n:"Belgium",cap:"Brussels",cont:"Europe",flag:"üáßüá™"},{n:"Switzerland",cap:"Bern",cont:"Europe",flag:"üá®üá≠"},{n:"Austria",cap:"Vienna",cont:"Europe",flag:"üá¶üáπ"},{n:"Poland",cap:"Warsaw",cont:"Europe",flag:"üáµüá±"},{n:"Sweden",cap:"Stockholm",cont:"Europe",flag:"üá∏üá™"},{n:"Norway",cap:"Oslo",cont:"Europe",flag:"üá≥üá¥"},{n:"Denmark",cap:"Copenhagen",cont:"Europe",flag:"üá©üá∞"},{n:"Finland",cap:"Helsinki",cont:"Europe",flag:"üá´üáÆ"},{n:"Greece",cap:"Athens",cont:"Europe",flag:"üá¨üá∑"},{n:"Czech Republic",cap:"Prague",cont:"Europe",flag:"üá®üáø"},{n:"Romania",cap:"Bucharest",cont:"Europe",flag:"üá∑üá¥"},{n:"Ireland",cap:"Dublin",cont:"Europe",flag:"üáÆüá™"},{n:"Hungary",cap:"Budapest",cont:"Europe",flag:"üá≠üá∫"},
{n:"United States",cap:"Washington, D.C.",cont:"N. America",flag:"üá∫üá∏"},{n:"Canada",cap:"Ottawa",cont:"N. America",flag:"üá®üá¶"},{n:"Mexico",cap:"Mexico City",cont:"N. America",flag:"üá≤üáΩ"},{n:"Cuba",cap:"Havana",cont:"N. America",flag:"üá®üá∫"},{n:"Jamaica",cap:"Kingston",cont:"N. America",flag:"üáØüá≤"},{n:"Costa Rica",cap:"San Jos√©",cont:"N. America",flag:"üá®üá∑"},{n:"Panama",cap:"Panama City",cont:"N. America",flag:"üáµüá¶"},{n:"Guatemala",cap:"Guatemala City",cont:"N. America",flag:"üá¨üáπ"},{n:"Haiti",cap:"Port-au-Prince",cont:"N. America",flag:"üá≠üáπ"},{n:"Honduras",cap:"Tegucigalpa",cont:"N. America",flag:"üá≠üá≥"},
{n:"Brazil",cap:"Bras√≠lia",cont:"S. America",flag:"üáßüá∑"},{n:"Argentina",cap:"Buenos Aires",cont:"S. America",flag:"üá¶üá∑"},{n:"Chile",cap:"Santiago",cont:"S. America",flag:"üá®üá±"},{n:"Colombia",cap:"Bogot√°",cont:"S. America",flag:"üá®üá¥"},{n:"Peru",cap:"Lima",cont:"S. America",flag:"üáµüá™"},{n:"Venezuela",cap:"Caracas",cont:"S. America",flag:"üáªüá™"},{n:"Ecuador",cap:"Quito",cont:"S. America",flag:"üá™üá®"},{n:"Bolivia",cap:"Sucre",cont:"S. America",flag:"üáßüá¥"},{n:"Uruguay",cap:"Montevideo",cont:"S. America",flag:"üá∫üáæ"},{n:"Paraguay",cap:"Asunci√≥n",cont:"S. America",flag:"üáµüáæ"},
{n:"Japan",cap:"Tokyo",cont:"Asia",flag:"üáØüáµ"},{n:"China",cap:"Beijing",cont:"Asia",flag:"üá®üá≥"},{n:"India",cap:"New Delhi",cont:"Asia",flag:"üáÆüá≥"},{n:"South Korea",cap:"Seoul",cont:"Asia",flag:"üá∞üá∑"},{n:"Thailand",cap:"Bangkok",cont:"Asia",flag:"üáπüá≠"},{n:"Vietnam",cap:"Hanoi",cont:"Asia",flag:"üáªüá≥"},{n:"Indonesia",cap:"Jakarta",cont:"Asia",flag:"üáÆüá©"},{n:"Philippines",cap:"Manila",cont:"Asia",flag:"üáµüá≠"},{n:"Malaysia",cap:"Kuala Lumpur",cont:"Asia",flag:"üá≤üáæ"},{n:"Turkey",cap:"Ankara",cont:"Asia",flag:"üáπüá∑"},{n:"Saudi Arabia",cap:"Riyadh",cont:"Asia",flag:"üá∏üá¶"},{n:"Israel",cap:"Jerusalem",cont:"Asia",flag:"üáÆüá±"},{n:"Pakistan",cap:"Islamabad",cont:"Asia",flag:"üáµüá∞"},{n:"Bangladesh",cap:"Dhaka",cont:"Asia",flag:"üáßüá©"},{n:"Singapore",cap:"Singapore",cont:"Asia",flag:"üá∏üá¨"},
{n:"Egypt",cap:"Cairo",cont:"Africa",flag:"üá™üá¨"},{n:"South Africa",cap:"Pretoria",cont:"Africa",flag:"üáøüá¶"},{n:"Nigeria",cap:"Abuja",cont:"Africa",flag:"üá≥üá¨"},{n:"Kenya",cap:"Nairobi",cont:"Africa",flag:"üá∞üá™"},{n:"Morocco",cap:"Rabat",cont:"Africa",flag:"üá≤üá¶"},{n:"Ethiopia",cap:"Addis Ababa",cont:"Africa",flag:"üá™üáπ"},{n:"Ghana",cap:"Accra",cont:"Africa",flag:"üá¨üá≠"},{n:"Tanzania",cap:"Dodoma",cont:"Africa",flag:"üáπüáø"},{n:"Algeria",cap:"Algiers",cont:"Africa",flag:"üá©üáø"},{n:"Tunisia",cap:"Tunis",cont:"Africa",flag:"üáπüá≥"},
{n:"Australia",cap:"Canberra",cont:"Oceania",flag:"üá¶üá∫"},{n:"New Zealand",cap:"Wellington",cont:"Oceania",flag:"üá≥üáø"},{n:"Fiji",cap:"Suva",cont:"Oceania",flag:"üá´üáØ"},{n:"Papua New Guinea",cap:"Port Moresby",cont:"Oceania",flag:"üáµüá¨"}
];
const continents=["All","Europe","Asia","N. America","S. America","Africa","Oceania"];

let st=JSON.parse(localStorage.getItem('geo_quiz')||'null')||{mode:'capitals',continent:'All',current:null,answered:false,feedback:'',scores:{},totalCorrect:0,totalAsked:0};

function save(){localStorage.setItem('geo_quiz',JSON.stringify(st))}
function shuffle(a){const b=[...a];for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]]}return b}

function pool(){return st.continent==='All'?countries:countries.filter(c=>c.cont===st.continent)}

function newQuestion(){
  const p=pool();if(p.length<4)return;
  const correct=p[Math.floor(Math.random()*p.length)];
  const wrongs=shuffle(p.filter(c=>c.n!==correct.n)).slice(0,3);
  const opts=shuffle([correct,...wrongs]);
  st.current={correct,options:opts};st.answered=false;st.feedback='';save()
}

function answer(idx){
  if(st.answered)return;
  st.answered=true;st.totalAsked++;
  const chosen=st.current.options[idx];
  const right=st.mode==='capitals'?chosen.cap===st.current.correct.cap:chosen.n===st.current.correct.n;
  const key=st.current.correct.cont;
  if(!st.scores[key])st.scores[key]={c:0,t:0};
  st.scores[key].t++;
  if(right){st.totalCorrect++;st.scores[key].c++;st.feedback='correct'}
  else st.feedback='wrong';
  save();render();
}

function renderQuiz(){
  if(!st.current||!st.current.correct)newQuestion();
  const q=st.current;if(!q)return '<p>Need at least 4 countries. Select a broader continent.</p>';
  const c=q.correct;
  let questionText,optionKey;
  if(st.mode==='capitals'){
    questionText=`What is the capital of <strong style="color:#00d2d3">${c.n}</strong>?`;
    optionKey='cap';
  } else {
    questionText=`<div class="flag-display">${c.flag}</div>Which country does this flag belong to?`;
    optionKey='n';
  }
  return `
    <div class="continent-filter">${continents.map(ct=>`<div class="cont-btn ${st.continent===ct?'active':''}" onclick="st.continent='${ct}';newQuestion();render()">${ct}</div>`).join('')}</div>
    <div class="score-bar">Score: <span>${st.totalCorrect}</span>/${st.totalAsked} ${st.totalAsked?`(${Math.round(st.totalCorrect/st.totalAsked*100)}%)`:''}</div>
    <div class="quiz-area">
      <div class="question">${questionText}</div>
      <div class="options">${q.options.map((o,i)=>{
        let cls='option';
        if(st.answered){
          cls+=' disabled';
          if((st.mode==='capitals'?o.cap===c.cap:o.n===c.n))cls+=' correct';
          else if(st.feedback==='wrong')cls+=' wrong';
        }
        return `<div class="${cls}" onclick="answer(${i})">${o[optionKey]}</div>`;
      }).join('')}</div>
      <div class="feedback ${st.feedback==='correct'?'right':'wrong'}">${st.feedback==='correct'?'‚úì Correct!':st.feedback==='wrong'?`‚úó The answer was ${st.mode==='capitals'?c.cap:c.n}`:''}</div>
      ${st.answered?`<button class="btn next-btn" onclick="newQuestion();render()">Next Question ‚Üí</button>`:''}
    </div>`;
}

function renderStats(){
  const conts=continents.filter(c=>c!=='All');
  return `
    <h3 style="color:#00d2d3;margin:12px 0">Your Progress by Continent</h3>
    <div class="stats-grid">
      <div class="stat-card"><h4>Overall</h4><div class="num">${st.totalAsked?Math.round(st.totalCorrect/st.totalAsked*100):0}%</div><div class="sub">${st.totalCorrect}/${st.totalAsked} correct</div></div>
      ${conts.map(c=>{const s=st.scores[c]||{c:0,t:0};return `<div class="stat-card"><h4>${c}</h4><div class="num">${s.t?Math.round(s.c/s.t*100):0}%</div><div class="sub">${s.c}/${s.t} correct</div></div>`}).join('')}
    </div>
    <div style="text-align:center;margin-top:20px"><button class="btn" onclick="st.totalCorrect=0;st.totalAsked=0;st.scores={};save();render()">Reset All Stats</button></div>`;
}

function render(){
  const app=document.getElementById('app');
  if(st.mode==='stats')app.innerHTML=renderStats();
  else app.innerHTML=renderQuiz();
  document.querySelectorAll('.mode-btn').forEach(b=>{
    b.classList.toggle('active',b.dataset.mode===st.mode);
    b.onclick=()=>{st.mode=b.dataset.mode;if(b.dataset.mode!=='stats')newQuestion();save();render()};
  });
}
render();
</script>
</body>
</html>
