<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binary Number Lab</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0e1113;color:#e0e0e0;font-family:'Segoe UI',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
header{background:#161a1e;padding:14px 20px;border-bottom:1px solid #2a2f35;text-align:center}
header h1{font-size:1.4rem;color:#00d2d3}
header p{font-size:.8rem;color:#888;margin-top:4px}
.tabs{display:flex;justify-content:center;gap:8px;padding:12px;background:#161a1e;border-bottom:1px solid #2a2f35}
.tab{background:#1e2329;border:1px solid #2a2f35;color:#aaa;padding:6px 16px;border-radius:6px;cursor:pointer;font-size:.85rem}
.tab.active{background:#00d2d3;color:#0e1113;border-color:#00d2d3}
main{max-width:900px;margin:0 auto;padding:20px}
.section{display:none}.section.active{display:block}
.bit-row{display:flex;justify-content:center;gap:6px;margin:16px 0;flex-wrap:wrap}
.bit-cell{width:60px;text-align:center;cursor:pointer;user-select:none}
.bit-val{font-size:2rem;font-weight:bold;color:#00d2d3;background:#161a1e;border:2px solid #2a2f35;border-radius:8px;padding:8px;transition:all .2s}
.bit-val.on{background:#00d2d322;border-color:#00d2d3;color:#fff;text-shadow:0 0 10px #00d2d3}
.bit-val:hover{border-color:#00d2d3}
.bit-power{font-size:.7rem;color:#888;margin-top:4px}
.bit-weight{font-size:.65rem;color:#555}
.result-display{text-align:center;margin:20px 0;padding:20px;background:#161a1e;border-radius:10px;border:1px solid #2a2f35}
.result-display .big{font-size:2.5rem;font-weight:bold;color:#00d2d3;font-family:monospace}
.result-display .bases{display:flex;justify-content:center;gap:24px;margin-top:12px;flex-wrap:wrap}
.base-val{text-align:center}
.base-val .label{font-size:.7rem;color:#888;text-transform:uppercase}
.base-val .val{font-size:1.2rem;font-family:monospace;color:#e0e0e0;margin-top:2px}
.converter{display:flex;gap:12px;margin:16px 0;flex-wrap:wrap;justify-content:center}
.conv-field{flex:1;min-width:150px;max-width:220px}
.conv-field label{display:block;font-size:.75rem;color:#888;margin-bottom:3px}
.conv-field input{width:100%;background:#161a1e;border:1px solid #2a2f35;color:#e0e0e0;padding:8px 10px;border-radius:6px;font-family:monospace;font-size:1rem}
.conv-field input:focus{outline:none;border-color:#00d2d3}
.challenge-box{background:#161a1e;border:1px solid #2a2f35;border-radius:10px;padding:20px;margin:16px 0;text-align:center}
.challenge-box h3{color:#ffa500;margin-bottom:8px}
.challenge-box .prompt{font-size:1.3rem;font-family:monospace;color:#00d2d3;margin:12px 0}
.challenge-box input{background:#0e1113;border:1px solid #2a2f35;color:#e0e0e0;padding:8px 12px;border-radius:6px;font-family:monospace;font-size:1rem;text-align:center;width:200px}
.challenge-box input:focus{outline:none;border-color:#00d2d3}
.btn{background:#00d2d3;color:#0e1113;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;font-size:.85rem;margin:4px}
.btn:hover{opacity:.9}
.btn-outline{background:transparent;border:1px solid #2a2f35;color:#aaa}
.btn-outline:hover{border-color:#00d2d3;color:#00d2d3}
.score{font-size:.85rem;color:#aaa;margin:8px 0}
.score span{color:#00d2d3;font-weight:bold}
.feedback{font-size:1rem;margin:8px 0;min-height:24px}
.feedback.correct{color:#2ecc71}
.feedback.wrong{color:#ff6347}
.anim-bits{display:flex;justify-content:center;gap:4px;margin:16px 0}
.anim-bit{width:40px;height:40px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-family:monospace;font-weight:bold;font-size:1.1rem;transition:all .3s}
.info-box{background:#1e2329;border-radius:8px;padding:12px 16px;margin:12px 0;font-size:.85rem;line-height:1.6;color:#ccc}
.info-box code{color:#00d2d3;background:#0e1113;padding:1px 5px;border-radius:3px}
</style>
</head>
<body>
<header>
<h1>ðŸ”¢ Binary Number Lab</h1>
<p>Explore how computers store and represent numbers</p>
</header>
<div class="tabs">
<div class="tab active" data-tab="flipper">Bit Flipper</div>
<div class="tab" data-tab="converter">Converter</div>
<div class="tab" data-tab="challenges">Challenges</div>
<div class="tab" data-tab="learn">Learn</div>
</div>
<main id="app"></main>
<script>
let state={tab:'flipper',bits:[0,0,0,0,0,0,0,0],challenge:{type:'bin2dec',val:0,answer:'',feedback:'',score:0,total:0},convDec:'42'};
const saved=localStorage.getItem('binary_lab');
if(saved)try{Object.assign(state,JSON.parse(saved))}catch(e){}

function save(){localStorage.setItem('binary_lab',JSON.stringify(state))}
function bitsToNum(b){return b.reduce((s,v,i)=>s+v*Math.pow(2,b.length-1-i),0)}
function numToBits(n,len=8){return Array.from({length:len},(_,i)=>(n>>(len-1-i))&1)}

function renderFlipper(){
  const num=bitsToNum(state.bits);
  return `
    <div class="info-box">Click bits to toggle them on (1) or off (0). Watch how the decimal value changes.</div>
    <div class="bit-row">${state.bits.map((b,i)=>`
      <div class="bit-cell" onclick="state.bits[${i}]=state.bits[${i}]?0:1;save();render()">
        <div class="bit-val ${b?'on':''}">${b}</div>
        <div class="bit-power">2<sup>${state.bits.length-1-i}</sup></div>
        <div class="bit-weight">${Math.pow(2,state.bits.length-1-i)}</div>
      </div>`).join('')}</div>
    <div class="result-display">
      <div class="big">${num}</div>
      <div class="bases">
        <div class="base-val"><div class="label">Binary</div><div class="val">0b${state.bits.join('')}</div></div>
        <div class="base-val"><div class="label">Decimal</div><div class="val">${num}</div></div>
        <div class="base-val"><div class="label">Hexadecimal</div><div class="val">0x${num.toString(16).toUpperCase().padStart(2,'0')}</div></div>
        <div class="base-val"><div class="label">Octal</div><div class="val">0o${num.toString(8)}</div></div>
      </div>
    </div>
    <div style="text-align:center">
      <button class="btn-outline btn" onclick="state.bits=[0,0,0,0,0,0,0,0];save();render()">Clear All</button>
      <button class="btn-outline btn" onclick="state.bits=state.bits.map(b=>b?0:1);save();render()">Invert</button>
      <button class="btn-outline btn" onclick="state.bits=[...state.bits.slice(1),0];save();render()">Shift Left</button>
      <button class="btn-outline btn" onclick="state.bits=[0,...state.bits.slice(0,-1)];save();render()">Shift Right</button>
    </div>
    <div class="info-box" style="margin-top:16px">
      <strong>Calculation:</strong> ${state.bits.map((b,i)=>b?`<code>${b}Ã—${Math.pow(2,state.bits.length-1-i)}</code>`:null).filter(Boolean).join(' + ')||'<code>0</code>'} = <code>${num}</code>
    </div>`;
}

function renderConverter(){
  const d=parseInt(state.convDec)||0;
  const clamped=Math.max(0,Math.min(d,4294967295));
  return `
    <div class="info-box">Type a number in any base to see it converted to all others.</div>
    <div class="converter">
      <div class="conv-field"><label>Decimal (Base 10)</label><input id="cDec" value="${clamped}" oninput="state.convDec=this.value;save();render()"></div>
      <div class="conv-field"><label>Binary (Base 2)</label><input value="${clamped.toString(2)}" oninput="state.convDec=String(parseInt(this.value,2)||0);save();render()"></div>
      <div class="conv-field"><label>Hexadecimal (Base 16)</label><input value="${clamped.toString(16).toUpperCase()}" oninput="state.convDec=String(parseInt(this.value,16)||0);save();render()"></div>
      <div class="conv-field"><label>Octal (Base 8)</label><input value="${clamped.toString(8)}" oninput="state.convDec=String(parseInt(this.value,8)||0);save();render()"></div>
    </div>
    <div class="result-display">
      <div style="font-size:1.2rem;color:#aaa;margin-bottom:8px">32-bit Binary Representation</div>
      <div class="anim-bits">${clamped.toString(2).padStart(32,'0').split('').map((b,i)=>`<div class="anim-bit" style="background:${b==='1'?'#00d2d333':'#1e2329'};color:${b==='1'?'#00d2d3':'#555'};${i%8===0&&i?'margin-left:8px':''}">${b}</div>`).join('')}</div>
      <div style="font-size:.75rem;color:#666;margin-top:8px">
        ${clamped.toString(2).padStart(32,'0').match(/.{8}/g).map(byte=>`<code style="margin:0 12px">${byte}</code>`).join('')}
      </div>
    </div>
    <div class="info-box">
      <strong>IEEE 754:</strong> Computers store numbers as sequences of bits. An 8-bit byte can represent 0-255 (unsigned) or -128 to 127 (signed, using two's complement).
    </div>`;
}

function newChallenge(){
  const types=['bin2dec','dec2bin','dec2hex','hex2dec','bin2hex'];
  state.challenge.type=types[Math.floor(Math.random()*types.length)];
  state.challenge.val=Math.floor(Math.random()*256);
  state.challenge.answer='';state.challenge.feedback='';
}

function checkChallenge(){
  const c=state.challenge;let correct=false;
  const v=c.val;
  if(c.type==='bin2dec')correct=parseInt(c.answer)===v;
  else if(c.type==='dec2bin')correct=parseInt(c.answer,2)===v;
  else if(c.type==='dec2hex')correct=parseInt(c.answer,16)===v;
  else if(c.type==='hex2dec')correct=parseInt(c.answer)===v;
  else if(c.type==='bin2hex')correct=parseInt(c.answer,16)===v;
  c.total++;
  if(correct){c.score++;c.feedback='âœ“ Correct!'}
  else{
    let ans;
    if(c.type==='bin2dec')ans=v;
    else if(c.type==='dec2bin')ans=v.toString(2);
    else if(c.type==='dec2hex')ans=v.toString(16).toUpperCase();
    else if(c.type==='hex2dec')ans=v;
    else ans=v.toString(16).toUpperCase();
    c.feedback=`âœ— Answer was ${ans}`;
  }
  save();render();
  setTimeout(()=>{newChallenge();save();render()},1500);
}

function renderChallenges(){
  const c=state.challenge;
  if(!c.val&&c.val!==0)newChallenge();
  const labels={bin2dec:'Binary â†’ Decimal',dec2bin:'Decimal â†’ Binary',dec2hex:'Decimal â†’ Hex',hex2dec:'Hex â†’ Decimal',bin2hex:'Binary â†’ Hex'};
  let prompt;
  if(c.type==='bin2dec')prompt=c.val.toString(2).padStart(8,'0');
  else if(c.type==='dec2bin'||c.type==='dec2hex')prompt=String(c.val);
  else if(c.type==='hex2dec')prompt='0x'+c.val.toString(16).toUpperCase();
  else prompt=c.val.toString(2).padStart(8,'0');
  return `
    <div class="score">Score: <span>${c.score}</span> / ${c.total} ${c.total?`(${Math.round(c.score/c.total*100)}%)`:''}</div>
    <div class="challenge-box">
      <h3>${labels[c.type]}</h3>
      <div class="prompt">${prompt}</div>
      <p style="font-size:.85rem;color:#888;margin-bottom:12px">Convert to ${c.type.split('2')[1]==='dec'?'decimal':c.type.split('2')[1]==='bin'?'binary':'hexadecimal'}</p>
      <input id="challInput" value="${c.answer}" placeholder="Your answer..." onkeydown="if(event.key==='Enter')checkChallenge()">
      <br><button class="btn" style="margin-top:8px" onclick="checkChallenge()">Submit</button>
      <button class="btn btn-outline" onclick="newChallenge();save();render()">Skip</button>
      <div class="feedback ${c.feedback.startsWith('âœ“')?'correct':'wrong'}">${c.feedback}</div>
    </div>
    <div style="text-align:center"><button class="btn btn-outline" onclick="state.challenge.score=0;state.challenge.total=0;save();render()">Reset Score</button></div>`;
}

function renderLearn(){
  return `
    <div class="info-box"><h3 style="color:#00d2d3;margin-bottom:8px">Why Binary?</h3>Computers use binary (base 2) because transistors have two states: ON (1) and OFF (0). Every piece of data â€” text, images, music â€” is ultimately stored as sequences of 1s and 0s.</div>
    <div class="info-box"><h3 style="color:#00d2d3;margin-bottom:8px">Place Values</h3>Just like decimal has ones, tens, hundreds... binary has ones, twos, fours, eights:
    <br><code>128 | 64 | 32 | 16 | 8 | 4 | 2 | 1</code>
    <br>Example: <code>10110010</code> = 128+32+16+2 = <code>178</code></div>
    <div class="info-box"><h3 style="color:#00d2d3;margin-bottom:8px">Hexadecimal (Base 16)</h3>Hex uses digits 0-9 and A-F. Each hex digit represents exactly 4 bits:
    <br><code>0=0000, 1=0001, ..., 9=1001, A=1010, B=1011, ..., F=1111</code>
    <br>So <code>0xFF</code> = <code>11111111</code> = <code>255</code></div>
    <div class="info-box"><h3 style="color:#00d2d3;margin-bottom:8px">Octal (Base 8)</h3>Octal uses digits 0-7. Each octal digit represents 3 bits. It was popular in early computing and is still used in Unix file permissions: <code>chmod 755</code> = <code>rwxr-xr-x</code></div>
    <div class="info-box"><h3 style="color:#00d2d3;margin-bottom:8px">Two's Complement</h3>Signed integers use the leftmost bit as the sign bit. To negate: flip all bits and add 1.
    <br><code>5</code> = <code>00000101</code> â†’ flip â†’ <code>11111010</code> â†’ +1 â†’ <code>11111011</code> = <code>-5</code></div>
    <div class="info-box"><h3 style="color:#00d2d3;margin-bottom:8px">Bit Operations</h3>
    <code>AND (&)</code>: 1 only if both are 1<br>
    <code>OR (|)</code>: 1 if either is 1<br>
    <code>XOR (^)</code>: 1 if bits are different<br>
    <code>NOT (~)</code>: flip all bits<br>
    <code>Shift (<<, >>)</code>: multiply/divide by powers of 2</div>`;
}

function render(){
  const app=document.getElementById('app');
  if(state.tab==='flipper')app.innerHTML=renderFlipper();
  else if(state.tab==='converter')app.innerHTML=renderConverter();
  else if(state.tab==='challenges')app.innerHTML=renderChallenges();
  else app.innerHTML=renderLearn();
  document.querySelectorAll('.tab').forEach(t=>{
    t.classList.toggle('active',t.dataset.tab===state.tab);
    t.onclick=()=>{state.tab=t.dataset.tab;save();render()};
  });
  const ci=document.getElementById('challInput');
  if(ci){ci.oninput=()=>{state.challenge.answer=ci.value};ci.focus()}
}
render();
</script>
</body>
</html>
