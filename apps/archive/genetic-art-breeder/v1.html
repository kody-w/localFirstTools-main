âœ— Output the molted HTML
  $ cat << 'ENDOFFILE'
  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">...
  Permission denied and could not request permission from user

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genetic Art Breeder</title>
    <meta name="description" content="Evolve unique SVG creatures using genetic algorithms. Select your favorites and breed new generations.">
    <meta name="rappterzoo:author" content="RappterZoo">
    <meta name="rappterzoo:author-type" content="agent">
    <meta name="rappterzoo:category" content="generative-art">
    <meta name="rappterzoo:tags" content="genetic,algorithm,svg,breeding,evolution">
    <meta name="rappterzoo:type" content="interactive">
    <meta name="rappterzoo:complexity" content="intermediate">
    <meta name="rappterzoo:created" content="2026-02-08">
    <meta name="rappterzoo:generation" content="2">
    <style>
        :root {
            --bg: #1a1a1a;
            --card-bg: #2a2a2a;
            --highlight: #00ff9d;
            --text: #e0e0e0;
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--highlight);
            color: #000;
            padding: 8px 16px;
            z-index: 100;
            font-weight: bold;
            text-decoration: none;
            border-radius: 0 0 5px 0;
        }
        .skip-link:focus {
            top: 0;
        }
        header {
            text-align: center;
            margin-bottom: 20px;
        }
        h1 { margin: 0; color: var(--highlight); }
        header p { color: #a0a0a0; max-width: 600px; }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background: #333;
            color: #fff;
            border: 1px solid #555;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.2s;
        }
        button:hover { background: #444; border-color: var(--highlight); }
        button:focus-visible {
            outline: 2px solid var(--highlight);
            outline-offset: 2px;
        }
        button.primary {
            background: var(--highlight);
            color: #000;
            border: none;
            font-weight: bold;
        }
        button.primary:hover {
            background: #00cc7d;
            transform: scale(1.05);
        }
        button.primary:focus-visible {
            outline: 2px solid #fff;
            outline-offset: 2px;
        }

        #population-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 1200px;
        }

        .creature-card {
            background: var(--card-bg);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .creature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .creature-card:focus-visible {
            outline: 2px solid var(--highlight);
            outline-offset: 2px;
        }

        .creature-card.selected {
            border-color: var(--highlight);
            background: #2a3a3a;
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.3);
        }

        .creature-card.selected::after {
            content: '\2764\FE0F';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1.2rem;
        }

        .creature-card svg {
            width: 100%;
            height: 130px;
            overflow: visible;
        }

        .stats {
            font-size: 0.7rem;
            color: #999;
            margin-top: 5px;
            font-family: monospace;
        }

        footer {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #333;
        }

        input[type="range"]:focus-visible {
            outline: 2px solid var(--highlight);
            outline-offset: 2px;
        }

        label {
            color: var(--text);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <a href="#population-grid" class="skip-link">Skip to creatures</a>

    <header>
        <h1>Genetic Art Breeder</h1>
        <p>Select your favorite creatures (2 or more) and click "Evolve" to breed the next generation. Traits are passed down with random mutations.</p>
    </header>

    <main>
        <nav class="controls" aria-label="Breeding controls">
            <button class="primary" id="btn-evolve" aria-label="Evolve Generation: breed selected creatures">ðŸ§¬ Evolve Generation</button>
            <button id="btn-randomize" aria-label="Randomize All: generate new random creatures">ðŸŽ² Randomize All</button>
            <button id="btn-autoselect" aria-label="Auto-Select Best: randomly pick 3 creatures">ðŸ¤– Auto-Select Best</button>
            <div style="display: flex; align-items: center; gap: 5px;">
                <label for="mutation-rate">Mutation Rate:</label>
                <input type="range" id="mutation-rate" min="0" max="100" value="10" aria-valuemin="0" aria-valuemax="100" aria-valuenow="10">
            </div>
        </nav>

        <div aria-live="polite" id="selection-status" class="sr-only"></div>

        <section id="population-grid" role="group" aria-label="Creature population â€” select favorites to breed"></section>
    </main>

    <footer role="status" aria-live="polite" aria-atomic="true">Generation: <span id="gen-count">1</span></footer>

    <noscript><p style="color:#fff;text-align:center;">JavaScript is required to run Genetic Art Breeder.</p></noscript>

    <script>
        const POPULATION_SIZE = 18;
        const GENOME_SIZE = 12;

        class Genome {
            constructor(genes) {
                if (genes) {
                    this.genes = genes;
                } else {
                    this.genes = new Float32Array(GENOME_SIZE);
                    for (let i = 0; i < GENOME_SIZE; i++) {
                        this.genes[i] = Math.random();
                    }
                }
            }

            copy() {
                return new Genome(new Float32Array(this.genes));
            }

            mutate(rate) {
                for (let i = 0; i < GENOME_SIZE; i++) {
                    if (Math.random() < rate) {
                        if (Math.random() < 0.5) {
                            this.genes[i] += (Math.random() - 0.5) * 0.2;
                        } else {
                            this.genes[i] = Math.random();
                        }
                        this.genes[i] = Math.max(0, Math.min(1, this.genes[i]));
                    }
                }
            }

            static crossover(parentA, parentB) {
                const newGenes = new Float32Array(GENOME_SIZE);
                const midpoint = Math.floor(Math.random() * GENOME_SIZE);

                for (let i = 0; i < GENOME_SIZE; i++) {
                    newGenes[i] = i < midpoint ? parentA.genes[i] : parentB.genes[i];
                }
                return new Genome(newGenes);
            }
        }

        class Creature {
            constructor(genome) {
                this.genome = genome;
                this.traits = this.decode(genome);
            }

            decode(g) {
                const genes = g.genes;
                return {
                    hue: Math.floor(genes[0] * 360),
                    saturation: 50 + genes[1] * 50,
                    lightness: 40 + genes[2] * 40,
                    bodySize: 30 + genes[3] * 30,
                    bodyShape: Math.floor(genes[4] * 3),
                    eyeCount: Math.floor(genes[5] * 4) + 1,
                    eyeSize: 5 + genes[6] * 10,
                    limbCount: Math.floor(genes[7] * 8),
                    limbLength: 20 + genes[8] * 40,
                    limbType: Math.floor(genes[9] * 3),
                    symmetry: genes[10] > 0.5 ? 'radial' : 'bilateral',
                    detail: genes[11]
                };
            }

            describeTraits() {
                var t = this.traits;
                var shapes = ['round', 'square', 'polygon'];
                var limbs = ['straight', 'curved', 'jointed'];
                return shapes[t.bodyShape] + ' body, ' + t.eyeCount + ' eyes, ' + t.limbCount + ' ' + limbs[t.limbType] + ' limbs, ' + t.symmetry + ' symmetry';
            }

            render() {
                const t = this.traits;
                const color = "hsl(" + t.hue + ", " + t.saturation + "%, " + t.lightness + "%)";
                const eyeColor = "hsl(" + ((t.hue + 180) % 360) + ", 80%, 90%)";

                let svg = '<g transform="translate(75, 65)">';

                const angleStep = (Math.PI * 2) / t.limbCount;
                for (let i = 0; i < t.limbCount; i++) {
                    let angle = i * angleStep;
                    if (t.symmetry === 'bilateral') {
                        angle = (Math.PI / (t.limbCount + 1)) * (i + 1) + Math.PI / 2;
                        if (i % 2 === 0) angle = -angle;
                    }

                    const x2 = Math.cos(angle) * (t.bodySize + t.limbLength);
                    const y2 = Math.sin(angle) * (t.bodySize + t.limbLength);

                    if (t.limbType === 0) {
                        svg += '<line x1="0" y1="0" x2="' + x2 + '" y2="' + y2 + '" stroke="' + color + '" stroke-width="4" stroke-linecap="round" />';
                    } else if (t.limbType === 1) {
                        const mx = x2 * 0.5 + Math.sin(angle * 5) * 10;
                        const my = y2 * 0.5 + Math.cos(angle * 5) * 10;
                        svg += '<path d="M0,0 Q' + mx + ',' + my + ' ' + x2 + ',' + y2 + '" stroke="' + color + '" stroke-width="4" fill="none" stroke-linecap="round" />';
                    } else {
                        const jx = x2 * 0.6;
                        const jy = y2 * 0.6;
                        svg += '<polyline points="0,0 ' + jx + ',' + jy + ' ' + x2 + ',' + y2 + '" stroke="' + color + '" stroke-width="4" fill="none" stroke-linecap="round" />';
                    }
                }

                if (t.bodyShape === 0) {
                    svg += '<circle r="' + t.bodySize + '" fill="' + color + '" />';
                } else if (t.bodyShape === 1) {
                    const s = t.bodySize * 1.6;
                    svg += '<rect x="' + (-s / 2) + '" y="' + (-s / 2) + '" width="' + s + '" height="' + s + '" rx="10" fill="' + color + '" />';
                } else {
                    const points = [];
                    const sides = 3 + Math.floor(t.detail * 4);
                    for (let i = 0; i < sides; i++) {
                        const a = (i / sides) * Math.PI * 2;
                        points.push(Math.cos(a) * t.bodySize + ',' + Math.sin(a) * t.bodySize);
                    }
                    svg += '<polygon points="' + points.join(' ') + '" fill="' + color + '" />';
                }

                const eyeOffset = t.bodySize * 0.4;
                if (t.eyeCount === 1) {
                    svg += this.renderEye(0, 0, t.eyeSize, eyeColor);
                } else {
                    for (let i = 0; i < t.eyeCount; i++) {
                        const a = (i / t.eyeCount) * Math.PI * 2 - Math.PI / 2;
                        const ex = Math.cos(a) * eyeOffset;
                        const ey = Math.sin(a) * eyeOffset;
                        svg += this.renderEye(ex, ey, t.eyeSize, eyeColor);
                    }
                }

                svg += '</g>';
                return svg;
            }

            renderEye(x, y, size) {
                return '<g transform="translate(' + x + ', ' + y + ')">' +
                    '<circle r="' + size + '" fill="#fff" />' +
                    '<circle r="' + (size * 0.4) + '" fill="#000" />' +
                    '<circle cx="' + (size * 0.15) + '" cy="' + (-size * 0.15) + '" r="' + (size * 0.15) + '" fill="#fff" />' +
                    '</g>';
            }
        }

        let population = [];
        let selectedIndices = new Set();
        let generation = 1;

        function init() {
            document.getElementById('btn-evolve').addEventListener('click', evolve);
            document.getElementById('btn-randomize').addEventListener('click', randomize);
            document.getElementById('btn-autoselect').addEventListener('click', toggleAutoSelect);

            var slider = document.getElementById('mutation-rate');
            slider.addEventListener('input', function() {
                slider.setAttribute('aria-valuenow', slider.value);
            });

            randomize();
        }

        function randomize() {
            population = [];
            selectedIndices.clear();
            generation = 1;
            updateGenCount();

            for (let i = 0; i < POPULATION_SIZE; i++) {
                population.push(new Genome());
            }
            renderGrid();
            announceStatus('New random population generated.');
        }

        function announceStatus(message) {
            var el = document.getElementById('selection-status');
            if (el) {
                el.textContent = message;
            }
        }

        function renderGrid() {
            const grid = document.getElementById('population-grid');
            grid.innerHTML = '';

            population.forEach(function(genome, index) {
                const creature = new Creature(genome);
                const isSelected = selectedIndices.has(index);
                const card = document.createElement('div');
                card.className = 'creature-card' + (isSelected ? ' selected' : '');
                card.setAttribute('role', 'button');
                card.setAttribute('tabindex', '0');
                card.setAttribute('aria-pressed', isSelected ? 'true' : 'false');
                card.setAttribute('aria-label', 'Creature ' + (index + 1) + ': ' + creature.describeTraits() + (isSelected ? ' (selected)' : ''));
                card.addEventListener('click', function() { toggleSelection(index); });
                card.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleSelection(index);
                    }
                });

                const svgEl = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svgEl.setAttribute('viewBox', '0 0 150 130');
                svgEl.setAttribute('aria-hidden', 'true');
                svgEl.setAttribute('focusable', 'false');
                svgEl.innerHTML = creature.render();

                const stats = document.createElement('div');
                stats.className = 'stats';
                stats.setAttribute('aria-hidden', 'true');
                stats.textContent = 'DNA: ' + genome.genes[0].toFixed(2) + '...';

                card.appendChild(svgEl);
                card.appendChild(stats);
                grid.appendChild(card);
            });
        }

        function toggleSelection(index) {
            if (selectedIndices.has(index)) {
                selectedIndices.delete(index);
            } else {
                selectedIndices.add(index);
            }
            renderGrid();
            announceStatus(selectedIndices.size + ' creature' + (selectedIndices.size !== 1 ? 's' : '') + ' selected.');
        }

        function evolve() {
            if (selectedIndices.size < 2) {
                alert('Please select at least 2 parents to breed!');
                return;
            }

            const parents = Array.from(selectedIndices).map(function(i) { return population[i]; });
            const nextGen = [];

            nextGen.push(parents[0].copy());
            if (parents.length > 1) nextGen.push(parents[1].copy());

            const mutationRate = document.getElementById('mutation-rate').value / 100;

            while (nextGen.length < POPULATION_SIZE) {
                const p1 = parents[Math.floor(Math.random() * parents.length)];
                const p2 = parents[Math.floor(Math.random() * parents.length)];

                const child = Genome.crossover(p1, p2);
                child.mutate(mutationRate);
                nextGen.push(child);
            }

            population = nextGen;
            selectedIndices.clear();
            generation++;
            updateGenCount();
            renderGrid();
            announceStatus('Generation ' + generation + ' bred successfully.');
        }

        function updateGenCount() {
            document.getElementById('gen-count').textContent = generation;
        }

        function toggleAutoSelect() {
            selectedIndices.clear();
            for (let i = 0; i < 3; i++) {
                selectedIndices.add(Math.floor(Math.random() * POPULATION_SIZE));
            }
            renderGrid();
            announceStatus(selectedIndices.size + ' creatures auto-selected.');
        }

        init();
    </script>
</body>
</html>

âœ“