<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antikythera Mechanism Simulator</title>
    <meta name="description" content="Interactive simulation of the ancient Greek astronomical computer from 100 BCE">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #1a2a1a 0%, #0a1a0a 100%); min-height: 100vh; font-family: 'Times New Roman', serif; color: #b8a060; overflow: hidden; }
        #canvas { position: fixed; top: 0; left: 0; }
        #controls {
            position: fixed; top: 20px; left: 20px; background: rgba(20,30,20,0.95);
            padding: 25px; border-radius: 10px; border: 2px solid #705830;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        h2 { font-size: 18px; color: #d4b870; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        .info-row { margin: 12px 0; font-size: 14px; }
        .label { opacity: 0.7; font-size: 11px; text-transform: uppercase; }
        .value { font-size: 20px; color: #d4b870; }
        button {
            display: block; width: 100%; padding: 12px; margin: 10px 0;
            background: linear-gradient(180deg, #4a3a20, #3a2a15);
            border: 1px solid #705830; color: #d4b870; cursor: pointer;
            border-radius: 5px; font-family: inherit; text-transform: uppercase;
            letter-spacing: 1px;
        }
        #date-display {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(20,30,20,0.95); padding: 20px 40px; border-radius: 10px;
            border: 2px solid #705830; text-align: center;
        }
        #date { font-size: 24px; color: #d4b870; }
        #era { font-size: 12px; opacity: 0.7; margin-top: 5px; }
        #legend {
            position: fixed; top: 20px; right: 20px; background: rgba(20,30,20,0.95);
            padding: 20px; border-radius: 10px; border: 2px solid #705830; font-size: 12px;
        }
        .legend-item { margin: 8px 0; display: flex; align-items: center; gap: 10px; }
        .legend-color { width: 15px; height: 15px; border-radius: 50%; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="controls">
        <h2>Antikythera Mechanism</h2>
        <div class="info-row">
            <div class="label">Sun Position</div>
            <div class="value" id="sun-pos">0 degrees</div>
        </div>
        <div class="info-row">
            <div class="label">Moon Phase</div>
            <div class="value" id="moon-phase">New Moon</div>
        </div>
        <div class="info-row">
            <div class="label">Eclipse Prediction</div>
            <div class="value" id="eclipse">None</div>
        </div>
        <button id="forward-btn">Advance One Month</button>
        <button id="year-btn">Advance One Year</button>
        <button id="olympiad-btn">Next Olympiad</button>
        <button id="reset-btn">Reset to 100 BCE</button>
    </div>
    <div id="date-display">
        <div id="date">January, 100 BCE</div>
        <div id="era">Ancient Greece</div>
    </div>
    <div id="legend">
        <h3 style="margin-bottom:10px;color:#d4b870">Gear System</h3>
        <div class="legend-item"><div class="legend-color" style="background:#d4a030"></div>Solar Gear (365.25 days)</div>
        <div class="legend-item"><div class="legend-color" style="background:#a0a0c0"></div>Lunar Gear (29.5 days)</div>
        <div class="legend-item"><div class="legend-color" style="background:#c06040"></div>Eclipse Predictor (Saros)</div>
        <div class="legend-item"><div class="legend-color" style="background:#60a060"></div>Olympiad Counter (4 years)</div>
    </div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let W, H, cx, cy;
        function resize() { W = canvas.width = innerWidth; H = canvas.height = innerHeight; cx = W/2; cy = H/2; }
        resize(); window.onresize = resize;

        let days = 0;
        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                           'July', 'August', 'September', 'October', 'November', 'December'];
        const moonPhases = ['New Moon', 'Waxing Crescent', 'First Quarter', 'Waxing Gibbous',
                           'Full Moon', 'Waning Gibbous', 'Last Quarter', 'Waning Crescent'];

        class Gear {
            constructor(x, y, radius, teeth, ratio, color, label) {
                this.x = x; this.y = y;
                this.radius = radius;
                this.teeth = teeth;
                this.ratio = ratio;
                this.color = color;
                this.label = label;
                this.angle = 0;
            }
            update(baseDays) {
                this.angle = (baseDays / this.ratio) * Math.PI * 2;
            }
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle);
                ctx.beginPath();
                ctx.arc(0, 0, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(40, 35, 25, 0.9)';
                ctx.fill();
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 3;
                ctx.stroke();
                for (let i = 0; i < this.teeth; i++) {
                    const a = (i / this.teeth) * Math.PI * 2;
                    ctx.beginPath();
                    ctx.moveTo(Math.cos(a) * (this.radius - 5), Math.sin(a) * (this.radius - 5));
                    ctx.lineTo(Math.cos(a) * (this.radius + 10), Math.sin(a) * (this.radius + 10));
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = 4;
                    ctx.stroke();
                }
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(0, -this.radius + 20);
                ctx.strokeStyle = '#d4b870';
                ctx.lineWidth = 3;
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(0, -this.radius + 20, 8, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
                ctx.fillStyle = 'rgba(180, 160, 100, 0.7)';
                ctx.font = '12px Times New Roman';
                ctx.textAlign = 'center';
                ctx.fillText(this.label, this.x, this.y + this.radius + 25);
            }
        }

        const gears = [
            new Gear(cx - 150, cy - 100, 80, 48, 365.25, '#d4a030', 'SOLAR CYCLE'),
            new Gear(cx + 150, cy - 100, 60, 36, 29.53, '#a0a0c0', 'LUNAR CYCLE'),
            new Gear(cx - 150, cy + 150, 70, 42, 6585.32, '#c06040', 'SAROS (ECLIPSE)'),
            new Gear(cx + 150, cy + 150, 50, 30, 1461, '#60a060', 'OLYMPIAD')
        ];

        function drawMechanism() {
            ctx.fillStyle = '#0a1a0a';
            ctx.fillRect(0, 0, W, H);
            ctx.beginPath();
            ctx.arc(cx, cy, 250, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(50, 45, 35, 0.5)';
            ctx.fill();
            ctx.strokeStyle = '#705830';
            ctx.lineWidth = 5;
            ctx.stroke();
            for (let i = 0; i < 12; i++) {
                const a = (i / 12) * Math.PI * 2 - Math.PI / 2;
                ctx.fillStyle = '#b8a060';
                ctx.font = '14px Times New Roman';
                ctx.textAlign = 'center';
                ctx.fillText(monthNames[i].substring(0, 3).toUpperCase(), 
                    cx + Math.cos(a) * 220, cy + Math.sin(a) * 220 + 5);
            }
            gears.forEach(g => { g.update(days); g.draw(); });
            ctx.beginPath();
            gears.forEach((g, i) => {
                if (i < gears.length - 1) {
                    ctx.moveTo(g.x, g.y);
                    ctx.lineTo(gears[i + 1].x, gears[i + 1].y);
                }
            });
            ctx.moveTo(gears[0].x, gears[0].y);
            ctx.lineTo(gears[2].x, gears[2].y);
            ctx.strokeStyle = 'rgba(112, 88, 48, 0.3)';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function updateDisplay() {
            const sunAngle = (days % 365.25) / 365.25 * 360;
            document.getElementById('sun-pos').textContent = Math.round(sunAngle) + ' degrees';
            const moonDay = days % 29.53;
            const phaseIndex = Math.floor(moonDay / 29.53 * 8) % 8;
            document.getElementById('moon-phase').textContent = moonPhases[phaseIndex];
            const sarosDay = days % 6585.32;
            if (sarosDay < 30) {
                document.getElementById('eclipse').textContent = 'IMMINENT';
                document.getElementById('eclipse').style.color = '#ff6040';
            } else {
                document.getElementById('eclipse').textContent = Math.round((6585.32 - sarosDay) / 30) + ' months';
                document.getElementById('eclipse').style.color = '#d4b870';
            }
            const year = 100 - Math.floor(days / 365.25);
            const month = Math.floor((days % 365.25) / 30.44);
            const era = year > 0 ? 'BCE' : 'CE';
            document.getElementById('date').textContent = monthNames[month] + ', ' + Math.abs(year) + ' ' + era;
        }

        function animate() {
            drawMechanism();
            updateDisplay();
            requestAnimationFrame(animate);
        }

        document.getElementById('forward-btn').onclick = () => days += 30;
        document.getElementById('year-btn').onclick = () => days += 365;
        document.getElementById('olympiad-btn').onclick = () => days += 1461;
        document.getElementById('reset-btn').onclick = () => days = 0;

        let dragging = false;
        let lastX = 0;
        canvas.onmousedown = e => { dragging = true; lastX = e.clientX; };
        canvas.onmouseup = () => dragging = false;
        canvas.onmousemove = e => {
            if (dragging) {
                days += (e.clientX - lastX) * 0.5;
                days = Math.max(0, days);
                lastX = e.clientX;
            }
        };

        animate();
    </script>
</body>
</html>