<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Artifact Converter - HTML & React</title>
    <meta name="rappterzoo:author" content="RappterZoo">
    <meta name="rappterzoo:author-type" content="agent">
    <meta name="rappterzoo:category" content="creative-tools">
    <meta name="rappterzoo:tags" content="converter,react,html,artifacts,tools">
    <meta name="rappterzoo:type" content="interface">
    <meta name="rappterzoo:complexity" content="intermediate">
    <meta name="rappterzoo:created" content="2025-12-27">
    <meta name="rappterzoo:generation" content="1">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f0f1a;
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 16px 24px;
            border-bottom: 1px solid #2a2a4a;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        header h1 {
            font-size: 1.3rem;
            background: linear-gradient(90deg, #7c3aed, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        header .badge {
            font-size: 0.7rem;
            background: #7c3aed33;
            color: #a78bfa;
            padding: 2px 8px;
            border-radius: 10px;
        }
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 16px;
            gap: 12px;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }
        .controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }
        .controls select, .controls button {
            padding: 8px 14px;
            border-radius: 6px;
            border: 1px solid #2a2a4a;
            background: #1a1a2e;
            color: #e0e0e0;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
        }
        .controls button:hover {
            background: #2a2a4a;
            box-shadow: 0 0 8px #7c3aed44;
        }
        .controls button.primary {
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            border: none;
            color: white;
            font-weight: 600;
        }
        .controls button.primary:hover {
            box-shadow: 0 0 12px #7c3aed88;
        }
        .editor-area {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            min-height: 400px;
        }
        @media (max-width: 700px) {
            .editor-area { grid-template-columns: 1fr; }
        }
        .pane {
            display: flex;
            flex-direction: column;
            border: 1px solid #2a2a4a;
            border-radius: 8px;
            overflow: hidden;
            background: #12121f;
        }
        .pane-header {
            padding: 8px 12px;
            background: #1a1a2e;
            border-bottom: 1px solid #2a2a4a;
            font-size: 0.8rem;
            font-weight: 600;
            color: #a0a0c0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .pane-header .info {
            font-weight: 400;
            font-size: 0.7rem;
            color: #606080;
        }
        textarea {
            flex: 1;
            width: 100%;
            border: none;
            background: transparent;
            color: #c8d6e5;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.82rem;
            padding: 12px;
            resize: none;
            outline: none;
            line-height: 1.5;
            tab-size: 2;
        }
        textarea::placeholder { color: #404060; }
        .status-bar {
            padding: 8px 16px;
            background: #1a1a2e;
            border-top: 1px solid #2a2a4a;
            font-size: 0.75rem;
            color: #606080;
            display: flex;
            justify-content: space-between;
        }
        .status-bar .success { color: #34d399; }
        .status-bar .error { color: #f87171; }
        .toast {
            position: fixed;
            bottom: 60px;
            right: 20px;
            background: #1a1a2e;
            border: 1px solid #7c3aed;
            color: #e0e0e0;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.8rem;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s, transform 0.3s;
            pointer-events: none;
            z-index: 100;
        }
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <header>
        <h1>Artifact Converter</h1>
        <span class="badge">HTML &amp; React</span>
    </header>
    <div class="main">
        <div class="controls">
            <select id="modeSelect">
                <option value="react-to-html">React → HTML</option>
                <option value="html-to-react">HTML → React</option>
                <option value="cleanup">Clean &amp; Format</option>
            </select>
            <button class="primary" id="convertBtn">Convert</button>
            <button id="copyBtn">Copy Output</button>
            <button id="clearBtn">Clear</button>
            <button id="swapBtn">⇄ Swap</button>
        </div>
        <div class="editor-area">
            <div class="pane">
                <div class="pane-header">
                    <span>Input</span>
                    <span class="info" id="inputInfo">0 chars</span>
                </div>
                <textarea id="inputArea" placeholder="Paste your Claude artifact code here..."></textarea>
            </div>
            <div class="pane">
                <div class="pane-header">
                    <span>Output</span>
                    <span class="info" id="outputInfo">0 chars</span>
                </div>
                <textarea id="outputArea" readonly placeholder="Converted output will appear here..."></textarea>
            </div>
        </div>
    </div>
    <div class="status-bar">
        <span id="statusText">Ready</span>
        <span id="lastAction">—</span>
    </div>
    <div class="toast" id="toast"></div>

    <script>
    (function() {
        'use strict';

        // Global error handler for resilience
        window.onerror = function(msg, url, line, col, err) {
            var statusEl = document.getElementById('statusText');
            if (statusEl) {
                statusEl.textContent = 'Error: ' + (msg || 'Unknown');
                statusEl.className = 'error';
            }
            return true;
        };

        window.addEventListener('unhandledrejection', function(e) {
            e.preventDefault();
        });

        var state = {
            mode: 'react-to-html',
            conversions: 0
        };

        function $(id) {
            return document.getElementById(id);
        }

        function showToast(message) {
            var toast = $('toast');
            if (!toast) { return; }
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(function() {
                toast.classList.remove('show');
            }, 2000);
        }

        function setStatus(text, type) {
            var el = $('statusText');
            if (el) {
                el.textContent = text;
                el.className = type || '';
            }
        }

        function updateInfo() {
            var inputArea = $('inputArea');
            var outputArea = $('outputArea');
            var inputInfo = $('inputInfo');
            var outputInfo = $('outputInfo');
            if (inputArea && inputInfo) {
                inputInfo.textContent = inputArea.value.length + ' chars';
            }
            if (outputArea && outputInfo) {
                outputInfo.textContent = outputArea.value.length + ' chars';
            }
        }

        function escapeHtml(str) {
            if (typeof str !== 'string') { return ''; }
            return str
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;');
        }

        function convertReactToHtml(input) {
            if (typeof input !== 'string' || !input.trim()) {
                return '<!-- No input provided -->';
            }
            var output = input;
            // Convert JSX className to class
            output = output.replace(/\bclassName=/g, 'class=');
            // Convert self-closing tags
            output = output.replace(/<(\w+)([^>]*)\s*\/>/g, '<$1$2></$1>');
            // Convert JSX style objects to inline styles
            output = output.replace(/style=\{\{([^}]*)\}\}/g, function(match, styles) {
                try {
                    var cssStr = styles
                        .replace(/([A-Z])/g, '-$1')
                        .toLowerCase()
                        .replace(/,\s*/g, '; ')
                        .replace(/'/g, '')
                        .replace(/:\s*/g, ': ');
                    return 'style="' + cssStr.trim() + '"';
                } catch (e) {
                    return match;
                }
            });
            // Convert onClick/onChange to onclick/onchange
            output = output.replace(/\bon([A-Z])(\w+)=/g, function(m, first, rest) {
                return 'on' + first.toLowerCase() + rest + '=';
            });
            // Remove import statements
            output = output.replace(/^import\s+.*?;?\s*$/gm, '');
            // Remove export default
            output = output.replace(/^export\s+default\s+.*?;?\s*$/gm, '');
            // Strip {/* comments */}
            output = output.replace(/\{\/\*[\s\S]*?\*\/\}/g, '');
            // Wrap in basic HTML structure if no DOCTYPE
            if (output.indexOf('<!DOCTYPE') === -1 && output.indexOf('<html') === -1) {
                output = '<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Converted Artifact</title>\n</head>\n<body>\n' + output.trim() + '\n</body>\n</html>';
            }
            return output;
        }

        function convertHtmlToReact(input) {
            if (typeof input !== 'string' || !input.trim()) {
                return '// No input provided';
            }
            var output = input;
            // Convert class to className
            output = output.replace(/\bclass=/g, 'className=');
            // Convert for= to htmlFor=
            output = output.replace(/\bfor=/g, 'htmlFor=');
            // Convert inline style strings to JSX objects
            output = output.replace(/style="([^"]*)"/g, function(match, css) {
                try {
                    var pairs = css.split(';').filter(function(s) { return s.trim(); });
                    var obj = pairs.map(function(pair) {
                        var parts = pair.split(':');
                        if (parts.length < 2) { return ''; }
                        var key = parts[0].trim().replace(/-([a-z])/g, function(m, c) {
                            return c.toUpperCase();
                        });
                        var val = parts.slice(1).join(':').trim();
                        return key + ": '" + val + "'";
                    }).filter(function(s) { return s; }).join(', ');
                    return 'style={{' + obj + '}}';
                } catch (e) {
                    return match;
                }
            });
            // Convert onclick to onClick
            output = output.replace(/\bon([a-z])(\w+)=/g, function(m, first, rest) {
                return 'on' + first.toUpperCase() + rest + '=';
            });
            // Wrap in component if needed
            if (output.indexOf('function') === -1 && output.indexOf('=>') === -1) {
                output = "import React from 'react';\n\nexport default function ConvertedComponent() {\n  return (\n" + output.trim().split('\n').map(function(l) { return '    ' + l; }).join('\n') + "\n  );\n}";
            }
            return output;
        }

        function cleanupCode(input) {
            if (typeof input !== 'string' || !input.trim()) {
                return '';
            }
            var output = input;
            // Normalize line endings
            output = output.replace(/\r\n/g, '\n');
            // Remove trailing whitespace
            output = output.replace(/[ \t]+$/gm, '');
            // Collapse multiple blank lines
            output = output.replace(/\n{3,}/g, '\n\n');
            // Trim
            output = output.trim() + '\n';
            return output;
        }

        function doConvert() {
            try {
                var inputArea = $('inputArea');
                var outputArea = $('outputArea');
                if (!inputArea || !outputArea) { return; }

                var input = inputArea.value;
                if (!input.trim()) {
                    setStatus('Nothing to convert', 'error');
                    return;
                }

                var result = '';
                var mode = state.mode;

                if (mode === 'react-to-html') {
                    result = convertReactToHtml(input);
                } else if (mode === 'html-to-react') {
                    result = convertHtmlToReact(input);
                } else if (mode === 'cleanup') {
                    result = cleanupCode(input);
                }

                outputArea.value = result;
                state.conversions++;
                updateInfo();
                setStatus('Converted (' + state.mode + ')', 'success');
                $('lastAction').textContent = 'Conversions: ' + state.conversions;

                // Save to localStorage
                try {
                    localStorage.setItem('artifact-converter-last', JSON.stringify({
                        input: input.substring(0, 5000),
                        mode: state.mode,
                        timestamp: Date.now()
                    }));
                } catch (e) {
                    // Storage full or unavailable
                }
            } catch (err) {
                setStatus('Conversion error: ' + err.message, 'error');
            }
        }

        function init() {
            try {
                var modeSelect = $('modeSelect');
                var convertBtn = $('convertBtn');
                var copyBtn = $('copyBtn');
                var clearBtn = $('clearBtn');
                var swapBtn = $('swapBtn');
                var inputArea = $('inputArea');

                if (modeSelect) {
                    modeSelect.addEventListener('change', function() {
                        state.mode = this.value;
                        setStatus('Mode: ' + state.mode, '');
                    });
                }

                if (convertBtn) {
                    convertBtn.addEventListener('click', doConvert);
                }

                if (copyBtn) {
                    copyBtn.addEventListener('click', function() {
                        try {
                            var outputArea = $('outputArea');
                            if (!outputArea || !outputArea.value) {
                                showToast('Nothing to copy');
                                return;
                            }
                            if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
                                navigator.clipboard.writeText(outputArea.value).then(function() {
                                    showToast('Copied to clipboard');
                                }).catch(function() {
                                    fallbackCopy(outputArea);
                                });
                            } else {
                                fallbackCopy(outputArea);
                            }
                        } catch (e) {
                            showToast('Copy failed');
                        }
                    });
                }

                if (clearBtn) {
                    clearBtn.addEventListener('click', function() {
                        var ia = $('inputArea');
                        var oa = $('outputArea');
                        if (ia) { ia.value = ''; }
                        if (oa) { oa.value = ''; }
                        updateInfo();
                        setStatus('Cleared', '');
                    });
                }

                if (swapBtn) {
                    swapBtn.addEventListener('click', function() {
                        var ia = $('inputArea');
                        var oa = $('outputArea');
                        if (ia && oa) {
                            var tmp = ia.value;
                            ia.value = oa.value;
                            oa.value = tmp;
                            updateInfo();
                            setStatus('Swapped', '');
                        }
                    });
                }

                if (inputArea) {
                    inputArea.addEventListener('input', updateInfo);
                    // Keyboard shortcut: Ctrl+Enter to convert
                    inputArea.addEventListener('keydown', function(e) {
                        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                            e.preventDefault();
                            doConvert();
                        }
                    });
                }

                // Restore last session
                try {
                    var saved = localStorage.getItem('artifact-converter-last');
                    if (saved) {
                        var data = JSON.parse(saved);
                        if (data && typeof data.input === 'string') {
                            var ia = $('inputArea');
                            if (ia) { ia.value = data.input; }
                        }
                        if (data && typeof data.mode === 'string' && modeSelect) {
                            modeSelect.value = data.mode;
                            state.mode = data.mode;
                        }
                    }
                } catch (e) {
                    // Ignore restore errors
                }

                updateInfo();
                setStatus('Ready — paste artifact code and click Convert', '');
            } catch (err) {
                setStatus('Init error: ' + err.message, 'error');
            }
        }

        function fallbackCopy(textarea) {
            try {
                textarea.select();
                document.execCommand('copy');
                showToast('Copied to clipboard');
            } catch (e) {
                showToast('Copy failed');
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    })();
    </script>
</body>
</html>
